<!doctype html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EduPlan</title>
  <!-- Favicon: light/dark -->
<link id="fav-light" rel="icon" type="image/svg+xml" media="(prefers-color-scheme: light)" href="assets/ep-favicon-light.svg">
<link id="fav-dark"  rel="icon" type="image/svg+xml" media="(prefers-color-scheme: dark)"  href="assets/ep-favicon-dark.svg">
<link id="apple-icon" rel="apple-touch-icon" href="assets/ep-favicon-light.svg">
<script>
  window.__catalogPromise = fetch("https://drive.usercontent.google.com/uc?export=download&id=YOUR_CATALOG_JSON_ID")
    .then(r => r.json())
    .catch(()=>[]);
</script>
  <!-- Tailwind (no install) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
    /* === DARK MODE === */
:root {
  --bg-from: #f8fafc;  
  --bg-to:   #ffffff;
  --text:    #0f172a;
  --card:    #ffffff;
  --muted:   #475569;
  --border:  #e2e8f0;
  --tab-track:#eef2f6;
  --pill:#e9edf3;
  --pill-text:#334155;
}
.dark {
  --bg-from: #0b1220;  
  --bg-to:   #0a0f1a;
  --text:    #e2e8f0;
  --card:    #0f172a;
  --muted:   #cbd5e1;
  --border:  #334155;
  --tab-track:#111827;
  --pill:#0f172a;
  --pill-text:#cbd5e1;
}
/* badge-lÉ™r, tab-lar, button-lar Ã¼Ã§Ã¼n dÃ¼zÉ™liÅŸlÉ™r */
.bg-slate-100\/80{ background-color:var(--tab-track)!important; }
.bg-slate-100{ background-color:var(--pill)!important; }
.badge, .pill, .inline-badge{
  background-color:var(--pill)!important;
  color:var(--pill-text)!important;
}
/* É™sas fond vÉ™ mÉ™tn */
body { color: var(--text); }
body.bg-gradient-to-b { 
  background-image: linear-gradient(to bottom, var(--bg-from), var(--bg-to)) !important;
}
/* kartlar vÉ™ panellÉ™r */
.bg-white { background-color: var(--card) !important; }
.text-slate-900, .text-slate-800, .text-slate-700 { color: var(--text) !important; }
.text-slate-600, .text-slate-500 { color: var(--muted) !important; }
/* sÉ™rhÉ™dlÉ™r */
.border-slate-200 { border-color: var(--border) !important; }
/* header blur fonu */
.backdrop-blur.bg-white\/70 { background-color: color-mix(in srgb, var(--card) 70%, transparent) !important; }
/* input/select fonu */
select, input { background-color: var(--card) !important; color: var(--text) !important; }
/* â€œAÃ§ / YÃ¼klÉ™â€ dÃ¼ymÉ™si dark Ã¼Ã§Ã¼n kontrastlÄ± qalsÄ±n */
.bg-slate-900 { background-color:#0b1220 !important; color:#fff !important; }
#dark-toggle:checked + span { background:#334155; }
#dark-toggle:checked + span .dot { transform: translateX(16px); }
/* --- Tab keÃ§id animasiyasÄ± --- */
.tab-panel {
  display: none;           /* ilkin vÉ™ziyyÉ™t: gizli */
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 220ms ease, transform 220ms ease;
}

.tab-panel.is-active {
  display: block;          /* gÃ¶rÃ¼nÉ™n panel */
  opacity: 1;
  transform: translateY(0);
}

/* grid panellÉ™ri Ã¼Ã§Ã¼n (sÉ™ndÉ™ bÉ™zilÉ™ri grid-dir) */
.tab-panel.grid-on.is-active { display: grid; }

/* Tab dÃ¼ymÉ™si Ã¼Ã§Ã¼n vizual aktivlik */
.tab-btn {
  transition: background-color 180ms ease, color 180ms ease, box-shadow 180ms ease, transform 120ms ease;
}
.tab-btn[aria-selected="true"] {
  background-color: var(--card);
  color: var(--text);
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
  transform: translateY(-1px);
}
/* DARK: tray vÉ™ aktiv dÃ¼ymÉ™ Ã¼Ã§Ã¼n daha yÃ¼ksÉ™k kontrast */
.dark #tabs{
  background:#0f172a;              /* tray fonu */
  border-color:#253046;
}
.dark .tab-btn[aria-selected="true"]{
  background:#1e293b;              /* aktiv tab fonu â€“ traydan aÃ§Ä±q */
  color:#e5e7eb;
  box-shadow:
    0 0 0 1px #304155,             /* nazik ring */
    0 8px 16px rgba(0,0,0,.35);
}
/* DARK: passiv tabÄ± bir az solÄŸun gÃ¶stÉ™r */
.dark .tab-btn[aria-selected="false"]{
  color:#94a3b8;
  opacity:.9;
}
/* HÉ™r iki rejimdÉ™ aktiv tab altÄ±nda indikator xÉ™tti */
.tab-btn[aria-selected="true"]{ position:relative; }
.tab-btn[aria-selected="true"]::after{
  content:"";
  position:absolute; left:12px; right:12px; bottom:-7px;
  height:3px; border-radius:9999px;
  background:linear-gradient(90deg,#22d3ee,#a78bfa);
  opacity:.95;
}
/* KartlarÄ±n hover kÃ¶lgÉ™si */
.bg-white {
  transition: box-shadow 0.2s ease;
}

.bg-white:hover {
  box-shadow: 0 6px 16px rgba(0,0,0,0.12); /* Light mode kÃ¶lgÉ™ */
}

/* Dark mod Ã¼Ã§Ã¼n hover kÃ¶lgÉ™si */
.dark .bg-white:hover {
  box-shadow: 0 6px 16px rgba(255,255,255,0.15); /* AÃ§Ä±q kÃ¶lgÉ™ */
}
select:invalid { color:#9aa4b2; }
    
  </style>
<link rel="dns-prefetch" href="https://drive.usercontent.google.com">
<link rel="preconnect" href="https://drive.usercontent.google.com" crossorigin>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-900 relative">
  <div class="pointer-events-none absolute inset-0 -z-10 overflow-hidden">
    <div class="absolute -top-24 -right-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-indigo-200/50 to-emerald-200/50"></div>
    <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-amber-200/40 to-pink-200/40"></div>
  </div>

  <header class="sticky top-0 z-50 backdrop-blur bg-white/70 border-b border-slate-200">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">
<!-- Header loqo -->
<img id="site-logo" src="assets/ep-favicon-light.svg" alt="EduPlan loqo" class="h-9 w-9 rounded-2xl shadow-sm" loading="eager" decoding="async">
        <span class="font-semibold tracking-tight">EduPlan AZ</span>
      </div>
      <div class="relative flex items-center gap-3" id="header-controls">
        <button id="btn-settings" class="rounded-2xl border px-3 py-2 text-sm">âš™ï¸ <span data-i18n="nav.settings">TÉ™nzimlÉ™mÉ™lÉ™r</span></button>
        <!-- Settings popover -->
<div id="settings-panel"
       class="hidden absolute right-0 top-12 z-[60] w-64 rounded-2xl border border-slate-200 bg-white p-4 shadow-lg">
    <div class="flex items-center justify-between">
      <div class="text-sm">ğŸŒ™ QaranlÄ±q rejim</div>
      <label class="inline-flex items-center cursor-pointer">
        <input id="dark-toggle" type="checkbox" class="sr-only">
        <span class="w-10 h-6 bg-slate-200 rounded-full relative transition">
          <span class="dot absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition"></span>
        </span>
      </label>
    </div>
  </div>
</div>

    </div>
  </header>

  <section class="relative">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12 lg:py-16 grid lg:grid-cols-2 gap-8 items-center">
      <div>
        <h1 id="hero-title" class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight leading-snug whitespace-normal text-balance text-pretty max-w-[28ch] sm:max-w-[32ch] lg:max-w-[36ch]">TÉ™dris resurslarÄ±nÄ± saniyÉ™lÉ™r iÃ§indÉ™ tap vÉ™ yÃ¼klÉ™</h1>
        <p class="mt-4 text-slate-600 text-lg" id="hero-subtitle">SadÉ™ interfeys, premium gÃ¶rÃ¼nÃ¼ÅŸ, AzÉ™rbaycan mÉ™ktÉ™blÉ™ri Ã¼Ã§Ã¼n uyÄŸunlaÅŸdÄ±rÄ±lÄ±b.</p>
        <div class="mt-6 flex items-center gap-3 text-sm text-slate-600">
          <span class="inline-flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-emerald-500 inline-block"></span><span id="hero-b1">KSQ/BSQ & PP</span></span>
          <span class="inline-flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-indigo-500 inline-block"></span><span id="hero-b2">AlÉ™tlÉ™r & TestlÉ™r</span></span>
          <span class="inline-flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-amber-500 inline-block"></span><span id="hero-b3">PDF/DOCX</span></span>
        </div>
      </div>
      <div class="grid gap-4">
        <div class="grid sm:grid-cols-2 gap-4">
          <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
            <div class="p-4">
              <div class="text-base font-semibold">ğŸ“„ <span id="feat-ksq-title">KSQ/BSQ</span></div>
              <div class="text-sm text-slate-600 mt-1" id="feat-ksq-desc">Sinif, fÉ™nn, nÃ¶v vÉ™ nÃ¶mrÉ™ Ã¼zrÉ™ summativ qiymÉ™tlÉ™ndirmÉ™ fayllarÄ±.</div>
            </div>
          </div>
          <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
            <div class="p-4">
              <div class="text-base font-semibold">ğŸ“… <span id="feat-pp-title">Perspektiv plan (PP)</span></div>
              <div class="text-sm text-slate-600 mt-1" id="feat-pp-desc">FÉ™nn Ã¼zrÉ™ illik plan fayllarÄ±.</div>
            </div>
          </div>
        </div>
        <div class="grid sm:grid-cols-3 gap-4">
          <div class="rounded-2xl bg-white border p-4 shadow-sm hover:shadow-md transition flex items-center gap-2">ğŸ§® <span id="mini-calc">Bal kalkulyatoru</span></div>
          <div class="rounded-2xl bg-white border p-4 shadow-sm hover:shadow-md transition flex items-center gap-2">ğŸ“š <span id="mini-templates">Sual bankÄ±</span></div>
          <div class="rounded-2xl bg-white border p-4 shadow-sm hover:shadow-md transition flex items-center gap-2">â¬‡ï¸ <span id="mini-export">Ä°xrac</span></div>
        </div>
      </div>
    </div>
  </section>

  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-16">
    <div id="tabs" class="mt-2 grid grid-cols-3 rounded-2xl p-1 bg-slate-100/80 border border-slate-200 shadow-inner">
      <button data-tab="ksq" class="tab-btn rounded-xl px-4 py-2 text-sm text-slate-600" id="tab-ksq">KSQ / BSQ</button>
      <button data-tab="pp"  class="tab-btn rounded-xl px-4 py-2 text-sm text-slate-600" id="tab-pp">Perspektiv plan</button>
      <button data-tab="tools" class="tab-btn rounded-xl px-4 py-2 text-sm text-slate-600" id="tab-tools">AlÉ™tlÉ™r & TestlÉ™r</button>
    </div>

    <section id="panel-ksq" class="tab-panel is-active mt-6">
      <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
        <div class="p-4 border-b"><h3 class="font-semibold" id="ksq-title">KSQ/BSQ</h3></div>
        <div class="p-4 grid lg:grid-cols-3 gap-6">
          <div class="space-y-4">
            <div><label class="text-sm text-slate-700 block" id="lbl-grade">Sinif</label>
              <select id="grade" class="w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select></div>
            <div><label class="text-sm text-slate-700 block" id="lbl-subject">FÉ™nn</label>
              <select id="subject" class="w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select></div>
            <div><label class="text-sm text-slate-700 block" id="lbl-type">NÃ¶v</label>
              <select id="ksqType" class="w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1">
                <option>KSQ</option><option>BSQ</option></select></div>
            <div><label class="text-sm text-slate-700 block" id="lbl-examNo">NÃ¶mrÉ™ni seÃ§in</label>
              <select id="examIndex" class="w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select>
            </div>
          </div>
<div class="lg:col-span-2">
  <div id="ksq-results-card"
       class="relative rounded-xl border border-slate-200 bg-white p-4 text-sm overflow-hidden min-h-[320px]">
    <div id="ksq-count-wrap" class="flex items-center justify-end mb-3 hidden">
      <span class="inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600 border" id="ksq-count">0</span>
    </div>

    <!-- BoÅŸ halda tam Ã¶rtÉ™n placeholder -->
    <div id="ksq-empty" class="absolute inset-4 grid place-items-center">
      <div class="w-full max-w-[560px] rounded-xl p-[1px] bg-gradient-to-br from-indigo-500/40 via-fuchsia-500/40 to-amber-500/40">
        <div class="rounded-[11px] border border-white/20 bg-white/60 dark:bg-slate-900/40 backdrop-blur-md p-6 text-center">
          <div class="mx-auto mb-2 h-12 w-12 grid place-items-center rounded-full bg-white/30 dark:bg-white/10">ğŸ¯</div>
          <div class="text-base font-semibold">ZÉ™hmÉ™t olmasa seÃ§im edin</div>
          <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">
            Sinif, fÉ™nn, nÃ¶v vÉ™ nÃ¶mrÉ™ni seÃ§dikdÉ™n sonra nÉ™ticÉ™lÉ™r burada gÃ¶rÃ¼nÉ™cÉ™k.
          </div>
        </div>
      </div>
    </div>

    <div id="ksq-results" class="grid sm:grid-cols-2 gap-3"></div>
  </div>
</div>


        </div>
      </div>
    </section>

    <section id="panel-pp"  class="tab-panel mt-6">
      <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
        <div class="p-4 border-b"><h3 class="font-semibold" id="pp-title">Perspektiv (illik) plan</h3></div>
          <div class="p-4 grid lg:grid-cols-3 lg:items-center gap-6">
            <div class="space-y-4 lg:min-h-[320px] lg:flex lg:flex-col lg:justify-center lg:-translate-y-3">
            <div><label class="text-sm text-slate-700 block" id="lbl-pp-subject">FÉ™nn</label>
              <select id="ppSubject" class="w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select></div>
          </div>
<div class="lg:col-span-2">
  <div id="pp-results-card"
       class="relative rounded-xl border border-slate-200 bg-white p-4 text-sm overflow-hidden min-h-[320px]">
    <div id="pp-count-wrap" class="flex items-center justify-end mb-3 hidden">
      <span class="inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600 border" id="pp-count">0</span>
    </div>

    <div id="pp-empty" class="absolute inset-4 grid place-items-center">
      <div class="w-full max-w-[560px] rounded-xl p-[1px] bg-gradient-to-br from-indigo-500/40 via-fuchsia-500/40 to-amber-500/40">
        <div class="rounded-[11px] border border-white/20 bg-white/60 dark:bg-slate-900/40 backdrop-blur-md p-6 text-center">
          <div class="mx-auto mb-2 h-12 w-12 grid place-items-center rounded-full bg-white/30 dark:bg-white/10">ğŸ—‚ï¸</div>
          <div class="text-base font-semibold">ZÉ™hmÉ™t olmasa fÉ™nni seÃ§in</div>
          <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">
            FÉ™nni seÃ§dikdÉ™n sonra nÉ™ticÉ™lÉ™r burada gÃ¶rÃ¼nÉ™cÉ™k.
          </div>
        </div>
      </div>
    </div>

    <div id="pp-results" class="grid sm:grid-cols-2 gap-3"></div>
  </div>
</div>


        </div>
      </div>
    </section>

    <section id="panel-tools" class="tab-panel grid-on mt-6">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
          <div class="p-4 border-b"><div class="text-base font-semibold">ğŸ§® <span id="tool-calc-title">Bal kalkulyatoru</span></div></div>
          <div class="p-4 space-y-3">
            <div class="grid grid-cols-2 gap-3">
              <input type="number" placeholder="KSQ1" class="rounded-xl border px-3 py-2 text-sm" />
              <input type="number" placeholder="KSQ2" class="rounded-xl border px-3 py-2 text-sm" />
              <input type="number" placeholder="KSQ3" class="rounded-xl border px-3 py-2 text-sm" />
              <input type="number" placeholder="KSQ4" class="rounded-xl border px-3 py-2 text-sm" />
            </div>
            <input type="number" placeholder="BSQ" class="rounded-xl border px-3 py-2 text-sm" />
            <button class="rounded-2xl w-full mt-2 bg-slate-900 text-white px-4 py-2 text-sm" id="btn-calc">Hesabla</button>
          </div>
        </div>

        <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
          <div class="p-4 border-b"><div class="text-base font-semibold">ğŸ“„ <span id="tool-templates-title">Åablon kitabxanasÄ±</span></div></div>
          <div class="p-4">
            <div class="flex flex-wrap gap-2 mb-3">
              <span class="rounded-full border px-2 py-1 text-xs">KSQ nÃ¼munÉ™lÉ™ri</span>
              <span class="rounded-full border px-2 py-1 text-xs">BSQ nÃ¼munÉ™lÉ™ri</span>
              <span class="rounded-full border px-2 py-1 text-xs">QrublaÅŸdÄ±rma</span>
              <span class="rounded-full border px-2 py-1 text-xs">Rubrikalar</span>
              <span class="rounded-full border px-2 py-1 text-xs">Ä°llik plan</span>
              <span class="rounded-full border px-2 py-1 text-xs">GÃ¼ndÉ™lik plan</span>
            </div>
            <button class="rounded-2xl w-full border px-4 py-2 text-sm" id="btn-browse">Bax</button>
          </div>
        </div>

        <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
          <div class="p-4 border-b"><div class="text-base font-semibold">ğŸ“š <span id="tool-bank-title">Sual bankÄ±</span></div></div>
          <div class="p-4">
            <div class="grid grid-cols-2 gap-2 mb-3">
              <span class="rounded-full border px-2 py-1 text-xs text-center">Multiple choice</span>
              <span class="rounded-full border px-2 py-1 text-xs text-center">QÄ±sa cavab</span>
              <span class="rounded-full border px-2 py-1 text-xs text-center">AÃ§Ä±q sual</span>
              <span class="rounded-full border px-2 py-1 text-xs text-center">Praktik tapÅŸÄ±rÄ±q</span>
            </div>
            <button class="rounded-2xl w-full bg-slate-900 text-white px-4 py-2 text-sm" id="btn-add">ÆlavÉ™ et</button>
          </div>
        </div>

        
      </div>
    </section>
  </main>

  <footer class="border-t border-slate-200 py-10 text-sm">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-slate-600">Â© <span id="year"></span> EduPlan AZ Â· <span id="ft-rights">BÃ¼tÃ¼n hÃ¼quqlar qorunur</span></p>
      <div class="flex items-center gap-4 text-slate-600">
        <a class="hover:underline" href="terms.html" id="ft-terms">ÅÉ™rtlÉ™r</a>
        <a class="hover:underline" href="privacy.html" id="ft-privacy">MÉ™xfilik</a>
      </div>
    </div>
  </footer>

  <script>
    
  const translations = {
    az: {
      nav: { settings: 'TÉ™nzimlÉ™mÉ™lÉ™r', signIn: 'Daxil ol' },
      hero: {
        title: 'TÉ™dris resurslarÄ±nÄ± saniyÉ™lÉ™r iÃ§indÉ™ tap vÉ™ yÃ¼klÉ™',
        subtitle: 'SadÉ™ interfeys, premium gÃ¶rÃ¼nÃ¼ÅŸ, AzÉ™rbaycan mÉ™ktÉ™blÉ™ri Ã¼Ã§Ã¼n uyÄŸunlaÅŸdÄ±rÄ±lÄ±b.',
        ctaPrimary: 'Yeni sÉ™nÉ™d', ctaSecondary: 'Åablonlara bax',
        badges: { one: 'KSQ/BSQ & PP', two: 'AlÉ™tlÉ™r & TestlÉ™r', three: 'PDF/DOCX' }
      },
      features: {
        ksqBsq: { title: 'KSQ/BSQ', desc: 'Sinif, fÉ™nn, nÃ¶v vÉ™ nÃ¶mrÉ™ Ã¼zrÉ™ summativ qiymÉ™tlÉ™ndirmÉ™ fayllarÄ±.' },
        pp: { title: 'Perspektiv plan (PP)', desc: 'FÉ™nn Ã¼zrÉ™ illik plan fayllarÄ±.' },
        calc: 'Bal kalkulyatoru', templates: 'Sual bankÄ±', export: 'Ä°xrac'
      },
      tabs: { pp: 'Perspektiv plan', tools: 'AlÉ™tlÉ™r & TestlÉ™r' },
      ksq: { title: 'KSQ/BSQ', type: 'NÃ¶v' },
      pp: { title: 'Perspektiv (illik) plan' },
      tools: { calcTitle: 'Bal kalkulyatoru', templatesTitle: 'Åablon kitabxanasÄ±', bankTitle: 'Sual bankÄ±' },
      labels: { ksqNo: 'KSQ nÃ¶mrÉ™si', bsqNo: 'BSQ nÃ¶mrÉ™si' },
      common: { grade: 'Sinif', subject: 'FÉ™nn', calculate: 'Hesabla', browse: 'Bax', add: 'ÆlavÉ™ et' },
      subjects: {
        az: 'AzÉ™rbaycan dili', lit: 'ÆdÉ™biyyat', science: 'TÉ™biÉ™t', eng: 'Ä°ngilis dili', rus: 'Rus dili', math: 'Riyaziyyat',
        physics: 'Fizika', chemistry: 'Kimya', biology: 'Biologiya',
        az_history: 'AzÉ™rbaycan tarixi', world_history: 'Ãœmumi tarix', geography: 'CoÄŸrafiya',
        it: 'Ä°nformatika', life: 'HÉ™yat bilgisi', tech: 'Texnologiya', art: 'TÉ™sviri incÉ™sÉ™nÉ™t', music: 'Musiqi',
        pe: 'Fiziki tÉ™rbiyÉ™', premilitary: 'Ã‡aÄŸÄ±rÄ±ÅŸaqÉ™dÉ™rki hazÄ±rlÄ±q',
      },
      footer: { rights: 'BÃ¼tÃ¼n hÃ¼quqlar qorunur', terms: 'ÅÉ™rtlÉ™r', privacy: 'MÉ™xfilik' },
    },
  };

  const subjectKeysByGrade = {
      I:  ['az','life','math','eng','rus','art','music','pe','tech','it'],
      II: ['az','life','math','eng','rus','art','music','pe','tech','it'],
      III:['az','life','math','eng','rus','art','music','pe','tech','it'],
      IV: ['az','life','math','eng','rus','art','music','pe','tech','it'],
      V:  ['az','lit','eng','rus','math','science','it','az_history','geography','art','music','pe','tech'],
      VI: ['az','lit','eng','rus','math','physics','science','it','az_history','geography','art','music','pe','tech'],
      VII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
      VIII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
      IX: ['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
      X:  ['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
      XI: ['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
  };

  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

const state = {
  lang: 'az',
  grade: null,       // É™vvÉ™l 'V' idi â†’ boÅŸ
  subject: null,     // É™vvÉ™l null qalÄ±r
  ksqType: null,     // KSQ/BSQ seÃ§ilmÉ™yib
  examIndex: null,
  ppSubject: null,   // PP fÉ™nni dÉ™ seÃ§ilmÉ™yib
  catalog: [],
};

  window.state = state;
    
function setActiveTab(name, opts = { scroll: false }) {
  // Tab dÃ¼ymÉ™lÉ™rinin aktivliyi
  $$('.tab-btn').forEach(btn => {
    const act = btn.dataset.tab === name;
    btn.classList.toggle('bg-white', act);
    btn.classList.toggle('shadow-sm', act);
    btn.classList.toggle('text-slate-900', act);
    btn.classList.toggle('text-slate-600', !act);
    btn.setAttribute('aria-selected', act ? 'true' : 'false');
  });

  // PanellÉ™ri gÃ¶stÉ™r/gizlÉ™t + animasiya
  ['ksq','pp','tools'].forEach(n => {
    const panel = document.getElementById('panel-' + n);
    if (!panel) return;
    if (n === name) {
      panel.classList.add('is-active');
      // dÃ¼zgÃ¼n display Ã¼Ã§Ã¼n (grid olan panel Ã¼Ã§Ã¼n)
      if (panel.classList.contains('grid-on')) {
        panel.style.display = 'grid';
      } else {
        panel.style.display = 'block';
      }
      // panelin baÅŸÄ±na yumÅŸaq scroll (istÉ™yinÉ™ gÃ¶rÉ™)
      if (opts.scroll) {
        const y = panel.getBoundingClientRect().top + window.scrollY - 90;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }
    } else {
      panel.classList.remove('is-active');
      panel.style.display = 'none';
    }
  });

  // iÃ§ scroll-u sÄ±fÄ±rla (vizuallÄ±q Ã¼Ã§Ã¼n)
  document.getElementById('ksq-results')?.scrollTo?.(0,0);
  document.getElementById('pp-results')?.scrollTo?.(0,0);
}

  function option(el, val, text){ const o=document.createElement('option'); o.value=val; o.textContent=text; el.appendChild(o);}  

  function subjectsFor(grade){
    const keys = subjectKeysByGrade[grade] || Object.keys(translations[state.lang].subjects);
    return keys.map(k => translations[state.lang].subjects[k]).filter(Boolean);
  }
  function setText(sel, text){
  const el = document.querySelector(sel);
  if (el) el.textContent = text;
}
    // --- GAS feed ---

function renderSelects(){
  const t = translations[state.lang];

  // === KSQ/BSQ select-lÉ™ri ===
  const grades = ['I','II','III','IV','V','VI','VII','VIII','IX','X','XI'];

  // Sinif
  const gradeEl = document.getElementById('grade');
  gradeEl.innerHTML = '';
  addPlaceholder(gradeEl, 'Sinfi seÃ§in');
  grades.forEach(g => option(gradeEl, g, g));
  gradeEl.value = state.grade ?? "";

  // FÉ™nn (sinif seÃ§ilmÉ™yibsÉ™, yalnÄ±z placeholder)
  const subjEl = document.getElementById('subject');
  subjEl.innerHTML = '';
  addPlaceholder(subjEl, 'FÉ™nni seÃ§in');
  if (state.grade){
    const S = subjectsFor(state.grade);
    S.forEach(s => option(subjEl, s, s));
  }
  subjEl.value = state.subject ?? "";

  // NÃ¶v (KSQ/BSQ)
  const typeEl = document.getElementById('ksqType');
  typeEl.innerHTML = '';
  addPlaceholder(typeEl, 'NÃ¶vÃ¼ seÃ§in');
  option(typeEl, 'KSQ', 'KSQ');
  option(typeEl, 'BSQ', 'BSQ');
  typeEl.value = state.ksqType ?? "";

// NÃ¶mrÉ™ (KSQ vÉ™ ya BSQ seÃ§iminÉ™ uyÄŸun)
const idxEl = document.getElementById('examIndex');
idxEl.innerHTML = '';
addPlaceholder(idxEl, 'NÃ¶mrÉ™ni seÃ§in');

if (state.ksqType === 'KSQ') {
  for (let i=1;i<=10;i++) option(idxEl, String(i), String(i));
} else if (state.ksqType === 'BSQ') {
  ['1','2'].forEach(i => option(idxEl, i, i));
}
idxEl.value = state.examIndex ?? "";
idxEl.disabled = !state.ksqType; // nÃ¶v seÃ§ilmÉ™yibsÉ™ passiv


  // === PP fÉ™nn ===
  const ppEl = document.getElementById('ppSubject');
  ppEl.innerHTML = '';
  addPlaceholder(ppEl, 'FÉ™nni seÃ§in');
  Object.values(t.subjects).forEach(s => option(ppEl, s, s));
  ppEl.value = state.ppSubject ?? "";

  // === MÉ™tnlÉ™r (dÉ™yiÅŸmÉ™yib â€” sÉ™nin kodundakÄ± kimi) ===
  setText('#hero-title', t.hero.title);
  setText('#lbl-grade',   t.common.grade);
  setText('#lbl-subject', t.common.subject);
  setText('#lbl-type',    t.ksq.type);
  setText('#lbl-ksqNo',   t.labels.ksqNo);
  setText('#lbl-bsqNo',   t.labels.bsqNo);
  setText('#lbl-pp-subject', t.common.subject);

  setText('#ksq-title', t.ksq.title);
  setText('#pp-title',  t.pp.title);

  setText('#hero-subtitle', t.hero.subtitle);
  setText('#hero-b1', t.hero.badges.one);
  setText('#hero-b2', t.hero.badges.two);
  setText('#hero-b3', t.hero.badges.three);

  setText('#feat-ksq-title', t.features.ksqBsq.title);
  setText('#feat-ksq-desc',  t.features.ksqBsq.desc);
  setText('#feat-pp-title',  t.features.pp.title);
  setText('#feat-pp-desc',   t.features.pp.desc);

  setText('#tab-pp',    t.tabs.pp);
  setText('#tab-tools', t.tabs.tools);

  setText('#tool-calc-title',      t.tools.calcTitle);
  setText('#tool-templates-title', t.tools.templatesTitle);
  setText('#tool-bank-title',      t.tools.bankTitle);

  setText('#ft-rights',  t.footer.rights);
  setText('#ft-terms',   t.footer.terms);
  setText('#ft-privacy', t.footer.privacy);
  setText('[data-i18n="nav.settings"]', t.nav.settings);
}


  // Kart baÅŸlÄ±ÄŸÄ±nÄ± formalaÅŸdÄ±rÄ±r
function buildTitle(it) {
  const format = (it.ext || 'FILE').toUpperCase();
  if (it.type === 'PP') {
    const subject = it.subject || 'FÉ™nn';
    return `${subject} Â· PP Â· ${format}`;
  }
  const grade   = it.grade   || 'â€”';
  const subject = it.subject || 'FÉ™nn';
  const idx     = it.index   || '';
  return `${grade} Â· ${subject} Â· ${it.type}-${idx} Â· ${format}`;
}


document.getElementById('grade').addEventListener('change', e=>{
  state.grade = e.target.value || null;
  // sinif dÉ™yiÅŸdisÉ™, fÉ™nni sÄ±fÄ±rla
  state.subject = null;
  renderSelects();
  toggleResults();
});

document.getElementById('subject').addEventListener('change', e=>{
  state.subject = e.target.value || null;
  toggleResults();
});

document.getElementById('ksqType').addEventListener('change', e=>{
  state.ksqType = e.target.value || null;
  // nÃ¶mrÉ™lÉ™ri sÄ±fÄ±rla
  state.ksqIndex = null;
  state.bsqIndex = null;
  renderSelects();
  toggleResults();
});

document.getElementById('examIndex').addEventListener('change', e=>{
  state.examIndex = e.target.value || null;
  toggleResults();
});


document.getElementById('ppSubject').addEventListener('change', e=>{
  state.ppSubject = e.target.value || null;
  toggleResults();
});


  ['tab-ksq','tab-pp','tab-tools'].forEach(id => {
  const btn = document.getElementById(id);
  if (!btn) return;
btn.addEventListener('click', (e) => {
  const name = e.currentTarget.dataset.tab;
  setActiveTab(name, { scroll: true }); // klikdÉ™ scroll et
});

});
(function init(){
  document.getElementById('year').textContent = new Date().getFullYear();
  if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
  window.scrollTo(0, 0);
  setActiveTab('ksq', { scroll: false });

  // ARTÄ°Q avtomatik seÃ§im YOXDUR
  // state.subject = ...  â† sil
  // state.ppSubject = ... â† sil

  renderSelects();
  toggleResults();
})();

    
  const settingsBtn = document.getElementById('btn-settings');
  const panel = document.getElementById('settings-panel');
  const darkToggle = document.getElementById('dark-toggle');
// Sistem ayarÄ±nÄ± da nÉ™zÉ™rÉ™ al
const mq = window.matchMedia('(prefers-color-scheme: dark)');

// LocalStorage-da yoxdursa, sistemi gÃ¶tÃ¼r
const saved = localStorage.getItem('theme');
const initialTheme = saved ? saved : (mq.matches ? 'dark' : 'light');

// TÉ™tbiq et
document.documentElement.classList.toggle('dark', initialTheme === 'dark');
if (darkToggle) darkToggle.checked = (initialTheme === 'dark');
applyThemeAssets(initialTheme);

// Toggle dÉ™yiÅŸÉ™ndÉ™
darkToggle?.addEventListener('change', (e) => {
  const theme = e.target.checked ? 'dark' : 'light';
  document.documentElement.classList.toggle('dark', theme === 'dark');
  localStorage.setItem('theme', theme);
  applyThemeAssets(theme);
});

// Ä°stifadÉ™Ã§i localStorage-da seÃ§im etmÉ™yibsÉ™, sistem temasÄ± dÉ™yiÅŸÉ™ndÉ™ uyÄŸunlaÅŸ
mq.addEventListener?.('change', (e) => {
  if (!localStorage.getItem('theme')) {
    const theme = e.matches ? 'dark' : 'light';
    document.documentElement.classList.toggle('dark', theme === 'dark');
    if (darkToggle) darkToggle.checked = (theme === 'dark');
    applyThemeAssets(theme);
  }
});

  // paneli aÃ§/baÄŸla
  settingsBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    panel.classList.toggle('hidden');
  });

  // kÉ™nara klik = baÄŸla
  document.addEventListener('click', (e) => {
    if (!panel.contains(e.target) && !settingsBtn.contains(e.target)) {
      panel.classList.add('hidden');
    }
  });
function applyThemeAssets(theme) {
  const isDark = theme === 'dark';

  // Header loqo â€” favicon deyil, loqo fayllarÄ±
  const logoEl = document.getElementById('site-logo');
  if (logoEl) {
    logoEl.src = isDark ? 'assets/ep-favicon-dark.svg' : 'assets/ep-favicon-light.svg';
  }

  // Apple Touch Icon (mobil Ã¼Ã§Ã¼n)
  const apple = document.getElementById('apple-icon');
  if (apple) {
    apple.href = isDark ? 'assets/ep-favicon-dark.svg' : 'assets/ep-favicon-light.svg';
  }
}



const FEED_URL = "https://script.google.com/macros/s/AKfycbxnt6tDu5YJ_P_FUgobNTu_Q-2dbyZjaXSWwyjIKysTJ3UwnWZKqm0ZxoNwoyT4M0w7/exec";

// Kart baÅŸlÄ±ÄŸÄ±
function buildTitle(it){
  const format = (it.ext || 'FILE').toUpperCase();
  return it.type==='PP'
    ? `${it.subject} Â· PP Â· ${format}`
    : `${it.grade} Â· ${it.subject} Â· ${it.type}-${it.index} Â· ${format}`;
}

// GÃ¶stÉ™rilÉ™cÉ™k fayl adÄ± (istÉ™sÉ™n saxla)
function downloadName(it){
  const ext = (it.ext || 'FILE').toLowerCase();
  return (it.type==='PP'
    ? `${it.subject} - PP.${ext}`
    : `${it.grade} - ${it.subject} - ${it.type}${it.index}.${ext}`
  ).replace(/[\/\\:?*"<>|]+/g,'-');
}

function renderKSQ(){
  const wrap = document.getElementById('ksq-results');
  wrap.innerHTML = '';

  // FiltrlÉ™mÉ™
const list = window.state.catalog.filter(it=>{
  if (it.type !== state.ksqType) return false;
  if (it.grade !== state.grade) return false;
  if (it.subject !== state.subject) return false;
  if (it.index !== state.examIndex) return false;
  return true;
});

  // SayÄ± gÃ¶stÉ™r
  document.getElementById('ksq-count').textContent = list.length;

// 1â€“2 nÉ™ticÉ™ varsa yalnÄ±z grid-i mÉ™rkÉ™zlÉ™ÅŸdir
const gridEl = document.getElementById('ksq-results');
const center = (list.length > 0 && list.length <= 2);
gridEl.classList.toggle('min-h-[240px]', center);
gridEl.classList.toggle('place-content-center', center);
gridEl.classList.toggle('justify-items-center', center);
if (!center) {
  gridEl.classList.remove('min-h-[240px]','place-content-center','justify-items-center');
}


  // NÉ™ticÉ™ yoxdursa
  if (list.length === 0) {
    wrap.innerHTML = '<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">Fayl yoxdur</div>';
    return;
  }

  // KartlarÄ± Ã§É™k
  list.forEach(it=>{
    const card = document.createElement('div');
    card.className = 'group rounded-xl p-[1px] bg-gradient-to-br from-slate-200 to-slate-100';
    card.innerHTML = `
      <div class="rounded-[11px] p-4 bg-white shadow-sm group-hover:shadow-md transition">
        <div class="flex items-start gap-3">
          <div class="h-8 w-8 rounded-lg bg-slate-100 grid place-items-center">ğŸ“„</div>
          <div class="flex-1">
            <div class="text-sm font-medium">${buildTitle(it)}</div>
            <div class="mt-1"><span class="rounded-full bg-slate-100 px-2 py-0.5 text-[10px] border">${(it.ext || 'FILE').toUpperCase()}</span></div>
            <div class="mt-3">
              <a href="${it.dl}"
                 target="_self" rel="noopener"
                 download="${downloadName(it)}"
                 class="rounded-2xl bg-slate-900 text-white px-3 py-1.5 text-sm inline-flex items-center gap-2">â¬‡ï¸ YÃ¼klÉ™</a>
            </div>
          </div>
        </div>
      </div>`;
    wrap.appendChild(card);
  });
}


function renderPP(){
  const wrap = document.getElementById('pp-results');
  wrap.innerHTML = '';

  const list = window.state.catalog.filter(it => it.type==='PP' && it.subject===state.ppSubject);

  document.getElementById('pp-count').textContent = list.length;

const gridEl = document.getElementById('pp-results');
const center = (list.length > 0 && list.length <= 2);
gridEl.classList.toggle('min-h-[240px]', center);
gridEl.classList.toggle('place-content-center', center);
gridEl.classList.toggle('justify-items-center', center);
if (!center) {
  gridEl.classList.remove('min-h-[240px]','place-content-center','justify-items-center');
}



  if (list.length === 0) {
    wrap.innerHTML = '<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">Fayl yoxdur</div>';
    return;
  }

  list.forEach(it=>{
    const card = document.createElement('div');
    card.className = 'group rounded-xl p-[1px] bg-gradient-to-br from-slate-200 to-slate-100';
    card.innerHTML = `
      <div class="rounded-[11px] p-4 bg-white shadow-sm group-hover:shadow-md transition">
        <div class="flex items-start gap-3">
          <div class="h-8 w-8 rounded-lg bg-slate-100 grid place-items-center">ğŸ“„</div>
          <div class="flex-1">
            <div class="text-sm font-medium">${buildTitle(it)}</div>
            <div class="mt-1"><span class="rounded-full bg-slate-100 px-2 py-0.5 text-[10px] border">${(it.ext || 'FILE').toUpperCase()}</span></div>
            <div class="mt-3">
              <a href="${it.dl}"
                 target="_self" rel="noopener"
                 download="${downloadName(it)}"
                 class="rounded-2xl bg-slate-900 text-white px-3 py-1.5 text-sm inline-flex items-center gap-2">â¬‡ï¸ YÃ¼klÉ™</a>
            </div>
          </div>
        </div>
      </div>`;
    wrap.appendChild(card);
  });
}




async function loadAllFromMaterials() {
  try {
    const res = await fetch(FEED_URL, { cache: 'no-store' });
    const catalog = await res.json();
    state.catalog = Array.isArray(catalog) ? catalog : [];
    renderSelects();
    // HeÃ§ nÉ™yi Ã¼stÉ™lÉ™mÉ™ â€” seÃ§im yoxdursa "ZÉ™hmÉ™t olmasa seÃ§im edin" qalsÄ±n
    toggleResults();
  } catch (e) {
    console.error(e);
    // YalnÄ±z seÃ§imlÉ™r doludursa sÉ™hv mesajÄ±nÄ± gÃ¶stÉ™r
    if (allChosenKSQ()) {
      document.getElementById('ksq-results').innerHTML =
        `<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">XÉ™ta: ${e.message}</div>`;
    }
    if (allChosenPP()) {
      document.getElementById('pp-results').innerHTML =
        `<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">XÉ™ta: ${e.message}</div>`;
    }
  }
}


document.addEventListener('DOMContentLoaded', () => {
  renderSelects();
  loadAllFromMaterials();
});
function addPlaceholder(selectEl, label){
  const o = document.createElement('option');
  o.value = "";
  o.textContent = label;
  o.disabled = true;
  o.selected = true;
  o.hidden = true;
  selectEl.appendChild(o);
  selectEl.required = true; // :invalid iÅŸlÉ™sin
}

function allChosenKSQ(){
return !!(state.grade && state.subject && state.ksqType && state.examIndex);
}
function allChosenPP(){
  return !!state.ppSubject;
}

function placeholder(icon, title, subtitle){
  // KartÄ±n daxili 16px paddingini -m-4 ilÉ™ lÉ™ÄŸv edirik ki,
  // placeholder bÃ¼tÃ¼n Ã§É™rÃ§ivÉ™ni EYNÄ° tam É™hatÉ™ etsin.
  // Min hÃ¼ndÃ¼rlÃ¼k YOXDUR â€“ kontent qÉ™dÉ™r olur (avtomatik uyÄŸunlaÅŸÄ±r).
  return `
    <div class="-m-4 rounded-xl overflow-hidden">
      <div class="bg-gradient-to-br from-indigo-500/35 via-fuchsia-500/35 to-amber-500/35">
        <div class="px-6 py-10 sm:py-12 text-center backdrop-blur-sm bg-white/45 dark:bg-slate-900/30">
          <div class="mx-auto mb-2 h-12 w-12 grid place-items-center rounded-full bg-white/40 dark:bg-white/10">${icon}</div>
          <div class="text-base font-semibold">${title}</div>
          <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">${subtitle}</div>
        </div>
      </div>
    </div>`;
}


function toggleResults(){
// KSQ/BSQ
{
  const grid = document.getElementById('ksq-results');
  const empty = document.getElementById('ksq-empty');
  const badgeWrap = document.getElementById('ksq-count-wrap');

  if (allChosenKSQ()){
    renderKSQ();
    empty.classList.add('hidden');
    badgeWrap.classList.remove('hidden');
  } else {
    grid.innerHTML = '';
    document.getElementById('ksq-count').textContent = 0;
    badgeWrap.classList.add('hidden');   // 0 badge gÃ¶rÃ¼nmÉ™sin
    empty.classList.remove('hidden');    // placeholder tam Ã¶rtÃ¼r
  }
}

// PP
{
  const grid = document.getElementById('pp-results');
  const empty = document.getElementById('pp-empty');
  const badgeWrap = document.getElementById('pp-count-wrap');

  if (allChosenPP()){
    renderPP();
    empty.classList.add('hidden');
    badgeWrap.classList.remove('hidden');
  } else {
    grid.innerHTML = '';
    document.getElementById('pp-count').textContent = 0;
    badgeWrap.classList.add('hidden');
    empty.classList.remove('hidden');
  }
}
}








  </script>

</body>
</html>
