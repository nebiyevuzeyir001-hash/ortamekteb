<!doctype html>
<html lang="az" class="scroll-smooth">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-M3CQTM2P');</script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="canonical" href="https://www.eduplan.az/timetable.html" />
  <meta name="keywords" content="DÉ™rs cÉ™dvÉ™linin hazÄ±rlanmasÄ±, DÉ™rs cÉ™dvÉ™li qurmaq Ã¼Ã§Ã¼n proqram, Orta mÉ™ktÉ™blÉ™rdÉ™ dÉ™rs cÉ™dvÉ™li, DÉ™rs cÉ™dvÉ™li proqramÄ±, dÉ™rs cÉ™dvÉ™li qurmaq Ã¼Ã§Ã¼n proqram yÃ¼klÉ™, 
      DÉ™rs cÉ™dvÉ™li hazÄ±rlayÄ±cÄ±, Online DÉ™rs cÉ™dvÉ™li hazÄ±rlayÄ±cÄ±, Onlayn DÉ™rs cÉ™dvÉ™li hazrÄ±layÄ±cÄ±" />
  <meta name="description" content="AzÉ™rbaycan orta mÉ™ktÉ™blÉ™ri Ã¼Ã§Ã¼n onlayn DÉ™rs cÉ™dvÉ™li hazÄ±rlayÄ±cÄ± â€” mÃ¼É™llim, sinif vÉ™ fÉ™nn mÉ™lumatlarÄ±nÄ± daxil edin, sistem avtomatik cÉ™dvÉ™l qursun.">
  <meta name="robots" content="index, follow" />
  <meta name="author" content="EduPlan.az" />
  <meta name="language" content="az" />
  <meta name="format-detection" content="telephone=no" />
  <title>DÉ™rs cÉ™dvÉ™li hazÄ±rlayÄ±cÄ± â€” EduPlan</title>

  <!-- âœ… kalkulyatorla eyni -->
  <meta name="theme-color" content="#f8fafc" id="theme-color" />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="DÉ™rs cÉ™dvÉ™li hazÄ±rlayÄ±cÄ± â€” EduPlan" />
  <meta property="og:description" content="MÃ¼É™llim vÉ™ sinif mÉ™lumatlarÄ±nÄ± daxil edin, sistem avtomatik dÉ™rs cÉ™dvÉ™li hazÄ±rlasÄ±n." />
  <meta property="og:image" content="https://www.eduplan.az/assets/og-image.jpg" />
  <meta property="og:url" content="https://www.eduplan.az/timetable.html" />
  <meta property="og:site_name" content="EduPlan" />

  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="logo.svg">
  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="favicon-48x48.png" sizes="48x48">
  <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="android-chrome-512x512.png" sizes="512x512">
  <link rel="apple-touch-icon" href="apple-touch-icon.png" sizes="180x180">
  <link rel="mask-icon" href="safari-pinned-tab.svg" color="#0ea5e9">
  <link rel="manifest" href="manifest.webmanifest">

  <!-- Tema: FOUC olmasÄ±n (Tailwind-dÉ™n É™vvÉ™l) -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('theme');
        const systemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = (saved === 'dark' || saved === 'light') ? saved : (systemDark ? 'dark' : 'light');

        const root = document.documentElement;
        root.classList.toggle('dark', theme === 'dark');
        root.dataset.theme = theme;

        const meta = document.getElementById('theme-color');
        if (meta) meta.setAttribute('content', theme === 'dark' ? '#0b1220' : '#f8fafc');
      } catch (e) {}
    })();
  </script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>

  <style>
    html, body { overflow-x: hidden; }
    :root { color-scheme: light; }
    html.dark { color-scheme: dark; }
    html { scroll-padding-top: 80px; }

    .ep-btn-primary{ background: linear-gradient(90deg,#1e3a8a 0%,#4f46e5 50%,#9333ea 100%); }
    html.dark .ep-btn-primary{ background: linear-gradient(90deg,#312e81 0%,#4338ca 50%,#7e22ce 100%); }

    /* =========================================================
       âœ… Light/Dark token sistemi (kalkulyatorla eyni hiss)
    ========================================================= */
    :root{
      --ep-field-h: 42px;
      --ep-field-h-sm: 36px;

      --ep-radius-lg: 1rem;
      --ep-radius-sm: .95rem;

      /* ===== Reklam relslÉ™ri ===== */
      --ep-rail-w: clamp(160px, 14vw, 300px);
      --ep-rail-min-h: 600px;
      --ep-rail-gap: 24px;

      /* MÉ™rkÉ™z sÃ¼tunun max eni (reklam olanda) */
      --ep-center-max: 1100px;

      /* Reklam olanda sÉ™hifÉ™nin max eni */
      --ep-shell-max: 1600px;

      /* Header max-w-7xl = 80rem */
      --ep-frame-max: 80rem;

      /* ===== Light mode: layer separation ===== */
      --ep-bg-from: #f8fafc;
      --ep-bg-mid:  #eef2ff;
      --ep-bg-to:   #ecfeff;

      --ep-surface: linear-gradient(180deg, rgba(255,255,255,.86), rgba(238,242,255,.60));
      --ep-surface-2: linear-gradient(180deg, rgba(255,255,255,.84), rgba(241,245,249,.64));

      --ep-border: rgba(79,70,229,.12);
      --ep-panel-border: rgba(79,70,229,.28);

      /* secondary buttons / pills */
      --ep-mode-idle-bg: linear-gradient(180deg, rgba(255,255,255,.88), rgba(238,242,255,.70));
      --ep-mode-idle-border: rgba(79,70,229,.16);
      --ep-mode-hover-bg: linear-gradient(180deg, rgba(255,255,255,.92), rgba(224,231,255,.78));

      --ep-mode-active-bg: linear-gradient(90deg, rgba(30,58,138,.10), rgba(79,70,229,.12), rgba(147,51,234,.10));
      --ep-mode-active-border: rgba(79,70,229,.55);
      --ep-mode-active-shadow: 0 10px 24px rgba(79,70,229,.16), 0 2px 8px rgba(15,23,42,.06);

      --ep-focus: rgba(79,70,229,.28);
    }

    html.dark{
      --ep-bg-from: #020617;
      --ep-bg-mid:  #0b1220;
      --ep-bg-to:   #0f172a;

      --ep-surface: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      --ep-surface-2: linear-gradient(180deg, rgba(255,255,255,.055), rgba(255,255,255,.03));

      --ep-border: rgba(148,163,184,.18);
      --ep-panel-border: rgba(99,102,241,.18);

      --ep-mode-idle-bg: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      --ep-mode-idle-border: rgba(148,163,184,.16);
      --ep-mode-hover-bg: linear-gradient(180deg, rgba(15,23,42,.78), rgba(15,23,42,.62));

      --ep-mode-active-bg: linear-gradient(90deg, rgba(49,46,129,.45), rgba(67,56,202,.40), rgba(126,34,206,.35));
      --ep-mode-active-border: rgba(99,102,241,.55);
      --ep-mode-active-shadow: 0 12px 30px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.06);

      --ep-focus: rgba(99,102,241,.34);
    }

    /* âœ… Tailwind bg-ni override et (kalkulyator kimi) */
    body{
      background-image: linear-gradient(to bottom, var(--ep-bg-from), var(--ep-bg-mid) 45%, var(--ep-bg-to)) !important;
    }

    /* =========================================================
       âœ… Panel + cards (kalkulyator hissi)
    ========================================================= */
    #tt-panel{
      background: var(--ep-surface) !important;
      border-color: var(--ep-panel-border) !important;
      box-shadow: 0 18px 60px rgba(15,23,42,.08);
      overflow: hidden;
    }
    html.dark #tt-panel{ box-shadow: 0 18px 70px rgba(0,0,0,.55); }

    #tt-panel > div:first-child{
      background: linear-gradient(90deg, rgba(79,70,229,.10), rgba(16,185,129,.08), rgba(245,158,11,.08));
    }
    html.dark #tt-panel > div:first-child{
      background: linear-gradient(90deg, rgba(99,102,241,.12), rgba(16,185,129,.09), rgba(245,158,11,.09));
    }

    .ep-card{
      background: var(--ep-surface-2) !important;
      border-color: var(--ep-border) !important;
      box-shadow: 0 12px 34px rgba(15,23,42,.06);
    }
    html.dark .ep-card{ box-shadow: 0 14px 40px rgba(0,0,0,.40); }

    /* =========================================================
       âœ… Secondary buttons (reset/mode kimi)
    ========================================================= */
    .ep-btn-secondary{
      background: var(--ep-mode-idle-bg) !important;
      border-color: var(--ep-mode-idle-border) !important;
      box-shadow: 0 8px 20px rgba(15,23,42,.06);
      transition: transform 160ms ease, box-shadow 160ms ease, background-color 160ms ease, border-color 160ms ease;
    }
    html.dark .ep-btn-secondary{ box-shadow: 0 10px 26px rgba(0,0,0,.35); }

    .ep-btn-secondary:hover{ background: var(--ep-mode-hover-bg) !important; transform: translateY(-1px); }
    .ep-btn-secondary:active{ transform: translateY(0px); }

    .ep-btn-secondary:focus-visible{
      outline: none !important;
      box-shadow: 0 0 0 4px var(--ep-focus), 0 12px 28px rgba(15,23,42,.06) !important;
    }
    html.dark .ep-btn-secondary:focus-visible{
      box-shadow: 0 0 0 4px var(--ep-focus), 0 14px 34px rgba(0,0,0,.45) !important;
    }

    /* ==== Form controls ==== */
    input[type="text"], input[type="number"], select {
      width: 100%;
      border-radius: var(--ep-radius-lg);
      border: 1px solid rgba(226,232,240,.75);
      background-color: rgba(255,255,255,.82);
      padding: .58rem .9rem;
      font-size: 13px;
      line-height: 1.35;
      min-height: var(--ep-field-h);
      outline: none;
      transition: background-color .15s ease, border-color .15s ease, box-shadow .15s ease;
    }

    html.dark input[type="text"], html.dark input[type="number"], html.dark select {
      border-color: rgba(30,41,59,.7);
      background-color: rgba(255,255,255,.05);
      color: rgb(226,232,240);
    }

    input[type="text"]::placeholder, input[type="number"]::placeholder { color: rgb(148,163,184); }

    input[type="text"]:focus, input[type="number"]:focus, select:focus{
      border-color: rgb(99,102,241);
      box-shadow: 0 0 0 3px rgba(99,102,241,.22);
    }

    select{
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding-right: 2.25rem;
      background-repeat: no-repeat;
      background-position: right .75rem center;
      background-size: 1rem 1rem;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M6 8l4 4 4-4' stroke='%23334155' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    }
    html.dark select{
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M6 8l4 4 4-4' stroke='%23cbd5e1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    }

    select option, select optgroup{
      color: #0f172a;
      background-color: #ffffff;
    }

    input[type="checkbox"]{ accent-color: rgb(99,102,241); }

    .section-title{
      font-size:.8rem;
      font-weight:700;
      letter-spacing:.06em;
      text-transform:uppercase;
      color: rgb(100 116 139);
    }
    html.dark .section-title{ color: rgb(148 163 184); }

    /* Config table */
    table.config-table{
      width:100%;
      border-collapse:separate;
      border-spacing:0 8px;
      font-size:.78rem;
    }
    table.config-table th{
      text-align:left;
      font-weight:600;
      color: rgb(100 116 139);
      padding: 4px 6px;
      font-size: .72rem;
      white-space: normal;
      line-height: 1.15;
    }
    html.dark table.config-table th{ color: rgb(148 163 184); }
    table.config-table td{
      padding: 4px 6px;
      vertical-align: top;
      overflow: visible;
    }

    table.config-table input, table.config-table select{
      padding: .44rem .64rem;
      border-radius: var(--ep-radius-sm);
      min-height: var(--ep-field-h-sm);
      font-size: 12.5px;
      line-height: 1.35;
    }

    /* ===== Teacher table ===== */
    #teacherTable{ table-layout: fixed; width: 100%; min-width: 0; }
    #teacherTable th:nth-child(1), #teacherTable td:nth-child(1){ width: 20%; }
    #teacherTable th:nth-child(2), #teacherTable td:nth-child(2){ width: 8%; }
    #teacherTable th:nth-child(3), #teacherTable td:nth-child(3){ width: 10%; }
    #teacherTable th:nth-child(4), #teacherTable td:nth-child(4){ width: 9%; }
    #teacherTable th:nth-child(5), #teacherTable td:nth-child(5){ width: 22%; }
    #teacherTable th:nth-child(6), #teacherTable td:nth-child(6){ width: 26%; }
    #teacherTable th:nth-child(7), #teacherTable td:nth-child(7){ width: 5%; }

    .t-days{
      display:flex;
      flex-wrap:wrap;
      gap: 6px;
      font-size: 11px;
      line-height: 1.2;
    }
    .t-days label{
      display:inline-flex;
      align-items:center;
      gap:4px;
      white-space: nowrap;
    }

    .t-hours{
      display:flex;
      flex-wrap:wrap;
      gap: 6px;
      font-size: 11px;
      line-height: 1.2;
    }
    .t-hours label{
      display:inline-flex;
      align-items:center;
      gap:4px;
      white-space: nowrap;
    }

    .t-mini-actions{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom: 6px;
    }
    .t-mini-btn{
      border: 1px solid rgba(226,232,240,.75);
      background: rgba(255,255,255,.55);
      border-radius: .75rem;
      padding: .18rem .48rem;
      font-size: 11px;
      line-height: 1.2;
      cursor: pointer;
      transition: background-color .12s ease, border-color .12s ease, transform .06s ease;
      user-select:none;
    }
    .t-mini-btn:hover{ background: rgba(255,255,255,.80); }
    .t-mini-btn:active{ transform: translateY(1px); }
    html.dark .t-mini-btn{
      border-color: rgba(30,41,59,.7);
      background: rgba(255,255,255,.04);
      color: rgb(226,232,240);
    }
    html.dark .t-mini-btn:hover{ background: rgba(255,255,255,.07); }

    /* Class / Lesson tables */
    #classTable, #lessonTable{ table-layout: fixed; width:100%; min-width:0; }
    #classTable th:nth-child(1), #classTable td:nth-child(1){ width: 18%; }
    #classTable th:nth-child(2), #classTable td:nth-child(2){ width: 28%; }
    #classTable th:nth-child(3), #classTable td:nth-child(3){ width: 18%; }
    #classTable th:nth-child(4), #classTable td:nth-child(4){ width: 26%; }
    #classTable th:nth-child(5), #classTable td:nth-child(5){ width: 10%; }

    #lessonTable th:nth-child(1), #lessonTable td:nth-child(1){ width: 15%; }
    #lessonTable th:nth-child(2), #lessonTable td:nth-child(2){ width: 28%; }
    #lessonTable th:nth-child(3), #lessonTable td:nth-child(3){ width: 23%; }
    #lessonTable th:nth-child(4), #lessonTable td:nth-child(4){ width: 12%; }
    #lessonTable th:nth-child(5), #lessonTable td:nth-child(5){ width: 6%; }
    #lessonTable th:nth-child(6), #lessonTable td:nth-child(6){ width: 14%; }
    #lessonTable th:nth-child(7), #lessonTable td:nth-child(7){ width: 2%; }

    /* Tabs */
    .tab-btn{
      border-radius: 9999px;
      padding: .3rem .8rem;
      font-size: .78rem;
      border: 1px solid transparent;
      background: transparent;
      cursor: pointer;
      white-space: nowrap;
      transition: background-color .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease;
    }
    .tab-btn:hover{ background: rgba(15,23,42,.04); }
    html.dark .tab-btn:hover{ background: rgba(255,255,255,.06); }

    .tab-btn.active{
      border-color: var(--ep-mode-active-border);
      background: rgba(99,102,241,.10);
      color: rgb(67 56 202);
      font-weight: 600;
      box-shadow: 0 8px 18px rgba(15,23,42,.06);
    }
    html.dark .tab-btn.active{
      background: rgba(129,140,248,.12);
      color: rgb(226 232 240);
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }

    /* Timetable table */
    .tt-table{
      width:100%;
      border-collapse:collapse;
      font-size:.78rem;
      overflow: hidden;
      border-radius: 1rem;
    }
    .tt-table th, .tt-table td{
      border: 1px solid rgba(226,232,240,.75);
      padding: .35rem .45rem;
      text-align:center;
    }
    html.dark .tt-table th, html.dark .tt-table td{
      border-color: rgba(51,65,85,.9);
    }
    .tt-table th{
      background: rgba(148,163,184,.14);
      font-weight: 700;
      font-size: .75rem;
    }
    html.dark .tt-table th{ background: rgba(15,23,42,.7); }

    .tt-slot-muted{ color: rgb(148 163 184); font-style: italic; }
    html.dark .tt-slot-muted{ color: rgb(100 116 139); }

    #unplacedContainer{ white-space: pre-line; }

    /* ===== Premium custom select (dropdown) ===== */
    .ep-native-select{
      position:absolute !important;
      opacity:0 !important;
      pointer-events:none !important;
      width:1px !important;
      height:1px !important;
      left:-9999px !important;
    }

    .ep-select{ position:relative; width:100%; overflow: visible; }
    .ep-select-btn{
      width:100%;
      min-height: var(--ep-field-h);
      border-radius: var(--ep-radius-lg);
      border: 1px solid rgba(226,232,240,.75);
      background: rgba(255,255,255,.70);
      padding: .62rem 1rem;
      font-size: 13px;
      line-height: 1.35;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.75rem;
      cursor:pointer;
      transition: background-color .15s ease, border-color .15s ease, box-shadow .15s ease, transform .08s ease;
    }
    .ep-select-btn:hover{ background: rgba(255,255,255,.82); }
    .ep-select-btn:active{ transform: translateY(1px); }
    .ep-select-btn:focus{
      outline:none;
      border-color: rgb(99,102,241);
      box-shadow: 0 0 0 3px rgba(99,102,241,.22);
    }

    html.dark .ep-select-btn{
      border-color: rgba(30,41,59,.7);
      background: rgba(255,255,255,.05);
      color: rgb(226,232,240);
    }

    .ep-select-sm .ep-select-btn{
      min-height: var(--ep-field-h-sm);
      padding: .48rem .85rem;
      font-size: 12.5px;
      line-height: 1.35;
      border-radius: var(--ep-radius-sm);
    }

    .ep-select-menu{
      position:absolute;
      inset-inline:0;
      top: calc(100% + .35rem);
      z-index: 9999;
      border-radius: 1rem;
      border: 1px solid rgba(226,232,240,.9);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      padding: .35rem;
      box-shadow: 0 18px 55px rgba(2,6,23,.18);
      display:none;
      max-height: 260px;
      overflow:auto;
    }
    html.dark .ep-select-menu{
      border-color: rgba(51,65,85,.9);
      background: rgba(2,6,23,.92);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
    }
    .ep-select.open .ep-select-menu{ display:block; }

    .ep-select-item{
      width:100%;
      border:0;
      background: transparent;
      color: inherit;
      border-radius: .85rem;
      padding: .55rem .75rem;
      font-size: 13px;
      text-align:left;
      cursor:pointer;
      transition: background-color .12s ease;
    }
    .ep-select-sm .ep-select-item{ font-size: 12.5px; padding: .5rem .7rem; }
    .ep-select-item:hover{ background: rgba(99,102,241,.10); }
    html.dark .ep-select-item:hover{ background: rgba(129,140,248,.14); }

    .ep-select-item[aria-selected="true"]{
      background: rgba(99,102,241,.16);
      font-weight: 600;
    }
    html.dark .ep-select-item[aria-selected="true"]{ background: rgba(129,140,248,.18); }

    /* =========================================================
       âœ… PARALLEL LAYOUT (Header ilÉ™ 1:1)
       - Reklam YOX: ep-frame = max-w-7xl + eyni padding
       - Reklam VAR: ep-frame geniÅŸlÉ™nir, shell 3 sÃ¼tun olur
    ========================================================= */
    .ep-frame{
      width: 100%;
      max-width: var(--ep-frame-max);
      margin: 0 auto;
      padding-left: 16px;  /* px-4 */
      padding-right: 16px; /* px-4 */
      transition: max-width .22s ease, padding .22s ease;
    }
    @media (min-width: 640px){ /* sm:px-6 */
      .ep-frame{ padding-left: 24px; padding-right: 24px; }
    }
    @media (min-width: 1024px){ /* lg:px-8 */
      .ep-frame{ padding-left: 32px; padding-right: 32px; }
    }

    .ep-frame.has-ads{
      max-width: var(--ep-shell-max);
    }

    .ep-shell{
      display:grid;
      grid-template-columns: 1fr;
      gap: 0;
      align-items:start;
      width:100%;
    }
    .ep-center{ min-width:0; }

    .ep-ad-slot{
      display:none;
      width: 100%;
      min-height: var(--ep-rail-min-h);
      align-items:flex-start;
      justify-content:center;
      overflow:hidden;

      position: sticky;
      top: 88px;
      height: fit-content;
    }
    .ep-ad-slot > div{ width:100%; max-width: 100%; }

    .ep-shell.has-left-ad,
    .ep-shell.has-right-ad{
      gap: var(--ep-rail-gap);
    }

    .ep-shell.has-left-ad .ep-ad-left{ display:flex; }
    .ep-shell.has-right-ad .ep-ad-right{ display:flex; }

    .ep-shell.has-left-ad.has-right-ad{
      grid-template-columns: minmax(0, var(--ep-rail-w)) minmax(0, var(--ep-center-max)) minmax(0, var(--ep-rail-w));
    }
    .ep-shell.has-left-ad:not(.has-right-ad){
      grid-template-columns: minmax(0, var(--ep-rail-w)) minmax(0, var(--ep-center-max)) 1fr;
    }
    .ep-shell.has-right-ad:not(.has-left-ad){
      grid-template-columns: 1fr minmax(0, var(--ep-center-max)) minmax(0, var(--ep-rail-w));
    }

    /* Laptop/telefon: relslÉ™r gizlÉ™nsin */
    @media (max-width: 1024px){
      .ep-frame.has-ads{ max-width: var(--ep-frame-max); }
      .ep-shell{
        grid-template-columns: 1fr !important;
        gap: 0 !important;
      }
      .ep-ad-slot{ display:none !important; }
    }

    @media (max-width: 900px){
      table.config-table{ font-size: .76rem; }
      table.config-table th{ font-size: .68rem; }
      table.config-table input, table.config-table select{ font-size: 12px; }
      .t-days{ gap: 5px; }
      .t-hours{ gap: 5px; }
    }
  </style>
</head>

<body class="min-h-screen pt-16 text-slate-900 dark:text-slate-100 bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3CQTM2P"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <a href="#main"
     class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-[100] focus:rounded-xl focus:bg-white focus:px-4 focus:py-2 focus:text-slate-900 focus:shadow">
    KontentÉ™ keÃ§
  </a>

  <div class="pointer-events-none fixed inset-0 -z-10 overflow-hidden">
    <div class="absolute -top-24 -right-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-indigo-200/60 to-emerald-200/60 dark:from-indigo-500/15 dark:to-emerald-500/10"></div>
    <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-amber-200/60 to-pink-200/60 dark:from-amber-500/10 dark:to-pink-500/10"></div>
  </div>

  <header class="fixed top-0 inset-x-0 z-50 border-b border-slate-200/70 dark:border-slate-800/70 bg-white/70 dark:bg-slate-950/60 backdrop-blur">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="h-16 flex items-center justify-between gap-3">
        <a href="/" class="flex items-center gap-3 rounded-2xl focus:outline-none focus:ring-2 focus:ring-indigo-400">
          <img src="assets/ep-favicon-light.svg" alt="EduPlan" class="h-9 w-9 dark:hidden" width="36" height="36" />
          <img src="assets/ep-favicon-dark.svg" alt="" aria-hidden="true" class="h-9 w-9 hidden dark:block" width="36" height="36" />
          <span class="font-semibold tracking-tight">EduPlan AZ</span>
        </a>

        <button
          id="theme-toggle"
          type="button"
          class="inline-flex items-center justify-center rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-slate-900/40 p-2 hover:bg-slate-200/70 dark:hover:bg-slate-900/60 transition focus:outline-none focus:ring-2 focus:ring-indigo-400"
          aria-label="Tema dÉ™yiÅŸdir"
          aria-pressed="false"
        >
          <svg class="h-5 w-5 dark:hidden" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="2"/>
            <path d="M12 2v2M12 20v2M4 12H2M22 12h-2M5 5l-1.5-1.5M20.5 20.5 19 19M19 5l1.5-1.5M3.5 20.5 5 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <svg class="h-5 w-5 hidden dark:block" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 13.2A7.5 7.5 0 0 1 10.8 3 6.9 6.9 0 1 0 21 13.2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <main id="main" class="pt-4 pb-0">
    <div class="ep-frame" id="ep-frame">
      <div class="ep-shell" id="ep-shell">

        <!-- SOL reklam slotu -->
        <aside class="ep-ad-slot ep-ad-left no-print" data-ad-slot="left" aria-label="Reklam (sol)">
          <!-- SOL reklam kodu bura -->
        </aside>

        <div class="ep-center">
          <section class="py-6 sm:py-8">
            <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight">DÉ™rs cÉ™dvÉ™li hazÄ±rlayÄ±cÄ±</h1>
            <p class="mt-2 text-slate-600 dark:text-slate-300">
              Orta mÉ™ktÉ™blÉ™r Ã¼Ã§Ã¼n dÉ™rs cÉ™dvÉ™li: mÃ¼É™llim, sinif vÉ™ fÉ™nn mÉ™lumatlarÄ±nÄ± daxil edin, sistem tipik mÉ™hdudiyyÉ™tlÉ™rlÉ™ avtomatik cÉ™dvÉ™l qursun.
            </p>
          </section>

          <!-- âœ… PANEL -->
          <section id="tt-panel" class="rounded-3xl border border-slate-200/70 dark:border-slate-800/70 bg-white/70 dark:bg-white/5 backdrop-blur shadow-sm">
            <div class="px-6 py-4 border-b border-slate-200/70 dark:border-slate-800/70 flex items-center justify-between gap-4">
              <div class="font-semibold">ğŸ§© MÉ™ktÉ™b konfiqurasiyasÄ± vÉ™ hazÄ±rlayÄ±cÄ±</div>
            </div>

            <div class="p-6 space-y-4">

              <!-- 1) MÉ™ktÉ™b parametrlÉ™ri -->
              <div class="ep-card rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 p-4">
                <div class="section-title mb-2">MÉ™ktÉ™b parametrlÉ™ri</div>

                <div class="grid grid-cols-2 gap-3 text-sm">
                  <div>
                    <label class="block text-xs mb-1 text-slate-600 dark:text-slate-300">HÉ™ftÉ™lik iÅŸ gÃ¼nÃ¼</label>
                    <select id="daysCount">
                      <option value="5">5 gÃ¼n (B.eâ€“C.u)</option>
                      <option value="6">6 gÃ¼n (B.eâ€“Å)</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-xs mb-1 text-slate-600 dark:text-slate-300">GÃ¼ndÉ™ dÉ™rs saatÄ± (max)</label>
                    <input id="lessonsPerDay" type="number" min="1" max="8" value="7" />
                  </div>
                </div>

<div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-slate-600 dark:text-slate-300">
  <label class="inline-flex items-start gap-2">
    <input id="optHeavyAvoidEdges" type="checkbox" class="mt-0.5" checked />
    <span>AÄŸÄ±r fÉ™nlÉ™r mÃ¼mkÃ¼n qÉ™dÉ™r 1-ci vÉ™ sonuncu saatda olmasÄ±n</span>
  </label>

  <label class="inline-flex items-start gap-2 md:col-span-2">
    <input id="optNoClassGaps" type="checkbox" class="mt-0.5" checked />
    <span>SiniflÉ™r Ã¼zrÉ™ gÃ¼n É™rzindÉ™ boÅŸ saat olmasÄ±n (dÉ™rslÉ™r 1-ci saatdan ardÄ±cÄ±l olsun)</span>
  </label>
</div>


                <div class="mt-3 text-[11px] text-slate-500 dark:text-slate-400">
                  BÃ¼tÃ¼n siniflÉ™r Ã¼Ã§Ã¼n gÃ¼ndÉ™lik limit standart olaraq <strong>â€œGÃ¼ndÉ™ dÉ™rs saatÄ± (max)â€</strong> qÉ™dÉ™r tÉ™tbiq olunur
                  (sinif cÉ™dvÉ™lindÉ™ ayrÄ±ca dÉ™yiÅŸmÉ™k mÃ¼mkÃ¼ndÃ¼r).
                </div>
              </div>

              <!-- 2) MÃ¼É™llimlÉ™r -->
              <div class="ep-card rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 p-4">
                <div class="flex items-center justify-between mb-2">
                  <div class="section-title">MÃ¼É™llimlÉ™r</div>
                  <button type="button" id="btnAddTeacher"
                          class="ep-btn-secondary no-print inline-flex items-center gap-1 rounded-xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 px-3 py-2 text-xs font-semibold hover:bg-slate-200/70 dark:hover:bg-slate-900/60 transition">
                    â• ÆlavÉ™ et
                  </button>
                </div>

                <div class="text-[11px] text-slate-500 dark:text-slate-400 mb-3">
                  HÉ™r mÃ¼É™llim Ã¼Ã§Ã¼n hÉ™ftÉ™lik vÉ™ gÃ¼ndÉ™lik maksimum saat, uyÄŸun dÉ™rs saatlarÄ± vÉ™ gÉ™lmÉ™ gÃ¼nlÉ™ri.
                </div>

                <table class="config-table" id="teacherTable">
                  <thead>
                    <tr>
                      <th>Ad, soyad</th>
                      <th>Kod</th>
                      <th>HÉ™ftÉ™lik<span class="block">max</span></th>
                      <th>GÃ¼ndÉ™<span class="block">max</span></th>
                      <th>DÉ™rs<span class="block">saatlarÄ±</span></th>
                      <th>GÉ™lmÉ™ gÃ¼nlÉ™ri</th>
                      <th class="no-print"></th>
                    </tr>
                  </thead>
                  <tbody id="teacherTbody"></tbody>
                </table>
              </div>

              <!-- 3) SiniflÉ™r -->
              <div class="ep-card rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 p-4">
                <div class="flex items-center justify-between mb-2">
                  <div class="section-title">SiniflÉ™r</div>
                  <button type="button" id="btnAddClass"
                          class="ep-btn-secondary no-print inline-flex items-center gap-1 rounded-xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 px-3 py-2 text-xs font-semibold hover:bg-slate-200/70 dark:hover:bg-slate-900/60 transition">
                    â• ÆlavÉ™ et
                  </button>
                </div>

                <div class="text-[11px] text-slate-500 dark:text-slate-400 mb-3">
                  SÉ™viyyÉ™ vÉ™ nÃ¶vbÉ™ hazÄ±rda informasiya Ã¼Ã§Ã¼ndÃ¼r. â€œGÃ¼ndÉ™ max dÉ™rsâ€ boÅŸ qalarsa standart limit istifadÉ™ olunur.
                </div>

                <table class="config-table" id="classTable">
                  <thead>
                    <tr>
                      <th>Sinif</th>
                      <th>SÉ™viyyÉ™</th>
                      <th>NÃ¶vbÉ™</th>
                      <th>GÃ¼ndÉ™ max dÉ™rs</th>
                      <th class="no-print"></th>
                    </tr>
                  </thead>
                  <tbody id="classTbody"></tbody>
                </table>
              </div>

              <!-- 4) FÉ™nn / dÉ™rs saatlarÄ± -->
              <div class="ep-card rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 p-4">
                <div class="flex items-center justify-between mb-2">
                  <div class="section-title">FÉ™nn / dÉ™rs saatlarÄ±</div>
                  <button type="button" id="btnAddLesson"
                          class="ep-btn-secondary no-print inline-flex items-center gap-1 rounded-xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 px-3 py-2 text-xs font-semibold hover:bg-slate-200/70 dark:hover:bg-slate-900/60 transition">
                    â• ÆlavÉ™ et
                  </button>
                </div>

                <div class="text-[11px] text-slate-500 dark:text-slate-400 mb-3">
                  HÉ™r sÉ™tir: sinif + fÉ™nn + mÃ¼É™llim + hÉ™ftÉ™lik saat.
                  â€œQoÅŸaâ€: <strong>Yox</strong> seÃ§sÉ™niz eyni fÉ™nn eyni gÃ¼ndÉ™ max 1 dÉ™fÉ™ ola bilÉ™r.
<strong>Ä°mkan daxilindÉ™</strong> seÃ§sÉ™niz hÉ™min fÉ™nn eyni gÃ¼ndÉ™ mÃ¼tlÉ™q 2 dÉ™fÉ™ olmalÄ±dÄ±r (mÃ¼mkÃ¼nsÉ™ ardÄ±cÄ±l, deyilsÉ™ yenÉ™ 2 dÉ™fÉ™).
<strong>MÃ¼tlÉ™q</strong> seÃ§sÉ™niz hÉ™min fÉ™nn eyni gÃ¼ndÉ™ mÃ¼tlÉ™q 2 dÉ™fÉ™ ardÄ±cÄ±l olmalÄ±dÄ±r.

                </div>

                <table class="config-table" id="lessonTable">
                  <thead>
                    <tr>
                      <th>Sinif</th>
                      <th>FÉ™nn</th>
                      <th>MÃ¼É™llim kodu/adÄ±</th>
                      <th>HÉ™ftÉ™lik saat</th>
                      <th>AÄŸÄ±r?</th>
                      <th>QoÅŸa</th>
                      <th class="no-print"></th>
                    </tr>
                  </thead>
                  <tbody id="lessonTbody"></tbody>
                </table>
              </div>

              <!-- 5) HazÄ±rlayÄ±cÄ± -->
              <div class="ep-card rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 p-4 no-print">
                <div class="section-title mb-2">HazÄ±rlayÄ±cÄ±</div>

                <div class="space-y-1.5 text-xs text-slate-600 dark:text-slate-300 mb-4">
                  <p>1) MÃ¼É™llim, sinif vÉ™ fÉ™nn mÉ™lumatlarÄ±nÄ± doldurun.</p>
                  <p>2) â€œCÉ™dvÉ™li qurâ€ dÃ¼ymÉ™sini sÄ±xÄ±n â€” sistem tam hÉ™ll tapana qÉ™dÉ™r fÉ™rqli kombinasiyalar sÄ±nayacaq.</p>
                  <p class="text-[11px] text-slate-500 dark:text-slate-400">
                    Proses zamanÄ± dÃ¼ymÉ™ â€œğŸ›‘ DayandÄ±râ€ olur â€” istÉ™sÉ™niz axtarÄ±ÅŸÄ± istÉ™nilÉ™n vaxt dayandÄ±ra bilÉ™rsiniz.
                  </p>
                </div>

                <div class="flex flex-wrap gap-2">
                  <button id="btnGenerate"
                          class="ep-btn-primary inline-flex items-center justify-center rounded-2xl px-4 py-3 text-sm font-semibold text-white shadow-sm hover:brightness-110 transition">
                    âš™ï¸ CÉ™dvÉ™li qur
                  </button>

                  <button id="btnResetAll"
                          class="ep-btn-secondary inline-flex items-center justify-center rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 px-4 py-3 text-xs font-semibold hover:bg-slate-200/70 dark:hover:bg-slate-900/60 transition">
                    ğŸ§¹ HamÄ±sÄ±nÄ± tÉ™mizlÉ™
                  </button>
                </div>

                <!-- âœ… styled error -->
                <div id="globalError"
                     class="hidden mt-3 rounded-2xl border border-rose-200/70 dark:border-rose-900/40 bg-rose-50/70 dark:bg-rose-950/25 px-4 py-3 text-xs text-rose-700 dark:text-rose-300"
                     role="alert" aria-live="polite" tabindex="-1"></div>

                <div id="globalInfo" class="mt-2 text-[11px] text-slate-500 dark:text-slate-400"></div>
              </div>

              <!-- 6) NÉ™ticÉ™ -->
              <div class="ep-card rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/60 dark:bg-white/5 p-4 min-h-[260px]" id="resultCard">
                <div class="flex items-center justify-between mb-3">
                  <div class="section-title">NÉ™ticÉ™</div>
                  <div id="resultStats" class="text-[11px] text-slate-500 dark:text-slate-400"></div>
                </div>

                <div id="classTabs" class="flex flex-wrap gap-1 mb-3 text-xs no-print"></div>

                <div id="timetableContainer" class="overflow-x-auto text-xs">
                  <div class="text-[12px] text-slate-500 dark:text-slate-400">
                    HÉ™lÉ™ cÉ™dvÉ™l qurulmayÄ±b. MÉ™lumatlarÄ± daxil etdikdÉ™n sonra <strong>â€œCÉ™dvÉ™li qurâ€</strong> dÃ¼ymÉ™sini sÄ±xÄ±n.
                  </div>
                </div>

                <div id="unplacedContainer" class="mt-3 text-[11px] text-amber-600 dark:text-amber-400 hidden"></div>
                <div id="softWarnings" class="mt-2 text-[11px] text-slate-500 dark:text-slate-400"></div>
              </div>

            </div>
          </section>

          <!-- âœ… MÆLUMAT (kullanÄ±cÄ± klavuzu) -->
          <section class="ep-card mt-10 rounded-3xl border border-slate-200/70 dark:border-slate-800/70 bg-white/70 dark:bg-white/5 backdrop-blur p-6 sm:p-10 shadow-sm">
            <h2 class="text-2xl sm:text-3xl font-semibold">MÉ™lumat</h2>

            <div class="mt-5 space-y-6 text-base leading-7 text-slate-700 dark:text-slate-200">
              <p>
                Bu sÉ™hifÉ™dÉ™ki <strong>â€œğŸ§© MÉ™ktÉ™b konfiqurasiyasÄ± vÉ™ hazÄ±rlayÄ±cÄ±â€</strong> bloku
                dÉ™rs cÉ™dvÉ™lini <strong>tamamilÉ™ brauzerdÉ™</strong> qurmaq Ã¼Ã§Ã¼n hazÄ±rlanÄ±b:
                siz mÃ¼É™llim/sinif/fÉ™nn mÉ™lumatlarÄ±nÄ± daxil edirsiniz, sistem isÉ™ konfliktlÉ™ri minimuma endirÉ™rÉ™k
                cÉ™dvÉ™li avtomatik yÄ±ÄŸmaÄŸa Ã§alÄ±ÅŸÄ±r.
              </p>

              <div class="ep-card rounded-2xl border border-slate-200/60 dark:border-slate-800/60 bg-white/60 dark:bg-white/5 p-4">
                <div class="font-semibold text-slate-900 dark:text-slate-100">Ä°ÅŸ prinsipi (qÄ±sa axÄ±n)</div>
                <ol class="mt-2 list-decimal pl-6 space-y-1">
                  <li><strong>MÉ™ktÉ™b parametrlÉ™ri</strong> â€” hÉ™ftÉ™ gÃ¼nÃ¼ sayÄ± vÉ™ gÃ¼ndÉ™ maksimum saatÄ± seÃ§in.</li>
                  <li><strong>MÃ¼É™llimlÉ™r</strong> â€” hÉ™r mÃ¼É™llimin limitlÉ™rini, uyÄŸun saatlarÄ± vÉ™ gÉ™lmÉ™ gÃ¼nlÉ™rini yazÄ±n.</li>
                  <li><strong>SiniflÉ™r</strong> â€” sinif siyahÄ±sÄ±nÄ± (sÉ™viyyÉ™, nÃ¶vbÉ™, gÃ¼ndÉ™ limit) daxil edin.</li>
                  <li><strong>FÉ™nn / dÉ™rs saatlarÄ±</strong> â€” â€œsinif + fÉ™nn + mÃ¼É™llim + hÉ™ftÉ™lik saatâ€ sÉ™tirlÉ™rini É™lavÉ™ edin.</li>
                  <li><strong>âš™ï¸ CÉ™dvÉ™li qur</strong> â€” sistem <strong>tam hÉ™ll tapÄ±lanadÉ™k</strong> fÉ™rqli kombinasiyalar sÄ±nayÄ±r.</li>
                  <li><strong>NÉ™ticÉ™</strong> â€” sinif tablarÄ±nÄ± dÉ™yiÅŸÉ™rÉ™k cÉ™dvÉ™li yoxlayÄ±n, lazÄ±m olsa parametrlÉ™ri dÃ¼zÉ™ldin vÉ™ yenidÉ™n qurun.</li>
                </ol>

                <p class="mt-3 text-sm text-slate-600 dark:text-slate-300">
                  Proses zamanÄ± ekranda <strong>cÉ™hd sayÄ±</strong> vÉ™ <strong>É™n yaxÅŸÄ± tapÄ±lan nÉ™ticÉ™</strong> (faizlÉ™) gÃ¶stÉ™rilir.
                  Ä°stÉ™sÉ™niz <strong>ğŸ›‘ DayandÄ±r</strong> dÃ¼ymÉ™si ilÉ™ axtarÄ±ÅŸÄ± dayandÄ±rÄ±b hÉ™min â€œÉ™n yaxÅŸÄ±â€ nÉ™ticÉ™yÉ™ baxa bilÉ™rsiniz.
                </p>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">1) MÉ™ktÉ™b parametrlÉ™ri nÉ™ edir?</h3>
                <ul class="mt-2 list-disc pl-6 space-y-1">
                  <li>
                    <strong>HÉ™ftÉ™lik iÅŸ gÃ¼nÃ¼ (5/6)</strong> cÉ™dvÉ™lin sÃ¼tun sayÄ±nÄ± mÃ¼É™yyÉ™n edir:
                    5 gÃ¼n seÃ§É™ndÉ™ <em>ÅÉ™nbÉ™</em> (Å) gizlÉ™nir vÉ™ mÃ¼É™llimlÉ™rin â€œÅâ€ gÃ¼nÃ¼ avtomatik deaktiv edilir.
                  </li>
                  <li>
                    <strong>GÃ¼ndÉ™ dÉ™rs saatÄ± (max)</strong> hÉ™r sinif Ã¼Ã§Ã¼n matrisin (gÃ¼n Ã— saat) Ã¶lÃ§Ã¼sÃ¼nÃ¼ tÉ™yin edir.
                    MÉ™sÉ™lÉ™n 7 seÃ§sÉ™niz, hÉ™r gÃ¼n 1â€“7 saat aralÄ±ÄŸÄ± yaranÄ±r.
                  </li>
                  <li>
                    <strong>AÄŸÄ±r fÉ™nlÉ™r mÃ¼mkÃ¼n qÉ™dÉ™r 1-ci/sonuncu saatda olmasÄ±n</strong> â€” bu seÃ§im aktivdirsÉ™,
                    â€œAÄŸÄ±r?â€ iÅŸarÉ™lÉ™diyiniz dÉ™rslÉ™r mÃ¼mkÃ¼n olduqca 1-ci vÉ™ sonuncu saata salÄ±nmÄ±r (optimallaÅŸdÄ±rma).
                  </li>
                  <li>
                    <strong>Eyni gÃ¼ndÉ™ eyni fÉ™nn maksimum 2 dÉ™fÉ™ tÉ™krarlansÄ±n</strong> â€” aktivdirsÉ™,
                    bir sinifdÉ™ eyni fÉ™nnin bir gÃ¼ndÉ™ toplamÄ± <strong>2 saatdan Ã§ox</strong> ola bilmÉ™z (qayda kimi tÉ™tbiq olunur).
                  </li>
                  <li>
                    <strong>SiniflÉ™r Ã¼zrÉ™ gÃ¼n É™rzindÉ™ boÅŸ saat olmasÄ±n</strong> â€” aktivdirsÉ™,
                    sinifdÉ™ dÉ™rslÉ™r gÃ¼n É™rzindÉ™ <strong>1-ci saatdan baÅŸlayÄ±b ardÄ±cÄ±l</strong> gedir, arada boÅŸluq yaranmÄ±r (qayda kimi tÉ™tbiq olunur).
                  </li>
                </ul>

                <p class="mt-3 text-sm text-slate-600 dark:text-slate-300">
                  Qeyd: â€œAÄŸÄ±r fÉ™nn kÉ™nar saat olmasÄ±nâ€ optimallaÅŸdÄ±rmadÄ±r.
                  DigÉ™r seÃ§imlÉ™r (mÃ¼É™llim gÃ¼n/saat uyÄŸunluÄŸu, eyni fÉ™nnin gÃ¼ndÉ™ max 2, boÅŸ saat olmamasÄ±, QoÅŸa=MÃ¼tlÉ™q) qayda kimi tÉ™tbiq olunur vÉ™ pozulmur.
                </p>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">2) MÃ¼É™llimlÉ™r bÃ¶lmÉ™si necÉ™ istifadÉ™ olunur?</h3>

                <ul class="mt-2 list-disc pl-6 space-y-1">
                  <li>
                    <strong>Ad, soyad</strong> vÉ™ <strong>Kod</strong>:
                    â€œFÉ™nn / dÉ™rs saatlarÄ±â€ bÃ¶lmÉ™sindÉ™ mÃ¼É™llimi tapmaq Ã¼Ã§Ã¼n sistem mÃ¼É™llimi <strong>kodla vÉ™ ya adla</strong> uyÄŸunlaÅŸdÄ±rÄ±r.
                    Praktik Ã¼sul: hÉ™r mÃ¼É™llimÉ™ qÄ±sa kod verin (mÉ™s: <code class="px-1 rounded bg-slate-100/80 dark:bg-white/10">Ä°SF</code>).
                  </li>
                  <li>
                    <strong>HÉ™ftÉ™lik max</strong> vÉ™ <strong>GÃ¼ndÉ™ max</strong>: mÃ¼É™llimin hÉ™ftÉ™lik/gÃ¼ndÉ™lik dÉ™rs limitidir.
                    <strong>0</strong> yazÄ±lsa (vÉ™ ya boÅŸ qalsa) sistem bunu â€œlimitsizâ€ kimi qÉ™bul edir.
                  </li>
                  <li>
                    <strong>DÉ™rs saatlarÄ±</strong>:
                    mÃ¼É™llimin dÉ™rsinin <strong>hansÄ± saatlarda</strong> ola bilÉ™cÉ™yini gÃ¶stÉ™rir.
                    HeÃ§ nÉ™ seÃ§mÉ™sÉ™niz sistem standart olaraq <strong>bÃ¼tÃ¼n saatlarÄ±</strong> uyÄŸun sayÄ±r.
                    Bu seÃ§im <strong>qayda kimidir</strong> vÉ™ pozulmur.
                  </li>
                  <li>
                    <strong>GÉ™lmÉ™ gÃ¼nlÉ™ri</strong>:
                    mÃ¼É™llimin dÉ™rsinin hansÄ± gÃ¼nlÉ™rdÉ™ ola bilÉ™cÉ™yini gÃ¶stÉ™rir. HeÃ§ nÉ™ seÃ§mÉ™sÉ™niz,
                    sistem <strong>hamÄ± gÃ¼nlÉ™r</strong> kimi qÉ™bul edir.
                    Vacib: â€œgÉ™lmÉ™ gÃ¼nlÉ™riâ€ <strong>qayda kimidir</strong> â€” pozulmur.
                  </li>
                </ul>

                <div class="mt-3 rounded-xl border border-amber-200/70 dark:border-amber-500/30 bg-amber-50/70 dark:bg-amber-500/10 p-3 text-sm">
                  <div class="font-semibold text-amber-900 dark:text-amber-200">DiqqÉ™t (uyÄŸunlaÅŸdÄ±rma)</div>
                  <p class="mt-1">
                    â€œFÉ™nn / dÉ™rs saatlarÄ±â€ bÃ¶lmÉ™sindÉ™ mÃ¼É™llimi <strong>kod vÉ™ ya ad</strong> ilÉ™ yazanda,
                    bu dÉ™yÉ™r mÃ¼É™llim cÉ™dvÉ™lindÉ™ki kod/ad ilÉ™ <strong>eyni yazÄ±lÄ±ÅŸda</strong> olmalÄ±dÄ±r
                    (sistem yalnÄ±z boÅŸluqlarÄ± kÉ™sir).
                    MÉ™sÉ™lÉ™n <code class="px-1 rounded bg-white/60 dark:bg-white/10">FÄ°R</code> ilÉ™
                    <code class="px-1 rounded bg-white/60 dark:bg-white/10">fir</code> fÉ™rqli sayÄ±lÄ±r.
                  </p>
                </div>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">3) SiniflÉ™r bÃ¶lmÉ™si necÉ™ iÅŸlÉ™yir?</h3>

                <ul class="mt-2 list-disc pl-6 space-y-1">
                  <li>
                    <strong>Sinif</strong> (mÉ™s: 5A) â€” â€œFÉ™nn / dÉ™rs saatlarÄ±â€ sÉ™tirlÉ™rindÉ™ dÉ™ eyni adla yazÄ±lmalÄ±dÄ±r.
                  </li>
                  <li>
                    <strong>GÃ¼ndÉ™ max dÉ™rs</strong> boÅŸ qalarsa standart limit kimi <strong>â€œGÃ¼ndÉ™ dÉ™rs saatÄ± (max)â€</strong> tÉ™tbiq olunur.
                    ÆgÉ™r rÉ™qÉ™m yazsanÄ±z, hÉ™min sinif Ã¼Ã§Ã¼n gÃ¼ndÉ™lik limit ayrÄ±ca tÉ™yin olunur.
                  </li>
                  <li>
                    <strong>NÃ¶vbÉ™</strong> (SÉ™hÉ™r/GÃ¼norta) hazÄ±rda <strong>informasiya Ã¼Ã§Ã¼ndÃ¼r</strong> â€” alqoritm nÃ¶vbÉ™yÉ™ gÃ¶rÉ™ ayrÄ±ca mÉ™hdudiyyÉ™t tÉ™tbiq etmir.
                  </li>
                </ul>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">4) FÉ™nn / dÉ™rs saatlarÄ±: É™n vacib hissÉ™</h3>

                <p class="mt-2">
                  Bu cÉ™dvÉ™ldÉ™ki hÉ™r sÉ™tir bir â€œtÉ™dris tapÅŸÄ±rÄ±ÄŸÄ±dÄ±râ€:
                  <strong>hansÄ± sinifÉ™</strong>, <strong>hansÄ± fÉ™nn</strong>, <strong>hansÄ± mÃ¼É™llim</strong> vÉ™
                  <strong>hÉ™ftÉ™dÉ™ neÃ§É™ saat</strong>.
                </p>

                <ul class="mt-3 list-disc pl-6 space-y-1">
                  <li>
                    <strong>HÉ™ftÉ™lik saat</strong> daxil etdikdÉ™ sistem bunu â€œbloklaraâ€ parÃ§alayÄ±r vÉ™ yerlÉ™ÅŸdirir.
                  </li>
                  <li>
                    <strong>QoÅŸa</strong> rejimi:
                    <ul class="list-disc pl-6 mt-1 space-y-1">
                      <li><strong>Yox</strong> â†’ normal yerlÉ™ÅŸdirmÉ™.</li>
                      <li><strong>Ä°mkan daxilindÉ™</strong> â†’ 2 saatlÄ±q bloklarÄ± ardÄ±cÄ±l yerlÉ™ÅŸdirmÉ™yÉ™ Ã§alÄ±ÅŸÄ±r, alÄ±nmasa bÃ¶lÉ™ bilÉ™r.</li>
                      <li><strong>MÃ¼tlÉ™q</strong> â†’ 2 saatlÄ±q bloklar mÃ¼tlÉ™q ardÄ±cÄ±l olmalÄ±dÄ±r (pozulmur).</li>
                    </ul>
                  </li>
                  <li>
                    <strong>AÄŸÄ±r?</strong> seÃ§ilibsÉ™:
                    â€œAÄŸÄ±r fÉ™nlÉ™r 1-ci/sonuncu saatda olmasÄ±nâ€ parametri aktiv olanda
                    sistem É™vvÉ™lcÉ™ aÄŸÄ±r fÉ™nni 1-ci/sonuncu saata salmamaÄŸa Ã§alÄ±ÅŸÄ±r.
                  </li>
                </ul>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">5) â€œCÉ™dvÉ™li qurâ€ dÃ¼ymÉ™si arxada nÉ™ edir?</h3>

                <ul class="mt-2 list-disc pl-6 space-y-1">
                  <li>
                    Sistem â€œdÉ™rs bloklarÄ±nÄ±â€ mÃ¼xtÉ™lif ardÄ±cÄ±llÄ±qlarda vÉ™ slot kombinasiyalarÄ±nda yerlÉ™ÅŸdirmÉ™yÉ™ Ã§alÄ±ÅŸÄ±r.
                  </li>
                  <li>
                    <strong>Qayda kimi tÉ™tbiq olunan mÉ™hdudiyyÉ™tlÉ™r</strong> (mÃ¼É™llim konfliktlÉ™ri, gÉ™lmÉ™ gÃ¼nlÉ™ri, mÃ¼É™llim saat seÃ§imi, limitlÉ™r, sinif tutumu, eyni fÉ™nnin gÃ¼ndÉ™ max 2, boÅŸ saat olmamasÄ±, QoÅŸa=MÃ¼tlÉ™q) pozulmur.
                  </li>
                  <li>
                    <strong>OptimallaÅŸdÄ±rmalar</strong> (aÄŸÄ±r fÉ™nnin kÉ™nar saatlara dÃ¼ÅŸmÉ™mÉ™si, QoÅŸa=Ä°mkan daxilindÉ™ ardÄ±cÄ±llÄ±q) mÃ¼mkÃ¼n olduqca qorunur.
                  </li>
                  <li>
                    Tam hÉ™ll tapÄ±lanadÉ™k axtarÄ±ÅŸ davam edir. Konfiqurasiya hÉ™qiqÉ™tÉ™n mÃ¼mkÃ¼nsÃ¼zdÃ¼rsÉ™ axtarÄ±ÅŸ da uzana bilÉ™r â€”
                    bu halda <strong>ğŸ›‘ DayandÄ±r</strong> dÃ¼ymÉ™si ilÉ™ prosesi dayandÄ±rÄ±b É™n yaxÅŸÄ± tapÄ±lmÄ±ÅŸ nÉ™ticÉ™ni gÃ¶rÉ™ bilÉ™rsiniz.
                  </li>
                </ul>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Tez-tez rast gÉ™linÉ™n problemlÉ™r vÉ™ hÉ™ll yollarÄ±</h3>
                <ul class="mt-2 list-disc pl-6 space-y-1">
                  <li>
                    <strong>â€œSinif/mÃ¼É™llim tapÄ±lmadÄ±â€ xÉ™tasÄ±</strong> â†’
                    sinif adlarÄ±nÄ± vÉ™ mÃ¼É™llim kod/adÄ±nÄ± bÃ¼tÃ¼n yerlÉ™rdÉ™ eyni yazÄ±n.
                  </li>
                  <li>
                    <strong>Ã‡ox â€œYerlÉ™ÅŸdirilmÉ™yÉ™nlÉ™râ€ Ã§Ä±xÄ±r</strong> â†’
                    sinif/mÃ¼É™llim limitlÉ™rini yoxlayÄ±n, sinif tutumunu artÄ±rÄ±n (gÃ¼ndÉ™ max), mÃ¼É™llim gÉ™lmÉ™ gÃ¼nlÉ™rini vÉ™ uyÄŸun saatlarÄ± geniÅŸlÉ™ndirin.
                  </li>
                  <li>
                    <strong>AxtarÄ±ÅŸ Ã§ox uzanÄ±r</strong> â†’
                    Ã§ox vaxt bu ya konfiqurasiyanÄ±n mÃ¼mkÃ¼nsÃ¼z olmasÄ±na, ya da limitlÉ™rin hÉ™ddÉ™n artÄ±q sÉ™rt olmasÄ±na iÅŸarÉ™ edir.
                  </li>
                </ul>
              </div>

              <p class="text-sm text-slate-600 dark:text-slate-300">
                Qeyd: Bu alqoritm brauzerdÉ™ iÅŸlÉ™yir vÉ™ â€œtam hÉ™ll tapÄ±lanadÉ™kâ€ axtarÄ±ÅŸ aparÄ±r. Real mÉ™ktÉ™b cÉ™dvÉ™llÉ™rindÉ™ É™n stabil nÉ™ticÉ™ Ã¼Ã§Ã¼n
                kod/ad uyÄŸunluÄŸunu qorumaq vÉ™ limitlÉ™ri realist qurmaq É™n vacibdir.
              </p>
            </div>
          </section>

        </div>

        <!-- SAÄ reklam slotu -->
        <aside class="ep-ad-slot ep-ad-right no-print" data-ad-slot="right" aria-label="Reklam (saÄŸ)">
          <!-- SAÄ reklam kodu bura -->
        </aside>

      </div>
    </div>
  </main>

  <footer class="mt-10 border-t border-slate-200/70 dark:border-slate-800/70">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 flex flex-col sm:flex-row gap-4 items-center justify-between text-sm text-slate-600 dark:text-slate-300">
      <div>
        Â© <span id="year"></span> <span class="font-semibold text-slate-900 dark:text-slate-100">EduPlan AZ</span> Â· BÃ¼tÃ¼n hÃ¼quqlar qorunur
      </div>

      <nav class="flex flex-wrap items-center justify-center gap-x-5 gap-y-2">
        <a class="hover:underline underline-offset-4" href="/about.html">HaqqÄ±mÄ±zda</a>
        <a class="hover:underline underline-offset-4" href="/contact.html">ÆlaqÉ™</a>
        <a class="hover:underline underline-offset-4" href="/terms.html">ÅÉ™rtlÉ™r</a>
        <a class="hover:underline underline-offset-4" href="/privacy.html">MÉ™xfilik</a>
      </nav>
    </div>
  </footer>

  <script>
    (function () {
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      const btn = document.getElementById('theme-toggle');
      const meta = document.getElementById('theme-color');
      const mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');

      const hasUserPref = () => {
        try { return !!localStorage.getItem('theme'); } catch (e) { return false; }
      };

      const getTheme = () => (document.documentElement.classList.contains('dark') ? 'dark' : 'light');

      function applyTheme(theme, persist) {
        const isDark = theme === 'dark';
        document.documentElement.classList.toggle('dark', isDark);
        document.documentElement.dataset.theme = theme;

        if (btn) btn.setAttribute('aria-pressed', isDark ? 'true' : 'false');
        if (meta) meta.setAttribute('content', isDark ? '#0b1220' : '#f8fafc');

        if (persist) {
          try { localStorage.setItem('theme', theme); } catch (e) {}
        }
      }

      applyTheme(getTheme(), false);

      btn && btn.addEventListener('click', function () {
        const next = (getTheme() === 'dark') ? 'light' : 'dark';
        applyTheme(next, true);
      });

      const onSystemChange = function (e) {
        if (!hasUserPref()) applyTheme(e.matches ? 'dark' : 'light', false);
      };

      if (mq) {
        if (mq.addEventListener) mq.addEventListener('change', onSystemChange);
        else if (mq.addListener) mq.addListener(onSystemChange);
      }
    })();
  </script>

  <!-- âœ… Reklam gÉ™lsÉ™: avtomatik 3 sÃ¼tun + frame geniÅŸlÉ™nir -->
  <script>
    (function () {
      const frame = document.getElementById('ep-frame');
      const shell = document.getElementById('ep-shell');
      if (!frame || !shell) return;

      const left  = shell.querySelector('[data-ad-slot="left"]');
      const right = shell.querySelector('[data-ad-slot="right"]');

      const hasContent = (el) => {
        if (!el) return false;
        return Array.from(el.childNodes).some(n => {
          if (n.nodeType === Node.ELEMENT_NODE) return true;
          if (n.nodeType === Node.TEXT_NODE) return n.textContent.trim().length > 0;
          return false;
        });
      };

      const update = () => {
        const hasLeft = hasContent(left);
        const hasRight = hasContent(right);

        shell.classList.toggle('has-left-ad', hasLeft);
        shell.classList.toggle('has-right-ad', hasRight);

        const hasAds = hasLeft || hasRight;
        frame.classList.toggle('has-ads', hasAds);
      };

      update();

      const obs = new MutationObserver(update);
      if (left)  obs.observe(left,  { childList: true, subtree: true });
      if (right) obs.observe(right, { childList: true, subtree: true });
    })();
  </script>

  <!-- Timetable logic (PRO + "boÅŸ saat olmasÄ±n") -->
  <script>
    (function () {
      const teacherTbody = document.getElementById('teacherTbody');
      const classTbody = document.getElementById('classTbody');
      const lessonTbody = document.getElementById('lessonTbody');

      const btnAddTeacher = document.getElementById('btnAddTeacher');
      const btnAddClass = document.getElementById('btnAddClass');
      const btnAddLesson = document.getElementById('btnAddLesson');

      const btnGenerate = document.getElementById('btnGenerate');
      const btnResetAll = document.getElementById('btnResetAll');

      const globalError = document.getElementById('globalError');
      const globalInfo  = document.getElementById('globalInfo');

      const resultStats = document.getElementById('resultStats');
      const timetableContainer = document.getElementById('timetableContainer');
      const unplacedContainer = document.getElementById('unplacedContainer');
      const softWarnings = document.getElementById('softWarnings');
      const classTabs = document.getElementById('classTabs');

      const daysCountSelect = document.getElementById('daysCount');
      const lessonsPerDayInput = document.getElementById('lessonsPerDay');

      const DAYS_LABELS_5 = ['B.e','Ã‡.a','Ã‡','C','C.u'];
      const DAYS_LABELS_6 = ['B.e','Ã‡.a','Ã‡','C','C.u','Å'];
      const DAY_LABELS_FULL = ['B.e','Ã‡.a','Ã‡','C','C.u','Å'];
      const HOUR_LABELS_FULL = ['1','2','3','4','5','6','7','8'];

      const __epSelectInstances = new Set();

      const GENERATE_LABEL = 'âš™ï¸ CÉ™dvÉ™li qur';
      const STOP_LABEL = 'ğŸ›‘ DayandÄ±r';

      let __solverRunning = false;
      let __stopRequested = false;
      let __runId = 0;

      // ===== âœ… nÉ™ticÉ™ Ã§Ä±xanda scroll (stabil) =====
      const prefersReduceMotion = () => {
        try { return window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches; }
        catch (e) { return false; }
      };

      function getViewportHeight() {
        return window.visualViewport ? window.visualViewport.height : window.innerHeight;
      }
      function getHeaderHeight() {
        return document.querySelector('header')?.offsetHeight || 0;
      }
      function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }
      function pageRect(el) {
        const r = el.getBoundingClientRect();
        const y = window.pageYOffset || document.documentElement.scrollTop || 0;
        return { top: r.top + y, bottom: r.bottom + y, height: r.height };
      }
      function safeBand(opts = {}) {
        const topGap = opts.topGap ?? 18;
        const bottomGap = opts.bottomGap ?? 16;
        const y = window.pageYOffset || document.documentElement.scrollTop || 0;
        const vh = getViewportHeight();
        const top = y + getHeaderHeight() + topGap;
        const bottom = y + vh - bottomGap;
        return { top, bottom, vh, y, topGap, bottomGap };
      }
      function isInSafeZone(el, opts = {}) {
        if (!el) return true;
        const band = safeBand(opts);
        const r = pageRect(el);
        if (r.height > (band.bottom - band.top)) return r.top >= band.top && r.top <= band.bottom;
        return r.top >= band.top && r.bottom <= band.bottom;
      }
      function scrollToY(targetY, behavior) {
        const se = document.scrollingElement || document.documentElement;
        const maxY = Math.max(0, se.scrollHeight - (window.innerHeight || 0));
        const y = clamp(targetY, 0, maxY);
        window.scrollTo({ top: y, left: 0, behavior });
      }
      function ensureVisible(el, opts = {}) {
        if (!el) return;
        if (isInSafeZone(el, opts)) return;
        const behavior = prefersReduceMotion() ? 'auto' : (opts.behavior ?? 'smooth');
        const band = safeBand(opts);
        const r = pageRect(el);

        let targetY = band.y;
        if (r.top < band.top) targetY = r.top - (getHeaderHeight() + (opts.topGap ?? 18));
        else if (r.bottom > band.bottom) targetY = r.bottom - band.vh + (opts.bottomGap ?? 16);

        scrollToY(targetY, behavior);
      }
      function ensureVisibleStable(el, opts = {}) {
        if (!el) return;
        const run = () => ensureVisible(el, opts);
        requestAnimationFrame(() => requestAnimationFrame(run));
        window.setTimeout(run, 120);
        window.setTimeout(run, 260);

        const vv = window.visualViewport;
        if (vv) {
          let active = true;
          const onVV = () => { if (active) run(); };
          vv.addEventListener('resize', onVV);
          vv.addEventListener('scroll', onVV);
          window.setTimeout(() => {
            active = false;
            vv.removeEventListener('resize', onVV);
            vv.removeEventListener('scroll', onVV);
          }, 420);
        }
      }

      function makePrettySelect(selectEl, opts = {}) {
        if (!selectEl || selectEl.dataset.epPrettySelect === '1') return;

        const size = opts.size === 'sm' ? 'sm' : 'md';

        const wrap = document.createElement('div');
        wrap.className = 'ep-select' + (size === 'sm' ? ' ep-select-sm' : '');

        selectEl.parentNode.insertBefore(wrap, selectEl);
        wrap.appendChild(selectEl);

        selectEl.classList.add('ep-native-select');
        selectEl.dataset.epPrettySelect = '1';

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'ep-select-btn';
        btn.setAttribute('aria-haspopup', 'listbox');
        btn.setAttribute('aria-expanded', 'false');

        const menu = document.createElement('div');
        menu.className = 'ep-select-menu';
        menu.setAttribute('role', 'listbox');

        wrap.appendChild(btn);
        wrap.appendChild(menu);

        function close() {
          wrap.classList.remove('open');
          btn.setAttribute('aria-expanded', 'false');
        }
        function open() {
          __epSelectInstances.forEach(inst => { if (inst !== api) inst.close(); });
          wrap.classList.add('open');
          btn.setAttribute('aria-expanded', 'true');
        }
        function toggle() { wrap.classList.contains('open') ? close() : open(); }

        function render() {
          const selected = selectEl.options[selectEl.selectedIndex];
          const label = selected ? selected.textContent : '';

          btn.innerHTML = `
            <span style="min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${label}</span>
            <svg width="18" height="18" viewBox="0 0 20 20" fill="none" aria-hidden="true" style="flex:0 0 auto;opacity:.9">
              <path d="M6 8l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `;

          menu.innerHTML = '';
          Array.from(selectEl.options).forEach((opt, idx) => {
            const item = document.createElement('button');
            item.type = 'button';
            item.className = 'ep-select-item';
            item.textContent = opt.textContent;
            item.setAttribute('role', 'option');
            item.setAttribute('aria-selected', idx === selectEl.selectedIndex ? 'true' : 'false');

            item.addEventListener('click', () => {
              selectEl.selectedIndex = idx;
              selectEl.dispatchEvent(new Event('change', { bubbles: true }));
              render();
              close();
            });

            menu.appendChild(item);
          });
        }

        btn.addEventListener('click', (e) => { e.preventDefault(); toggle(); });
        btn.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });

        function onDocDown(e){ if (!wrap.contains(e.target)) close(); }
        document.addEventListener('mousedown', onDocDown);

        selectEl.addEventListener('change', render);

        const api = { close, wrap };
        __epSelectInstances.add(api);

        render();
      }

      makePrettySelect(daysCountSelect, { size: 'md' });

      function currentDaysCount(){
        return parseInt(daysCountSelect.value, 10) || 5;
      }
      function currentLessonsPerDay(){
        const v = parseInt(lessonsPerDayInput.value, 10);
        if (!Number.isFinite(v)) return 7;
        return Math.max(1, Math.min(8, v));
      }

      function syncTeacherDayVisibility(daysCount){
        teacherTbody.querySelectorAll('.t-daylbl[data-d]').forEach(lbl => {
          const idx = parseInt(lbl.dataset.d, 10);
          const cb = lbl.querySelector('input[type="checkbox"]');
          if (idx >= daysCount) {
            lbl.style.display = 'none';
            if (cb) cb.checked = false;
          } else {
            lbl.style.display = 'inline-flex';
          }
        });
      }

      function syncTeacherHourVisibility(lessonsPerDay){
        teacherTbody.querySelectorAll('.t-hourlbl[data-h]').forEach(lbl => {
          const idx = parseInt(lbl.dataset.h, 10);
          if (idx >= lessonsPerDay) {
            lbl.style.display = 'none';
          } else {
            lbl.style.display = 'inline-flex';
          }
        });
      }

      daysCountSelect.addEventListener('change', () => {
        syncTeacherDayVisibility(currentDaysCount());
      });

      lessonsPerDayInput.addEventListener('change', () => {
        const lp = currentLessonsPerDay();
        lessonsPerDayInput.value = String(lp);
        syncTeacherHourVisibility(lp);
      });
      lessonsPerDayInput.addEventListener('input', () => {
        syncTeacherHourVisibility(currentLessonsPerDay());
      });

      function addTeacherRow(initial = {}) {
        const tr = document.createElement('tr');

        const dc = currentDaysCount();
        const defaultAvailDays = Array.from({ length: dc }, (_, i) => i);
        const availableDays = Array.isArray(initial.availableDays) && initial.availableDays.length
          ? initial.availableDays
          : defaultAvailDays;

        // Default: bÃ¼tÃ¼n saatlar seÃ§ili
        const defaultAvailHoursAll = Array.from({ length: 8 }, (_, i) => i);
        const availableHours = Array.isArray(initial.availableHours) && initial.availableHours.length
          ? initial.availableHours
          : defaultAvailHoursAll;

        const hoursHtml = HOUR_LABELS_FULL.map((lbl, idx) => {
          const checked = availableHours.includes(idx) ? 'checked' : '';
          return `<label class="t-hourlbl" data-h="${idx}">
                    <input type="checkbox" class="t-avhour" data-h="${idx}" ${checked}>
                    <span>${lbl}</span>
                  </label>`;
        }).join(' ');

        const daysHtml = DAY_LABELS_FULL.map((lbl, idx) => {
          const checked = availableDays.includes(idx) ? 'checked' : '';
          return `<label class="t-daylbl" data-d="${idx}">
                    <input type="checkbox" class="t-avday" data-d="${idx}" ${checked}>
                    <span>${lbl}</span>
                  </label>`;
        }).join(' ');

        tr.innerHTML = `
          <td><input type="text" class="t-name" placeholder="MÃ¼É™llim adÄ±" value="${initial.name || ''}"></td>
          <td><input type="text" class="t-code" placeholder="Kod" value="${initial.code || ''}"></td>
          <td><input type="number" class="t-week" min="0" max="60" value="${initial.weeklyMax ?? 30}"></td>
          <td><input type="number" class="t-daymax" min="0" max="10" value="${initial.dailyMax ?? 6}"></td>
          <td>
            <div class="t-mini-actions no-print">
              <button type="button" class="t-mini-btn t-hour-all">HamÄ±sÄ±</button>
              <button type="button" class="t-mini-btn t-hour-noedges">KÉ™narlarÄ± Ã§Ä±xar</button>
            </div>
            <div class="t-hours">
              ${hoursHtml}
            </div>
          </td>
          <td>
            <div class="t-days">
              ${daysHtml}
            </div>
          </td>
          <td class="no-print text-right">
            <button type="button" class="text-xs text-rose-500 hover:underline t-del">Sil</button>
          </td>
        `;
        teacherTbody.appendChild(tr);

        syncTeacherDayVisibility(dc);
        syncTeacherHourVisibility(currentLessonsPerDay());
      }

      function addClassRow(initial = {}) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input type="text" class="c-name" placeholder="mÉ™s: 5A" value="${initial.name || ''}"></td>
          <td>
            <select class="c-level">
              <option value="ibtidai" ${initial.level === 'ibtidai' ? 'selected' : ''}>Ä°btidai (1-4)</option>
              <option value="esas" ${initial.level === 'esas' ? 'selected' : ''}>Æsas (5-8)</option>
              <option value="yuxari" ${initial.level === 'yuxari' ? 'selected' : ''}>YuxarÄ± (9-11)</option>
            </select>
          </td>
          <td>
            <select class="c-shift">
              <option value="seher" ${initial.shift === 'seher' ? 'selected' : ''}>SÉ™hÉ™r</option>
              <option value="gunorta" ${initial.shift === 'gunorta' ? 'selected' : ''}>GÃ¼norta</option>
            </select>
          </td>
          <td><input type="number" class="c-maxday" min="0" max="8" placeholder="BoÅŸ: standart" value="${initial.maxPerDay ?? ''}"></td>
          <td class="no-print text-right">
            <button type="button" class="text-xs text-rose-500 hover:underline c-del">Sil</button>
          </td>
        `;
        classTbody.appendChild(tr);

        makePrettySelect(tr.querySelector('.c-level'), { size: 'sm' });
        makePrettySelect(tr.querySelector('.c-shift'), { size: 'sm' });
      }

      function addLessonRow(initial = {}) {
        const tr = document.createElement('tr');
        const dm = initial.doubleMode || 'none';

        tr.innerHTML = `
          <td><input type="text" class="l-class" placeholder="mÉ™s: 5A" value="${initial.className || ''}"></td>
          <td><input type="text" class="l-subj" placeholder="mÉ™s: Riyaziyyat" value="${initial.subject || ''}"></td>
          <td><input type="text" class="l-teacher" placeholder="Kod vÉ™ ya ad" value="${initial.teacher || ''}"></td>
          <td><input type="number" class="l-hours" min="1" max="40" value="${initial.hours ?? 2}"></td>
          <td class="text-center"><input type="checkbox" class="l-heavy" ${initial.heavy ? 'checked' : ''}></td>
          <td>
            <select class="l-doubleMode">
              <option value="none" ${dm === 'none' ? 'selected' : ''}>Yox</option>
              <option value="prefer" ${dm === 'prefer' ? 'selected' : ''}>Ä°mkan daxilindÉ™</option>
              <option value="required" ${dm === 'required' ? 'selected' : ''}>MÃ¼tlÉ™q</option>
            </select>
          </td>
          <td class="no-print text-right">
            <button type="button" class="text-xs text-rose-500 hover:underline l-del">Sil</button>
          </td>
        `;
        lessonTbody.appendChild(tr);

        makePrettySelect(tr.querySelector('.l-doubleMode'), { size: 'sm' });
      }

      btnAddTeacher.addEventListener('click', () => addTeacherRow({}));
      btnAddClass.addEventListener('click', () => addClassRow({}));
      btnAddLesson.addEventListener('click', () => addLessonRow({}));

      // Teacher actions
      teacherTbody.addEventListener('click', (e) => {
        const del = e.target.closest('.t-del');
        if (del) { del.closest('tr')?.remove(); return; }

        const allBtn = e.target.closest('.t-hour-all');
        if (allBtn) {
          const tr = allBtn.closest('tr');
          const lp = currentLessonsPerDay();
          tr.querySelectorAll('.t-avhour').forEach(cb => {
            const idx = parseInt(cb.dataset.h, 10);
            if (idx >= 0 && idx < lp) cb.checked = true;
          });
          return;
        }

        const neBtn = e.target.closest('.t-hour-noedges');
        if (neBtn) {
          const tr = neBtn.closest('tr');
          const lp = currentLessonsPerDay();
          tr.querySelectorAll('.t-avhour').forEach(cb => {
            const idx = parseInt(cb.dataset.h, 10);
            if (idx >= 0 && idx < lp) cb.checked = true;
          });
          if (lp >= 1) {
            const first = tr.querySelector('.t-avhour[data-h="0"]');
            if (first) first.checked = false;
          }
          if (lp >= 2) {
            const last = tr.querySelector('.t-avhour[data-h="' + (lp - 1) + '"]');
            if (last) last.checked = false;
          }
          return;
        }
      });

      classTbody.addEventListener('click', (e) => {
        if (e.target.classList.contains('c-del')) e.target.closest('tr')?.remove();
      });
      lessonTbody.addEventListener('click', (e) => {
        if (e.target.classList.contains('l-del')) e.target.closest('tr')?.remove();
      });

      btnResetAll.addEventListener('click', () => {
        __stopRequested = true;
        __runId++;
        __solverRunning = false;
        if (btnGenerate) btnGenerate.textContent = GENERATE_LABEL;

        teacherTbody.innerHTML = '';
        classTbody.innerHTML = '';
        lessonTbody.innerHTML = '';
        timetableContainer.innerHTML = '<div class="text-[12px] text-slate-500 dark:text-slate-400">HÉ™lÉ™ cÉ™dvÉ™l qurulmayÄ±b.</div>';
        classTabs.innerHTML = '';
        unplacedContainer.classList.add('hidden');
        unplacedContainer.textContent = '';
        softWarnings.textContent = '';
        resultStats.textContent = '';
        globalError.classList.add('hidden');
        globalError.textContent = '';
        globalInfo.textContent = '';

        ensureVisibleStable(document.getElementById('tt-panel'), { topGap: 18, bottomGap: 18 });
      });

      function showError(msg){
        globalError.textContent = msg;
        globalError.classList.remove('hidden');
        try { globalError.focus({ preventScroll: true }); } catch(e) { try { globalError.focus(); } catch(e2){} }
        ensureVisibleStable(globalError, { topGap: 18, bottomGap: 16 });
      }

function readConfig() {
  globalError.classList.add('hidden');
  globalError.textContent = '';

  const daysCount = currentDaysCount();
  const lessonsPerDay = currentLessonsPerDay();

  const optHeavyAvoidEdges = document.getElementById('optHeavyAvoidEdges').checked;
  const optNoClassGaps = document.getElementById('optNoClassGaps').checked;

  const teachers = [];
  teacherTbody.querySelectorAll('tr').forEach(tr => {
    const name = tr.querySelector('.t-name')?.value.trim();
    const code = tr.querySelector('.t-code')?.value.trim();
    if (!name && !code) return;

    // Days
    const dayCbs = tr.querySelectorAll('.t-avday[data-d]');
    let availableDays = [];
    dayCbs.forEach(cb => {
      if (cb.checked) {
        const idx = parseInt(cb.dataset.d, 10);
        if (!Number.isNaN(idx)) availableDays.push(idx);
      }
    });
    availableDays = availableDays.filter(d => d < daysCount);
    if (!availableDays.length) availableDays = Array.from({ length: daysCount }, (_, i) => i);

    // Hours
    const hourCbs = tr.querySelectorAll('.t-avhour[data-h]');
    let availableHours = [];
    hourCbs.forEach(cb => {
      if (cb.checked) {
        const idx = parseInt(cb.dataset.h, 10);
        if (!Number.isNaN(idx)) availableHours.push(idx);
      }
    });
    availableHours = availableHours.filter(h => h < lessonsPerDay);
    if (!availableHours.length) availableHours = Array.from({ length: lessonsPerDay }, (_, i) => i);

    const availableHoursMask = new Array(lessonsPerDay).fill(false);
    availableHours.forEach(h => {
      if (h >= 0 && h < lessonsPerDay) availableHoursMask[h] = true;
    });

    teachers.push({
      id: teachers.length,
      name: name || code,
      code: code || name,
      weeklyMax: Number(tr.querySelector('.t-week')?.value) || 0,
      dailyMax: Number(tr.querySelector('.t-daymax')?.value) || 0,
      availableDays,
      availableHours,
      availableHoursMask
    });
  });

  const classes = [];
  classTbody.querySelectorAll('tr').forEach(tr => {
    const name = tr.querySelector('.c-name')?.value.trim();
    if (!name) return;
    const level = tr.querySelector('.c-level')?.value || 'esas';
    const shift = tr.querySelector('.c-shift')?.value || 'seher';

    const raw = Number(tr.querySelector('.c-maxday')?.value) || 0;
    const maxDay = raw > 0 ? Math.min(raw, lessonsPerDay) : 0;

    classes.push({
      id: classes.length,
      name,
      level,
      shift,
      maxPerDay: maxDay
    });
  });

  const lessons = [];
  lessonTbody.querySelectorAll('tr').forEach(tr => {
    const className = tr.querySelector('.l-class')?.value.trim();
    const subject   = tr.querySelector('.l-subj')?.value.trim();
    const teacher   = tr.querySelector('.l-teacher')?.value.trim();
    const hours     = Number(tr.querySelector('.l-hours')?.value) || 0;
    if (!className || !subject || !teacher || hours <= 0) return;

    const dmRaw = tr.querySelector('.l-doubleMode')?.value || 'none';
    const doubleMode = (dmRaw === 'prefer' || dmRaw === 'required') ? dmRaw : 'none';

    lessons.push({
      className,
      subject,
      teacherRef: teacher,
      hours,
      heavy: tr.querySelector('.l-heavy')?.checked || false,
      doubleMode
    });
  });

  if (!teachers.length || !classes.length || !lessons.length) {
    throw new Error('Æn azÄ± 1 mÃ¼É™llim, 1 sinif vÉ™ 1 dÉ™rs É™lavÉ™ edilmÉ™lidir.');
  }
  if (lessonsPerDay > 8 || lessonsPerDay < 1) {
    throw new Error('GÃ¼ndÉ™ dÉ™rs saatÄ± 1â€“8 aralÄ±ÄŸÄ±nda olmalÄ±dÄ±r.');
  }

  return {
    daysCount,
    lessonsPerDay,
    optHeavyAvoidEdges,
    optNoClassGaps,
    teachers,
    classes,
    lessons,

    _blocks: null,
    _targetHours: 0
  };
}


      function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
      }

function generateBlocks(config) {
  const { lessons, classes, teachers } = config;

  const classIndexByName = new Map();
  classes.forEach(c => classIndexByName.set(c.name.trim(), c.id));

  const teacherIndexByKey = new Map();
  teachers.forEach(t => {
    if ((t.code || '').trim()) teacherIndexByKey.set((t.code || '').trim(), t.id);
    if ((t.name || '').trim()) teacherIndexByKey.set((t.name || '').trim(), t.id);
  });

  const blocks = [];
  const unknown = [];

  lessons.forEach(l => {
    const cId = classIndexByName.get(l.className.trim());
    const tId = teacherIndexByKey.get(l.teacherRef.trim());
    if (cId == null || tId == null) {
      unknown.push(l);
      return;
    }

    let remaining = l.hours;

    // âœ… Yeni qayda: QoÅŸa=Yox => gÃ¼ndÉ™ cap 1; É™ks halda cap 2
    const dailyCap = (l.doubleMode === 'none') ? 1 : 2;

    const base = {
      classId: cId,
      teacherId: tId,
      subject: l.subject,
      heavy: !!l.heavy,
      dailyCap
    };

    // QoÅŸa=prefer/required => mÃ¼mkÃ¼n qÉ™dÉ™r 2-lik bloklar (hÉ™min fÉ™nn eyni gÃ¼ndÉ™ 2 dÉ™fÉ™)
    if ((l.doubleMode === 'required' || l.doubleMode === 'prefer') && remaining >= 2) {
      const splitAllowed = (l.doubleMode === 'prefer');
      const doublePolicy = l.doubleMode;

      while (remaining >= 2) {
        blocks.push({ ...base, length: 2, splitAllowed, doublePolicy });
        remaining -= 2;
      }
    }

    // Qalan tÉ™k saatlar (odd qalÄ±q vÉ™ ya QoÅŸa=Yox)
    while (remaining > 0) {
      blocks.push({ ...base, length: 1, splitAllowed: false, doublePolicy: 'none' });
      remaining -= 1;
    }
  });

  return { blocks, unknownUnmapped: unknown };
}


      function sumRequiredHours(lessons){
        return lessons.reduce((sum, l) => sum + (Number(l.hours) || 0), 0);
      }

      function prepareSolve(config){
        const { blocks, unknownUnmapped } = generateBlocks(config);

        if (unknownUnmapped && unknownUnmapped.length){
          const lines = unknownUnmapped.map(l => `â€¢ ${l.className} â€“ ${l.subject} (${l.teacherRef})`);
          throw new Error(
            'BÉ™zi dÉ™rslÉ™r Ã¼Ã§Ã¼n sinif vÉ™ ya mÃ¼É™llim tapÄ±lmadÄ± (yazÄ±lÄ±ÅŸlarÄ± yoxlayÄ±n):\n' + lines.join('\n')
          );
        }

        config._blocks = blocks;
        config._targetHours = blocks.reduce((s, b) => s + b.length, 0);

        // ===== FAIL-FAST checklÉ™r =====
        const teacherHours = new Array(config.teachers.length).fill(0);
        const classHours = new Array(config.classes.length).fill(0);

        blocks.forEach(b => {
          teacherHours[b.teacherId] += b.length;
          classHours[b.classId] += b.length;
        });

        // MÃ¼É™llim tutumu: weeklyMax + (availableDays * min(dailyMax, availableHoursCount))
        teacherHours.forEach((h, tId) => {
          const t = config.teachers[tId];
          const label = t.code || t.name || `#${tId}`;

          const weeklyMax = (t.weeklyMax > 0) ? t.weeklyMax : Infinity;
          const dailyMax  = (t.dailyMax > 0) ? t.dailyMax : Infinity;

          const daysAvail = (Array.isArray(t.availableDays) && t.availableDays.length)
            ? t.availableDays.length
            : config.daysCount;

          const hoursAvail = (Array.isArray(t.availableHours) && t.availableHours.length)
            ? t.availableHours.length
            : config.lessonsPerDay;

          const perDayCap = Math.min(dailyMax, hoursAvail);
          const capBySelection = perDayCap * daysAvail;
          const overallCap = Math.min(weeklyMax, capBySelection);

          if (h > overallCap) {
            const wTxt = (weeklyMax === Infinity) ? 'limitsiz' : String(weeklyMax);
            const dTxt = (dailyMax === Infinity) ? 'limitsiz' : String(dailyMax);
            throw new Error(
              `MÃ¼mkÃ¼nsÃ¼z konfiqurasiya: "${label}" mÃ¼É™lliminÉ™ ${h} saat dÃ¼ÅŸÃ¼r, amma maksimum ${overallCap} saat mÃ¼mkÃ¼ndÃ¼r ` +
              `(hÉ™ftÉ™lik max: ${wTxt}, gÃ¼ndÉ™ max: ${dTxt}, gÉ™lmÉ™ gÃ¼nlÉ™ri: ${daysAvail}, uyÄŸun saatlar: ${hoursAvail}).`
            );
          }
        });

        // Sinif tutumu: default max = lessonsPerDay
        classHours.forEach((h, cId) => {
          const c = config.classes[cId];
          const maxDayRaw = (c.maxPerDay > 0) ? c.maxPerDay : config.lessonsPerDay;
          const maxDay = Math.min(maxDayRaw, config.lessonsPerDay);
          const cap = maxDay * config.daysCount;
          if (h > cap) {
            throw new Error(`MÃ¼mkÃ¼nsÃ¼z konfiqurasiya: "${c.name}" sinfindÉ™ ${h} saat var, amma tutum ${cap}-dÄ±r (gÃ¼ndÉ™ ${maxDay} Ã— ${config.daysCount} gÃ¼n).`);
          }
        });

// ===== âœ… Eyni fÉ™nn qaydasÄ± (yeni) - FAIL-FAST =====
// Ãœmumi qayda: eyni sinifdÉ™ eyni fÉ™nn bir gÃ¼ndÉ™ max 2.
// QoÅŸa=Yox olan lesson sÉ™tri Ã¼Ã§Ã¼n isÉ™ gÃ¼ndÉ™ max 1 demÉ™kdir.
//
// 1) HÉ™r lesson sÉ™tri Ã¼zrÉ™ maksimum (gÃ¼ndÉ™ cap Ã— gÃ¼n sayÄ±)
const classIndexByNameFF = new Map();
config.classes.forEach(c => classIndexByNameFF.set(c.name.trim(), c.id));

config.lessons.forEach(l => {
  const cId = classIndexByNameFF.get(l.className.trim());
  if (cId == null) return;

  const dm = l.doubleMode || 'none';
  const capPerDay = (dm === 'none') ? 1 : 2;
  const weeklyCap = capPerDay * config.daysCount;

  if ((Number(l.hours) || 0) > weeklyCap) {
    const cls = config.classes[cId]?.name || l.className;
    const dmTxt = (dm === 'none') ? 'Yox' : (dm === 'prefer' ? 'Ä°mkan daxilindÉ™' : 'MÃ¼tlÉ™q');
    throw new Error(
      `MÃ¼mkÃ¼nsÃ¼z konfiqurasiya: "${cls}" sinfindÉ™ "${l.subject}" fÉ™nni hÉ™ftÉ™lik ${l.hours} saatdÄ±r, ` +
      `amma QoÅŸa=${dmTxt} olduÄŸuna gÃ¶rÉ™ maksimum ${weeklyCap} saat ola bilÉ™r (gÃ¼ndÉ™ max ${capPerDay} Ã— ${config.daysCount} gÃ¼n).`
    );
  }
});

// 2) Sinif+fÉ™nn Ã¼zrÉ™ Ã¼mumi maksimum (hÉ™miÅŸÉ™ 2 Ã— gÃ¼n)
{
  const byClass = new Map();
  blocks.forEach(b => {
    let m = byClass.get(b.classId);
    if (!m) { m = new Map(); byClass.set(b.classId, m); }
    m.set(b.subject, (m.get(b.subject) || 0) + b.length);
  });

  const weeklyCapPerSubject = 2 * config.daysCount;
  byClass.forEach((m, classId) => {
    const cls = config.classes[classId];
    m.forEach((total, subject) => {
      if (total > weeklyCapPerSubject) {
        throw new Error(
          `MÃ¼mkÃ¼nsÃ¼z konfiqurasiya: "${cls?.name || '?'}" sinfindÉ™ "${subject}" fÉ™nni hÉ™ftÉ™lik ${total} saatdÄ±r, ` +
          `amma qaydaya gÃ¶rÉ™ eyni fÉ™nn bir gÃ¼ndÉ™ maksimum 2 dÉ™fÉ™ ola bildiyindÉ™n maksimum ${weeklyCapPerSubject} saat ola bilÉ™r.`
        );
      }
    });
  });
}


        // QoÅŸa=required: mÃ¼É™llim seÃ§diyi saatlarda ardÄ±cÄ±l 2 saat olmalÄ±dÄ±r
        const requiredDoubleTeachers = new Set();
        blocks.forEach(b => {
          if (b.length === 2 && b.doublePolicy === 'required') requiredDoubleTeachers.add(b.teacherId);
        });

        if (requiredDoubleTeachers.size > 0 && config.lessonsPerDay < 2) {
          throw new Error('â€œQoÅŸa = MÃ¼tlÉ™qâ€ seÃ§ilmiÅŸ dÉ™rslÉ™r var, amma â€œGÃ¼ndÉ™ dÉ™rs saatÄ± (max)â€ 2-dÉ™n azdÄ±r.');
        }

        requiredDoubleTeachers.forEach(tId => {
          const t = config.teachers[tId];
          const mask = t.availableHoursMask || [];
          let hasPair = false;
          for (let s = 0; s < config.lessonsPerDay - 1; s++) {
            if (mask[s] && mask[s + 1]) { hasPair = true; break; }
          }
          if (!hasPair) {
            const label = t.code || t.name || `#${tId}`;
            throw new Error(`MÃ¼mkÃ¼nsÃ¼z konfiqurasiya: "${label}" mÃ¼É™lliminin seÃ§diyi dÉ™rs saatlarÄ±nda ardÄ±cÄ±l 2 saat yoxdur, amma â€œQoÅŸa = MÃ¼tlÉ™qâ€ dÉ™rslÉ™ri mÃ¶vcuddur.`);
          }
        });

        return config;
      }

      // ===== PRO placement + "boÅŸ saat olmasÄ±n" =====
      function attemptBuild(config) {
const {
  daysCount,
  lessonsPerDay,
  teachers,
  classes,
  optHeavyAvoidEdges,
  optNoClassGaps
} = config;

        const baseBlocks = (Array.isArray(config._blocks) && config._blocks.length)
          ? config._blocks
          : generateBlocks(config).blocks;

        // Precompute masks and allowed slots for speed
        const teacherWeekMax = teachers.map(t => t.weeklyMax > 0 ? t.weeklyMax : Infinity);
        const teacherDayMax  = teachers.map(t => t.dailyMax > 0 ? t.dailyMax : Infinity);

        const teacherDayMask = teachers.map(t => {
          const m = new Array(daysCount).fill(false);
          (t.availableDays || []).forEach(d => { if (d >= 0 && d < daysCount) m[d] = true; });
          return m;
        });

        const teacherHourMask = teachers.map(t => {
          const m = t.availableHoursMask;
          if (Array.isArray(m) && m.length === lessonsPerDay) return m.slice();
          return new Array(lessonsPerDay).fill(true);
        });

        const teacherAllowedSlots = teachers.map((t, tid) => {
          const m = teacherHourMask[tid];
          const slots1 = [];
          for (let s = 0; s < lessonsPerDay; s++) if (m[s]) slots1.push(s);
          const slots2 = [];
          for (let s = 0; s < lessonsPerDay - 1; s++) if (m[s] && m[s + 1]) slots2.push(s);
          return { 1: slots1, 2: slots2 };
        });

        const classMaxPerDay = classes.map(c => {
          const raw = Number(c.maxPerDay) || 0;
          const maxDayRaw = raw > 0 ? raw : lessonsPerDay;
          return Math.min(maxDayRaw, lessonsPerDay);
        });

        // Order blocks by difficulty
        const blocks = baseBlocks.slice().map(b => ({ ...b, __r: Math.random() }));
        blocks.forEach(b => {
          const tid = b.teacherId;
          const daysAvail = (teachers[tid]?.availableDays?.length || daysCount);
          const slotsAvail2 = teacherAllowedSlots[tid][2].length;
          const slotsAvail1 = teacherAllowedSlots[tid][1].length;

          let slotsAvail = teacherAllowedSlots[tid][b.length].length;
          if (b.length === 2 && b.splitAllowed) {
            slotsAvail = Math.max(slotsAvail2, slotsAvail1);
          }
          const domain = Math.max(1, daysAvail * Math.max(1, slotsAvail));
          b.__difficulty = domain;
          b.__hardDouble = (b.length === 2 && b.doublePolicy === 'required') ? 0 : 1;
        });

        blocks.sort((a, b) => {
          if (a.__hardDouble !== b.__hardDouble) return a.__hardDouble - b.__hardDouble;
          if (a.__difficulty !== b.__difficulty) return a.__difficulty - b.__difficulty;
          if (b.length !== a.length) return b.length - a.length;
          if (b.heavy !== a.heavy) return (b.heavy ? 1 : 0) - (a.heavy ? 1 : 0);
          return a.__r - b.__r;
        });

        // Timetable matrices
        const timetable = {};
        classes.forEach(c => {
          const matrix = [];
          for (let d = 0; d < daysCount; d++) matrix.push(new Array(lessonsPerDay).fill(null));
          timetable[c.id] = matrix;
        });

        // State
        const teacherWeekly = new Array(teachers.length).fill(0);
        const teacherDaily  = new Array(teachers.length).fill(null).map(() => new Array(daysCount).fill(0));
        const classDaily    = new Array(classes.length).fill(null).map(() => new Array(daysCount).fill(0));
        const classSubjPerDay = new Array(classes.length).fill(null).map(() => Object.create(null));

        // teacherBusy[tid][day][slot] = true/false
        const teacherBusy = new Array(teachers.length).fill(null).map(() =>
          new Array(daysCount).fill(null).map(() => new Array(lessonsPerDay).fill(false))
        );

        const lastSlotIndex = lessonsPerDay - 1;
        const unplaced = [];
        let placedCount = 0;

        function isEdge(slot, len){
          return slot === 0 || (slot + len - 1) === lastSlotIndex;
        }

        function checkPlaceReason(block, day, slot, avoidEdgesHard){
          const { classId, teacherId, subject, length } = block;

          if (slot + length - 1 >= lessonsPerDay) return 'Saat aralÄ±ÄŸÄ±na sÄ±ÄŸmÄ±r';

          // âœ… boÅŸ saat olmasÄ±n: sinifdÉ™ yalnÄ±z "nÃ¶vbÉ™ti boÅŸ slot"a yerlÉ™ÅŸdir
          if (optNoClassGaps) {
            const nextSlot = classDaily[classId][day];
            if (slot !== nextSlot) return 'SinifdÉ™ boÅŸluq qaydasÄ± (ardÄ±cÄ±llÄ±q)';
          }

          const matrix = timetable[classId];
          for (let i = 0; i < length; i++) {
            if (matrix[day][slot + i] != null) return 'Sinif slotu doludur';
          }

          if (!teacherDayMask[teacherId][day]) return 'MÃ¼É™llim hÉ™min gÃ¼n gÉ™lmir';

          const hm = teacherHourMask[teacherId];
          for (let i = 0; i < length; i++) {
            if (!hm[slot + i]) return 'MÃ¼É™llim hÉ™min saatÄ± seÃ§mÉ™yib';
          }

          for (let i = 0; i < length; i++) {
            if (teacherBusy[teacherId][day][slot + i]) return 'MÃ¼É™llim conflict (baÅŸqa dÉ™rs)';
          }

          if (teacherWeekly[teacherId] + length > teacherWeekMax[teacherId]) return 'MÃ¼É™llim hÉ™ftÉ™lik limit dolub';
          if (teacherDaily[teacherId][day] + length > teacherDayMax[teacherId]) return 'MÃ¼É™llim gÃ¼ndÉ™lik limit dolub';

          if (classDaily[classId][day] + length > classMaxPerDay[classId]) return 'Sinif gÃ¼ndÉ™lik limit dolub';

// âœ… Eyni fÉ™nn qaydasÄ± (yeni)
// Ãœmumi cap: gÃ¼ndÉ™ max 2.
// QoÅŸa=Yox bloklarÄ± Ã¼Ã§Ã¼n cap=1.
{
  const subjMap = classSubjPerDay[classId];
  const arr = subjMap[subject];
  const cur = arr ? arr[day] : 0;

  const cap = Math.min(2, (block.dailyCap === 1 ? 1 : 2));
  if (cur + length > cap) return cap === 1 ? 'Eyni fÉ™nn gÃ¼ndÉ™ maksimum 1' : 'Eyni fÉ™nn gÃ¼ndÉ™ maksimum 2';
}


          if (avoidEdgesHard && optHeavyAvoidEdges && block.heavy && isEdge(slot, length)) {
            return 'AÄŸÄ±r fÉ™nn kÉ™nar saat';
          }

          return null; // OK
        }

        function canPlace(block, day, slot, avoidEdgesHard){
          return checkPlaceReason(block, day, slot, avoidEdgesHard) === null;
        }

        function place(block, day, slot){
          const { classId, teacherId, subject, length } = block;
          const matrix = timetable[classId];

          for (let i = 0; i < length; i++) {
            matrix[day][slot + i] = { block, part: i };
            teacherBusy[teacherId][day][slot + i] = true;
          }

          teacherWeekly[teacherId] += length;
          teacherDaily[teacherId][day] += length;
          classDaily[classId][day] += length;

          const subjMap = classSubjPerDay[classId];
          if (!subjMap[subject]) subjMap[subject] = new Array(daysCount).fill(0);
          subjMap[subject][day] += length;

          placedCount += length;
        }

        function unplace(block, day, slot){
          const { classId, teacherId, subject, length } = block;
          const matrix = timetable[classId];

          for (let i = 0; i < length; i++) {
            matrix[day][slot + i] = null;
            teacherBusy[teacherId][day][slot + i] = false;
          }

          teacherWeekly[teacherId] -= length;
          teacherDaily[teacherId][day] -= length;
          classDaily[classId][day] -= length;

          const subjMap = classSubjPerDay[classId];
          if (subjMap[subject]) subjMap[subject][day] -= length;

          placedCount -= length;
        }

        function candidateScore(block, day, slot){
          const { classId, teacherId, length } = block;

          let score = 0;
          score += classDaily[classId][day] * 6;
          score += teacherDaily[teacherId][day] * 3;

          // prefer earlier slots a bit
          score += slot * 0.35;

          if (optHeavyAvoidEdges && block.heavy && isEdge(slot, length)) score += 18;

          score += Math.random() * 0.6;
          return score;
        }

        function getCandidates(block, avoidEdgesHard){
          const { teacherId, length, classId } = block;
          const days = teachers[teacherId].availableDays || [];
          const slots = teacherAllowedSlots[teacherId][length] || [];

          const cands = [];

          for (const d of days) {
            if (teacherDaily[teacherId][d] + length > teacherDayMax[teacherId]) continue;
            if (classDaily[classId][d] + length > classMaxPerDay[classId]) continue;

            if (optNoClassGaps) {
              const s = classDaily[classId][d]; // next slot
              if (s + length - 1 >= lessonsPerDay) continue;
              if (avoidEdgesHard && optHeavyAvoidEdges && block.heavy && isEdge(s, length)) continue;
              if (!canPlace(block, d, s, avoidEdgesHard)) continue;
              cands.push({ d, s, score: candidateScore(block, d, s) });
              continue;
            }

            for (const s of slots) {
              if (avoidEdgesHard && optHeavyAvoidEdges && block.heavy && isEdge(s, length)) continue;
              if (!canPlace(block, d, s, avoidEdgesHard)) continue;
              cands.push({ d, s, score: candidateScore(block, d, s) });
            }
          }

          return cands;
        }

        function pickFromTopK(cands, k){
          if (!cands.length) return null;
          cands.sort((a, b) => a.score - b.score);
          const kk = Math.max(1, Math.min(k, cands.length));
          const idx = Math.floor(Math.random() * kk);
          return cands[idx];
        }

        function tryPlaceBlock(block){
          const avoidEdgesStage1 = !!(optHeavyAvoidEdges && block.heavy);

          // 1) stage-1 (avoid edges for heavy)
          let cands = getCandidates(block, avoidEdgesStage1);
          let pick = pickFromTopK(cands, 8);
          if (pick) { place(block, pick.d, pick.s); return true; }

          // 2) stage-2 (allow edges)
          cands = getCandidates(block, false);
          pick = pickFromTopK(cands, 8);
          if (pick) { place(block, pick.d, pick.s); return true; }

// 3) QoÅŸa=Ä°mkan daxilindÉ™ (splitAllowed) -> ardÄ±cÄ±l alÄ±nmasa, eyni gÃ¼ndÉ™ 2 ayrÄ± saat kimi yerlÉ™ÅŸdir (mÃ¼tlÉ™q eyni gÃ¼n)
if (block.length === 2 && block.splitAllowed) {
  const singleA = { ...block, length: 1, splitAllowed: false, doublePolicy: 'none' };
  const singleB = { ...block, length: 1, splitAllowed: false, doublePolicy: 'none' };

  const trySplitSameDay = (avoidEdgesHard) => {
    const aCands = getCandidates(singleA, avoidEdgesHard);
    aCands.sort((x, y) => x.score - y.score);

    const limit = Math.min(14, aCands.length);
    for (let i = 0; i < limit; i++) {
      const a = aCands[i];
      place(singleA, a.d, a.s);

      let bCands = getCandidates(singleB, avoidEdgesHard).filter(x => x.d === a.d);
      if (bCands.length) {
        bCands.sort((x, y) => {
          const dx = Math.abs(x.s - a.s);
          const dy = Math.abs(y.s - a.s);
          if (dx !== dy) return dx - dy;   // É™vvÉ™l mÃ¼mkÃ¼n qÉ™dÉ™r yan-yana/ardÄ±cÄ±l
          return x.score - y.score;
        });
        const b = bCands[0];
        place(singleB, b.d, b.s);
        return true;
      }

      unplace(singleA, a.d, a.s);
    }
    return false;
  };

  if (trySplitSameDay(avoidEdgesStage1)) return true;
  if (trySplitSameDay(false)) return true;
}


          return false;
        }

        for (const b of blocks) {
          const ok = tryPlaceBlock(b);
          if (!ok) unplaced.push(b);
        }

        return {
          timetable,
          unplaced,
          placedCount,
          meta: {
            teacherWeekly,
            teacherDaily,
            classDaily,
            classSubjPerDay,
            teacherBusy,
            teacherWeekMax,
            teacherDayMax,
            classMaxPerDay
          }
        };
      }

      async function buildUntilSolved(config, shouldStop){
        const target = Number(config._targetHours) || sumRequiredHours(config.lessons);
        const startedAt = performance.now();

        const BATCH = 260;

        let attempts = 0;
        let best = null;

        function isBetter(a, b){
          if (!b) return true;
          if (a.placedCount !== b.placedCount) return a.placedCount > b.placedCount;
          const au = a.unplaced?.length || 0;
          const bu = b.unplaced?.length || 0;
          if (au !== bu) return au < bu;
          return false;
        }

        while (true) {
          for (let i = 0; i < BATCH; i++) {
            if (shouldStop && shouldStop()) {
              if (!best) best = { timetable: {}, unplaced: [], placedCount: 0, meta: null };
              best.stopped = true;
              best.attemptsUsed = attempts;
              best.targetHours = target;
              return best;
            }

            attempts++;
            const res = attemptBuild(config);
            res.attemptsUsed = attempts;
            res.targetHours = target;

            if (isBetter(res, best)) best = res;

            if (res.placedCount >= target) {
              best = res;
              best.solved = true;
              return best;
            }
          }

          const bestPlaced = best ? best.placedCount : 0;
          const pct = target > 0 ? ((bestPlaced / target) * 100).toFixed(1) : '0.0';
          const elapsed = ((performance.now() - startedAt) / 1000).toFixed(1);

          if (globalInfo) {
            globalInfo.textContent =
              `AxtarÄ±ÅŸ davam edirâ€¦ CÉ™hd: ${attempts.toLocaleString('az-AZ')} Â· Æn yaxÅŸÄ±: ${bestPlaced}/${target} (${pct}%) Â· ${elapsed}s`;
          }

          await new Promise(r => requestAnimationFrame(r));
        }
      }

      function teacherLabel(teachers, tId) {
        const t = teachers[tId];
        if (!t) return '';
        if (t.code && t.name) return `${t.code}`;
        return t.code || t.name || '';
      }

      function renderTimetable(config, result) {
        const { classes, teachers, daysCount, lessonsPerDay, optNoClassGaps } = config;
        const { timetable, unplaced, placedCount, meta } = result;

        const daysLabels = (daysCount === 5 ? DAYS_LABELS_5 : DAYS_LABELS_6).slice(0, daysCount);

        classTabs.innerHTML = '';
        classes.forEach((c, idx) => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'tab-btn' + (idx === 0 ? ' active' : '');
          btn.textContent = c.name;
          btn.dataset.classId = c.id;
          classTabs.appendChild(btn);
        });

        function renderForClass(classId) {
          const matrix = timetable[classId];
          if (!matrix) {
            timetableContainer.innerHTML = '<div class="text-[12px] text-slate-500 dark:text-slate-400">Bu sinif Ã¼Ã§Ã¼n cÉ™dvÉ™l tapÄ±lmadÄ±.</div>';
            return;
          }

          let html = '<table class="tt-table"><thead><tr><th>Saat</th>';
          daysLabels.forEach(d => { html += `<th>${d}</th>`; });
          html += '</tr></thead><tbody>';

          for (let s = 0; s < lessonsPerDay; s++) {
            html += `<tr><th>${s + 1}</th>`;
            for (let d = 0; d < daysCount; d++) {
              const cell = matrix[d][s];
              if (!cell) {
                html += `<td><span class="tt-slot-muted">â€”</span></td>`;
              } else if (cell.part === 0) {
                const b = cell.block;
                const subj = b.subject;
                const tLab = teacherLabel(teachers, b.teacherId);
                const rowspan = b.length > 1 ? b.length : 1;
                html += `<td rowspan="${rowspan}">
                          <div class="font-semibold">${subj}</div>
                          <div class="text-[10px] mt-0.5 text-slate-500 dark:text-slate-400">${tLab}</div>
                        </td>`;
              } else {
                // rowspan-a gÃ¶rÉ™ boÅŸ qalÄ±r
              }
            }
            html += '</tr>';
          }

          html += '</tbody></table>';
          timetableContainer.innerHTML = html;
        }

        const totalRequiredHours =
          Number(result.targetHours) ||
          Number(config._targetHours) ||
          sumRequiredHours(config.lessons);

        const placedPercent = totalRequiredHours > 0 ? ((placedCount / totalRequiredHours) * 100).toFixed(1) : '0.0';
        const attemptsUsed = result.attemptsUsed ?? 0;

        resultStats.textContent =
          `YerlÉ™ÅŸdirilÉ™n saat: ${placedCount}/${totalRequiredHours} (${placedPercent}%) Â· CÉ™hd: ${attemptsUsed.toLocaleString('az-AZ')}`;

        // ===== Diagnostics for unplaced =====
        function explainUnplaced(block){
          if (!meta) return '';

          const reasons = Object.create(null);
          const { classId, teacherId, subject, length } = block;
          const matrix = timetable[classId];
          const t = teachers[teacherId];

          function add(reason){
            reasons[reason] = (reasons[reason] || 0) + 1;
          }

          for (let d = 0; d < daysCount; d++) {
            // firstEmpty for no-gaps rule
            let firstEmpty = 0;
            if (optNoClassGaps) {
              while (firstEmpty < lessonsPerDay && matrix[d][firstEmpty] != null) firstEmpty++;
            }

            for (let s = 0; s <= lessonsPerDay - length; s++) {
              if (optNoClassGaps && s !== firstEmpty) { add('SinifdÉ™ boÅŸluq qaydasÄ±'); continue; }

              // Class occupancy
              let occ = false;
              for (let i = 0; i < length; i++) {
                if (matrix[d][s + i] != null) { occ = true; break; }
              }
              if (occ) { add('Sinif slotu doludur'); continue; }

              // Teacher day
              if (t.availableDays && !t.availableDays.includes(d)) { add('MÃ¼É™llim hÉ™min gÃ¼n gÉ™lmir'); continue; }

              // Teacher hour
              const hm = t.availableHoursMask || [];
              let hourOk = true;
              for (let i = 0; i < length; i++) {
                if (!hm[s + i]) { hourOk = false; break; }
              }
              if (!hourOk) { add('MÃ¼É™llim hÉ™min saatÄ± seÃ§mÉ™yib'); continue; }

              // Teacher conflict
              let conf = false;
              for (let i = 0; i < length; i++) {
                if (meta.teacherBusy[teacherId][d][s + i]) { conf = true; break; }
              }
              if (conf) { add('MÃ¼É™llim conflict'); continue; }

              // Limits
              if (meta.teacherWeekly[teacherId] + length > meta.teacherWeekMax[teacherId]) { add('MÃ¼É™llim hÉ™ftÉ™lik limit'); continue; }
              if (meta.teacherDaily[teacherId][d] + length > meta.teacherDayMax[teacherId]) { add('MÃ¼É™llim gÃ¼ndÉ™lik limit'); continue; }
              if (meta.classDaily[classId][d] + length > meta.classMaxPerDay[classId]) { add('Sinif gÃ¼ndÉ™lik limit'); continue; }

              if (optLimitSameSubject) {
  const subjMap = meta.classSubjPerDay[classId];
  const arr = subjMap[subject];
  const cur = arr ? arr[d] : 0;

  const cap = Math.min(2, (block.dailyCap === 1 ? 1 : 2));
  if (cur + length > cap) {
    add(cap === 1 ? 'Eyni fÉ™nn gÃ¼ndÉ™ maksimum 1' : 'Eyni fÉ™nn gÃ¼ndÉ™ maksimum 2');
    continue;
  }
}


              add('Slot var, amma kombinasiya Ã§É™tindir');
            }
          }

          const entries = Object.entries(reasons).sort((a,b)=>b[1]-a[1]);
          if (!entries.length) return '';

          const top1 = entries[0][0];
          const top2 = entries[1] ? entries[1][0] : null;
          return top2 ? `SÉ™bÉ™b: ${top1}; ${top2}` : `SÉ™bÉ™b: ${top1}`;
        }

        if (unplaced && unplaced.length) {
          const lines = unplaced.map(b => {
            const cls = classes[b.classId]?.name || '?';
            const t = teachers[b.teacherId];
            const tLabel = t ? (t.code || t.name) : '?';
            const why = explainUnplaced(b);
            return `â€¢ ${cls} â€“ ${b.subject} (${tLabel}), ${b.length} saat${why ? ' â€” ' + why : ''}`;
          });
          unplacedContainer.classList.remove('hidden');
          unplacedContainer.textContent = 'YerlÉ™ÅŸdirilmÉ™yÉ™nlÉ™r:\n' + lines.join('\n');
        } else {
          unplacedContainer.classList.add('hidden');
          unplacedContainer.textContent = '';
        }

softWarnings.textContent =
  'Qeyd: MÃ¼É™llimin gÉ™lmÉ™ gÃ¼nlÉ™ri, mÃ¼É™llimin seÃ§diyi dÉ™rs saatlarÄ±, mÃ¼É™llim/sinif limitlÉ™ri vÉ™ sinifdÉ™ boÅŸ saat olmamasÄ± (aktivdirsÉ™) qayda kimi tÉ™tbiq olunur vÉ™ pozulmur. ' +
  'Eyni fÉ™nn Ã¼Ã§Ã¼n yeni qayda: standart halda eyni gÃ¼ndÉ™ max 1 dÉ™fÉ™; QoÅŸa=Ä°mkan daxilindÉ™/MÃ¼tlÉ™q olan dÉ™rslÉ™r hÉ™min fÉ™nni eyni gÃ¼ndÉ™ 2 dÉ™fÉ™ etmÉ™yÉ™ mÉ™cbur edir (MÃ¼tlÉ™q: ardÄ±cÄ±l, Ä°mkan daxilindÉ™: mÃ¼mkÃ¼nsÉ™ ardÄ±cÄ±l, deyilsÉ™ yenÉ™ eyni gÃ¼ndÉ™ 2 dÉ™fÉ™). ' +
  'â€œAÄŸÄ±r fÉ™nn 1-ci/sonuncu saatda olmasÄ±nâ€ optimallaÅŸdÄ±rmadÄ±r.';


        const firstClassId = classes[0]?.id;
        if (firstClassId != null) renderForClass(firstClassId);

        classTabs.onclick = (e) => {
          const btn = e.target.closest('.tab-btn');
          if (!btn) return;
          classTabs.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          renderForClass(Number(btn.dataset.classId));
        };
      }

      btnGenerate.addEventListener('click', async () => {
        if (__solverRunning) {
          __stopRequested = true;
          if (globalInfo) globalInfo.textContent = 'DayandÄ±rÄ±lÄ±râ€¦';
          return;
        }

        const myRun = ++__runId;
        __solverRunning = true;
        __stopRequested = false;

        if (btnGenerate) btnGenerate.textContent = STOP_LABEL;

        try {
          let config = readConfig();
          config = prepareSolve(config);

          globalError.classList.add('hidden');
          globalError.textContent = '';

          if (globalInfo) globalInfo.textContent = 'AxtarÄ±ÅŸ baÅŸlayÄ±râ€¦ (tam hÉ™ll tapÄ±lanadÉ™k cÉ™hd edilÉ™cÉ™k)';

          const result = await buildUntilSolved(config, () => __stopRequested || myRun !== __runId);

          if (myRun !== __runId) return;

          renderTimetable(config, result);

          ensureVisibleStable(document.getElementById('resultCard'), { topGap: 18, bottomGap: 16 });

          const target = Number(result.targetHours) || Number(config._targetHours) || sumRequiredHours(config.lessons);
          const bestPlaced = result.placedCount || 0;
          const pct = target > 0 ? ((bestPlaced / target) * 100).toFixed(1) : '0.0';

          if (result.solved) {
            if (globalInfo) globalInfo.textContent =
              `CÉ™dvÉ™l 100% quruldu. (CÉ™hd: ${(result.attemptsUsed || 0).toLocaleString('az-AZ')})`;
          } else if (result.stopped) {
            if (globalInfo) globalInfo.textContent =
              `DayandÄ±rÄ±ldÄ±. Æn yaxÅŸÄ± nÉ™ticÉ™: ${bestPlaced}/${target} (${pct}%).`;
          } else {
            if (globalInfo) globalInfo.textContent = 'CÉ™dvÉ™l quruldu.';
          }
        } catch (err) {
          if (myRun !== __runId) return;
          showError(err.message || String(err));
          if (globalInfo) globalInfo.textContent = '';
        } finally {
          if (myRun === __runId) {
            __solverRunning = false;
            __stopRequested = false;
            if (btnGenerate) btnGenerate.textContent = GENERATE_LABEL;
          }
        }
      });

      // BaÅŸlanÄŸÄ±c nÃ¼munÉ™lÉ™r (istÉ™sÉ™n sil)
      addTeacherRow({ name: 'ÆhmÉ™dov Firdovsi', code: 'FÄ°R', weeklyMax: 24, dailyMax: 6, availableDays: [0,1,2,3,4] });
      addTeacherRow({ name: 'Ä°sfÉ™ndiyarlÄ± MÉ™zahir', code: 'MÆZ', weeklyMax: 24, dailyMax: 6, availableDays: [0,1,2,3,4] });

      addClassRow({ name: '5A', level: 'esas', shift: 'seher' });
      addClassRow({ name: '6A', level: 'esas', shift: 'seher' });

      addLessonRow({ className: '5A', subject: 'Riyaziyyat', teacher: 'FÄ°R', hours: 4, heavy: true, doubleMode: 'prefer' });
      addLessonRow({ className: '5A', subject: 'AzÉ™rbaycan dili', teacher: 'MÆZ', hours: 3, heavy: false, doubleMode: 'none' });

      // ilkin state
      syncTeacherDayVisibility(currentDaysCount());
      syncTeacherHourVisibility(currentLessonsPerDay());
    })();
  </script>
</body>
</html>
