<!doctype html>
<html lang="az">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KSQ/BSQ ‚Äî EduPlan</title>
<meta name="description" content="Sinif, f…ônn, n√∂v v…ô n√∂mr…ô √ºzr…ô KSQ/BSQ fayllarƒ±." />
<!-- Favicons & PWA (unified) -->
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" type="image/png" href="/favicon-32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/android-chrome-512x512.png" sizes="512x512">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0ea5e9">
<meta name="theme-color" content="#0ea5e9">

<script src="https://cdn.tailwindcss.com"></script>
<style>
/* ---------- Tema d…ôyi≈ü…ônl…ôri ---------- */
:root{
  --bg-from:#f8fafc; --bg-to:#ffffff; --text:#0f172a; --card:#ffffff; --muted:#475569; --border:#e2e8f0;
  --tab-track:#eef2f6; --pill:#e9edf3; --pill-text:#334155;
  --panel-min-h:320px; --panel-max-h:520px; --panel-pad-top:8px; --panel-pad-bottom:8px;
}
.dark{
  --bg-from:#0b1220; --bg-to:#0a0f1a; --text:#e2e8f0; --card:#0f172a; --muted:#cbd5e1; --border:#334155;
  --tab-track:#111827; --pill:#0f172a; --pill-text:#cbd5e1;
}

/* ---------- Layout qoruyucular ---------- */
:where(html, body, main, header, footer, section){ overflow-x:clip; min-width:0; }
select, input, button{ max-width:100%; }
html::before{ content:""; position:fixed; inset:0; z-index:-1;
  background:linear-gradient(to bottom,var(--bg-from),var(--bg-to)); }
html{ background:var(--bg-to); } html.dark{ background:#0a0f1a; }
body{ min-height:100svh; color:var(--text); }
.bg-white{ background-color:var(--card)!important; }
.text-slate-600,.text-slate-500{ color:var(--muted)!important; }
.text-slate-900{ color:var(--text)!important; }
.border-slate-200{ border-color:var(--border)!important; }
.backdrop-blur.bg-white\/70{ background-color:color-mix(in srgb,var(--card) 70%,transparent)!important; }

/* ---------- Premium select ---------- */
.select-premium{
  -webkit-appearance:none; appearance:none; background:var(--card); color:var(--text);
  border:1px solid var(--border); border-radius:12px; padding:10px 42px 10px 12px;
  line-height:1.25; box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--border) 35%,transparent);
  transition:border-color .18s, box-shadow .18s, transform .06s; cursor:pointer;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat:no-repeat; background-position:right 12px center; background-size:16px;
}
.select-premium:hover{ border-color:color-mix(in srgb,var(--border) 55%,transparent); }
.select-premium:focus{ outline:0; border-color:transparent; transform:translateY(-1px);
  box-shadow:0 0 0 1px color-mix(in srgb,var(--border) 45%,transparent), 0 0 0 4px rgba(34,211,238,.25); }
.dark .select-premium{ background:#0f172a; box-shadow:inset 0 0 0 1px #223049, 0 1px 0 rgba(255,255,255,.04); }
.dark .select-premium:focus{ box-shadow:0 0 0 1px #2f405c, 0 0 0 4px rgba(167,139,250,.22); }
select:invalid{ color:#9aa4b2; }
.add-shadow .bg-white:hover{ box-shadow:0 6px 16px rgba(0,0,0,.12);}
.dark .add-shadow .bg-white:hover{ box-shadow:0 6px 16px rgba(255,255,255,.15);}
/* Fancy Select √ºst√ºn…ô native select g√∂r√ºnm…ôsin */
select.select-premium.fs-native{
  position:absolute; inset:0; opacity:0; pointer-events:none;
}

/* Dark rejimd…ô kontrast v…ô border d√ºz…ôldilm…ôsi */
.dark .select-premium,
.dark .fs-btn{
  background:#0f172a !important;
  color:#e5e7eb !important;
  border-color:#253046 !important;
  box-shadow: inset 0 0 0 1px #223049, 0 1px 0 rgba(255,255,255,.04) !important;
}

/* Placeholder m…ôtninin r…ôngi (Sinfi se√ßin v…ô s.) */
select:invalid,
.fs-opt.is-placeholder{ color:#9aa4b2 !important; }

/* Fancy select menyusu h…ômi≈ü…ô √ºst qatda olsun, k…ôsilm…ôsin */
.fs-menu{ z-index:70 !important; }

/* ---------- Panel & bo≈ü hal ---------- */
.panel-card{ display:grid; grid-template-rows:auto minmax(0,1fr); min-height:var(--panel-min-h); border-radius:1rem; }
.panel-card > :nth-child(2){ padding-top:var(--panel-pad-top)!important; padding-bottom:var(--panel-pad-bottom)!important; }
.empty-light{ position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; }
.empty-light .card{ width:min(520px,100%); border:1px solid var(--border); background:var(--card); border-radius:16px; text-align:center; padding:22px 18px; box-shadow:0 6px 16px rgba(0,0,0,.06);}
.empty-light .icon{ width:44px; height:44px; border-radius:9999px; display:grid; place-items:center; margin:0 auto 8px;
  background:radial-gradient(closest-side, rgba(147,51,234,.12), transparent 70%), conic-gradient(from 180deg at 50% 50%, #22d3ee33, #a78bfa33, #22d3ee33);
  border:1px solid #e9eaf0; font-size:20px; }
.empty-light .title{ font-weight:600; font-size:15px; }
.empty-light .desc{ font-size:13px; color:var(--muted); margin-top:4px; }
.empty-overlay{ position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; background:transparent; }
.empty-overlay .inner{ width:min(520px,100%); border:1px solid rgba(255,255,255,.22); background:rgba(2,6,23,.55);
  border-radius:16px; backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px); padding:22px 18px; text-align:center; box-shadow:0 8px 22px rgba(0,0,0,.35); }
.empty-overlay .icon{ width:44px; height:44px; border-radius:9999px; display:grid; place-items:center; margin:0 auto 8px;
  background:radial-gradient(closest-side, rgba(255,255,255,.14), transparent 70%), conic-gradient(from 180deg at 50% 50%, #22d3ee33, #a78bfa33, #22d3ee33); border:1px solid rgba(255,255,255,.22); font-size:20px; }
.dark .empty-light{ display:none; }
/* KSQ/BSQ n…ôtic…ô paneli ‚Äì h…ôr zaman eyni h√ºnd√ºrl√ºkd…ô olsun */
#ksq-results-card{
  min-height: 320px;
  display:flex;
  flex-direction:column;
}
@media (min-width: 768px){
  #ksq-results-card{
    min-height: 340px;
  }
}

/* ƒ∞√ß grid kartƒ±n h√ºnd√ºrl√ºy√ºn√º doldursun */
#ksq-results{
  flex:1;
}

/* ---------- Buttons ---------- */
.ep-btn-primary{ display:inline-block; width:100%; padding:.65rem 1rem; border-radius:.75rem; font-weight:600; font-size:.9rem; color:#fff;
  background:linear-gradient(90deg,#1e3a8a 0%,#4f46e5 50%,#9333ea 100%); box-shadow:0 4px 12px rgba(79,70,229,.35);
  transition:transform .15s, box-shadow .25s, filter .25s; }
.ep-btn-primary:hover{ transform:translateY(-2px); filter:brightness(1.08); box-shadow:0 6px 18px rgba(147,51,234,.45); }
.dark .ep-btn-primary{ background:linear-gradient(90deg,#312e81 0%,#4338ca 50%,#7e22ce 100%); box-shadow:0 4px 10px rgba(255,255,255,.1); }
/* Toggle ‚Äì index g√∂r√ºn√º≈ü√º */
#dark-toggle:checked + span { background:#334155; }
#dark-toggle:checked + span .dot { transform: translateX(16px); }

/* --- Scrollbar (orta qalƒ±nlƒ±q) --- */
:root { --sb-size: 12px; }        /* 10‚Äì14px arasƒ± rahatdƒ±r */
@media (min-width: 1024px){
  :root { --sb-size: 12px; }      /* ist…ôs…ôn 14px d…ô ed…ô bil…ôrs…ôn */
}

html, body{
  /* Firefox */
  scrollbar-width: auto;          /* thin deyil */
  scrollbar-color: rgba(110,110,120,.45) transparent;
}

/* WebKit (Chrome/Edge/Safari) */
::-webkit-scrollbar{
  width: var(--sb-size);
  height: var(--sb-size);
}
::-webkit-scrollbar-thumb{
  background: rgba(110,110,120,.50);
  border-radius: 9999px;
  border: 3px solid transparent;      /* i√ßini bir az ‚Äúbo≈ü‚Äù g√∂st…ôrir */
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover{
  background: rgba(110,110,120,.70);
}
::-webkit-scrollbar-track{ background: transparent; }

/* Dark ton */
.dark html, .dark body{
  scrollbar-color: rgba(185,195,255,.35) transparent;
}
.dark ::-webkit-scrollbar-thumb{
  background: rgba(185,195,255,.35);
  border: 3px solid transparent;
}
.dark ::-webkit-scrollbar-thumb:hover{
  background: rgba(185,195,255,.55);
}


/* Settings popover ekrana sabitlensin v…ô h…ômi≈ü…ô √ºst qatda qalsƒ±n */
/* === Premium Fancy Select (index kimi) === */
.fs-wrap{position:relative; display:block; width:100%;}
select.select-premium.fs-native{
  position:absolute; inset:0; width:100%; height:100%;
  opacity:0; pointer-events:none;           /* native a√ßƒ±lmasƒ±n */
}
.fs-btn{
  -webkit-appearance:none; appearance:none; width:100%;
  background: var(--card); color: var(--text);
  border:1px solid var(--border); border-radius:12px;
  padding:10px 42px 10px 12px; line-height:1.25; text-align:left;
  font-size:0.875rem; cursor:pointer;
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--border) 35%, transparent), 0 1px 0 rgba(0,0,0,.05);
  transition:border-color .18s, box-shadow .18s, transform .06s;
}
.fs-btn:hover{ border-color: color-mix(in srgb, var(--border) 55%, transparent); }
.fs-btn:focus-visible{
  outline:0; transform: translateY(-1px);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--border) 45%, transparent),
              0 0 0 4px rgba(34,211,238,.25), 0 6px 16px rgba(0,0,0,.08);
}
/* saƒüdakƒ± ox */
.fs-btn::after{
  content:""; position:absolute; right:12px; top:50%; translate:0 -50%;
  width:16px; height:16px;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat:no-repeat; background-size:16px 16px; opacity:.9; pointer-events:none;
}
.fs-menu{
  position:absolute; left:0; right:0; top:calc(100% + 6px); z-index:70;
  background:var(--card); color:var(--text);
  border:1px solid var(--border); border-radius:12px;
  box-shadow:0 12px 28px rgba(0,0,0,.12);
  max-height:260px; overflow:auto; padding:6px; display:none;
}
.fs-wrap[aria-expanded="true"] .fs-menu{ display:block; }
.fs-opt{ padding:9px 10px; border-radius:10px; cursor:pointer; font-size:0.875rem; }
.fs-opt.is-placeholder{ color:#9aa4b2; font-style:italic; }
.fs-opt:hover{ background:rgba(148,163,184,.12); }

/* Dark tonlarƒ± */
.dark .fs-btn{ background:#0f172a; box-shadow: inset 0 0 0 1px #223049, 0 1px 0 rgba(255,255,255,.04); }
.dark .fs-btn:focus-visible{
  box-shadow: 0 0 0 1px #2f405c, 0 0 0 4px rgba(167,139,250,.22), 0 10px 22px rgba(0,0,0,.35);
}
.dark .fs-btn::after{
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23cbd5e1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
}
.dark .fs-menu{ background:#0f172a; border-color:#253046; box-shadow:0 16px 32px rgba(0,0,0,.45); }
.dark .fs-opt:hover{ background:rgba(148,163,184,.15); }
/* CSS: ikinci ≈ü…ôkl…ô b…ônz…ôr, daha inc…ô v…ô yuxarƒ±ya yaxƒ±n g√∂r√ºn√º≈ü */
.filter-label{
  display:block;
  font-size:0.875rem;          /* text-sm */
  line-height:1.25rem;
  font-weight:500;
  color:var(--muted);          /* a√ßƒ±q tonda boz */
  margin-bottom:4px;           /* select-…ô m…ôsaf…ô */
}
.dark .filter-label{ color:#cbd5e1; }  /* dark √º√ß√ºn */
/* kartƒ±n ilk label-i √º√ß√ºn √ºst bo≈üluƒüu sƒ±xla≈üdƒ±r */
.panel-card .p-4 .filter-label:first-of-type,
.panel-card .pt-2 .filter-label:first-of-type{ margin-top:2px; }

/* --- Dark rejim kontrast fixl…ôri (yalnƒ±z KSQ n…ôtic…ô kartƒ±nda) --- */

/* 1) n…ôtic…ô sayƒ± badge-i */
.dark #ksq-count{
  background: rgba(148,163,184,.18) !important;
  border-color: rgba(148,163,184,.35) !important;
  color: #e5e7eb !important;
}

/* 2) fayl ikonunun fonu (soldakƒ± 36x36-lƒ±q kvadrat) */
.dark #ksq-results .h-8.w-8.rounded-lg{
  background: linear-gradient(180deg, rgba(148,163,184,.20), rgba(148,163,184,.10)) !important;
  border: 1px solid rgba(148,163,184,.30) !important;
  color:#e5e7eb !important;
}

/* 3) "DOCX/PDF" pill-i */
.dark #ksq-results span.rounded-full.bg-slate-100{
  background: rgba(148,163,184,.16) !important;
  border-color: rgba(148,163,184,.38) !important;
  color: #e5e7eb !important;
}

/* (ist…ôy…ô baƒülƒ±) PDF/DOCX √º√ß√ºn bir az r…ông ipucu */
.dark #ksq-results span.rounded-full.bg-slate-100[data-ext="PDF"]{
  background: rgba(239,68,68,.18) !important;
  border-color: rgba(239,68,68,.40) !important;
}
.dark #ksq-results span.rounded-full.bg-slate-100[data-ext="DOCX"]{
  background: rgba(59,130,246,.18) !important;
  border-color: rgba(59,130,246,.40) !important;
}
/* M…ôlumat b√∂lm…ôsi √º√ß√ºn s…ôrt r…ông m…ôcburiyy…ôti (√ß…ôr√ßiv…ô yoxdur) */
.info-section { background: transparent !important; }
.info-section, .info-section p, .info-section h2, .info-section a {
  color: var(--text) !important;      /* light: #0f172a, dark: #e2e8f0 */
}
/* === Unified Footer (lock style) === */
.ep-footer{
  border-top: 1px solid var(--border) !important;
  color: var(--muted) !important;
  background: transparent !important;
}
.ep-footer .wrap{
  max-width: 80rem; /* max-w-7xl */
  margin-inline: auto;
  padding: 1rem 1rem; /* sm:px-6 lg:px-8 py-4 √º√ß√ºn sabitlik */
}
@media (min-width: 640px){
  .ep-footer .wrap{ padding-left: 1.5rem; padding-right: 1.5rem; }
}
@media (min-width: 1024px){
  .ep-footer .wrap{ padding-left: 2rem; padding-right: 2rem; }
}
.ep-footer .row{
  display: flex; flex-direction: column; gap: .75rem;
}
@media (min-width: 640px){
  .ep-footer .row{ flex-direction: row; align-items: center; justify-content: space-between; }
}
.ep-footer .brand{
  color: var(--text) !important; /* h…ôr yerd…ô eyni ton */
  font-weight: 500;
}
.ep-footer a{
  color: inherit; text-decoration: none;
}
.ep-footer a:hover{
  text-decoration: underline;
}

/* Dark t…ônziml…ôm…ôl…ôri */
.dark .ep-footer{
  border-top-color: #334155 !important; /* var(--border) il…ô uyƒüundur */
  color: #94a3b8 !important;            /* linkl…ôr d…ô eyni tonu miras alƒ±r */
}
.dark .ep-footer .brand{
  color: #e2e8f0 !important;
}
/* Footer m…ôtn √∂l√ß√ºs√º ‚Äî b√∂y√ºk qalsƒ±n, amma adaptiv */
.footer-text{
  font-size: clamp(13.5px, 2.6vw, 15px); /* min 13.5px, max 15px */
  line-height: 1.45;
  white-space: normal;         /* s…ôrb…ôst qƒ±rƒ±lsƒ±n */
  text-wrap: balance;          /* s…ôtir tarazlƒ±ƒüƒ± */
}

/* Birlikd…ô qalmalƒ± hiss…ôl…ôr (s…ôtir…ô d√º≈üm…ôsin) */
.footer-text .chunk{ white-space: nowrap; }
/* === Download pill button (PP-d…ôki kimi) === */
.ep-dl-btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.6rem .95rem;
  border-radius:9999px;
  font-weight:600; font-size:.9rem; line-height:1;
  color:#fff; background:#0f172a;                 /* t√ºnd, vurƒüulu */
  box-shadow:0 6px 16px rgba(2,6,23,.18);
  transition:transform .15s, box-shadow .2s, filter .2s;
}
.ep-dl-btn:hover{ transform:translateY(-1px); filter:brightness(1.06); box-shadow:0 10px 22px rgba(2,6,23,.24); }
.ep-dl-btn:active{ transform:translateY(0); filter:brightness(0.98); }
.ep-dl-btn svg{ width:18px; height:18px; flex:0 0 auto; }

/* Dark rejimd…ô bir az daha ‚Äúmavi‚Äù vurƒüu */
.dark .ep-dl-btn{
  background:#1e3a8a; /* indigo-800 */
  box-shadow:0 6px 16px rgba(30,58,138,.35);
}
.dark .ep-dl-btn:hover{ box-shadow:0 12px 26px rgba(30,58,138,.45); }
/* Kart daxilind…ô tam m…ôrk…ôz (loading / Fayl yoxdur v…ô s.) */
.panel-center-overlay{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  pointer-events:none;  /* klikl…ôri altda qalan elementl…ôr…ô √∂t√ºrm…ôsin dey…ô ist…ôs…ôn auto da ed…ô bil…ôrs…ôn */
}
.panel-center-overlay > *{
  pointer-events:auto; /* i√ßind…ôki d√ºym…ô/m…ôtn normal i≈ül…ôsin */
}

</style>
</head>
<body class="min-h-screen text-slate-900 relative">
  <!-- dekor -->
  <div class="pointer-events-none absolute inset-0 -z-10 overflow-hidden">
    <div class="absolute -top-24 -right-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-indigo-200/50 to-emerald-200/50"></div>
    <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-amber-200/40 to-pink-200/40"></div>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-50 backdrop-blur bg-white/70 border-b border-slate-200">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
<div class="flex items-center gap-3">
  <a href="/" class="flex items-center gap-3 group focus:outline-none focus:ring-2 focus:ring-indigo-400 rounded-xl">
    <img id="site-logo" src="assets/ep-favicon-light.svg" class="h-9 w-9 rounded-2xl shadow-sm" alt="EduPlan" />
    <span class="font-semibold tracking-tight group-hover:underline">EduPlan AZ</span>
  </a>
</div>

     <div class="relative flex items-center gap-3" id="header-controls">
        <button id="btn-settings" class="rounded-2xl border p-2 text-base leading-none"
          aria-label="Settings" title="Settings">‚öôÔ∏è</button>
        <!-- Settings popover -->
<div id="settings-panel"
     class="hidden fixed right-4 top-[72px] z-[80] w-64 rounded-2xl border border-slate-200 bg-white p-4 shadow-lg">
    <div class="flex items-center justify-between">
      <div class="text-sm">üåô Qaranlƒ±q rejim</div>
      <label class="inline-flex items-center cursor-pointer">
        <input id="dark-toggle" type="checkbox" class="sr-only">
        <span class="w-10 h-6 bg-slate-200 rounded-full relative transition">
          <span class="dot absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition"></span>
        </span>
      </label>
    </div>
  </div>
</div>
    </div>
  </header>

  <!-- Main (yalnƒ±z KSQ/BSQ) -->
  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
    <!-- Qƒ±sa ba≈ülƒ±q v…ô a√ßƒ±qlama -->
<section class="mb-6 sm:mb-8">
  <h1 class="text-2xl sm:text-3xl font-semibold text-slate-900 dark:text-white">
    KSQ/BSQ fayllarƒ±
  </h1>
  <p class="mt-2 text-slate-600 dark:text-slate-300">
    Sinif, f…ônn, n√∂v v…ô n√∂mr…ôy…ô g√∂r…ô fayllarƒ± se√ßin v…ô birba≈üa y√ºkl…ôyin.
  </p>
</section>

    <section class="add-shadow">
      <div class="rounded-2xl shadow-sm transition border bg-white panel-card">
        <div class="p-4 border-b"><h3 class="font-semibold">KSQ/BSQ</h3></div>

        <div class="px-4 pt-2 pb-4 grid lg:grid-cols-3 gap-6 items-stretch">
          <!-- Sol filtr s√ºtunu -->
          <div class="space-y-4 overflow-visible">
            <div>
              <label class="filter-label">Sinif</label>
              <select id="grade" class="select-premium w-full mt-1"></select>
            </div>
            <div>
              <label class="filter-label">F…ônn</label>
              <select id="subject" class="select-premium w-full mt-1"></select>
            </div>
            <div>
              <label class="filter-label">N√∂v</label>
              <select id="ksqType" class="select-premium w-full mt-1"></select>
            </div>
            <div>
              <label class="filter-label">N√∂mr…ô</label>
              <select id="examIndex" class="select-premium w-full mt-1"></select>
            </div>
          </div>

          <!-- Saƒü n…ôtic…ô kartƒ± -->
          <div class="lg:col-span-2 min-w-0">
            <div id="ksq-results-card" class="relative w-full rounded-xl border border-slate-200 bg-white text-sm overflow-clip">
              <div id="ksq-count-row" class="hidden items-center justify-end mb-3 px-4 pt-4">
                <span id="ksq-count" class="inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600 border">0</span>
              </div>
              <div id="ksq-results" class="grid sm:grid-cols-2 gap-3 p-4"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
<!-- KSQ/BSQ haqqƒ±nda m…ôlumat (kart i√ßind…ô, 2-ci ≈ü…ôkild…ôki kimi) -->
<section class="mt-10 px-4 sm:px-6 lg:px-8 info-section relative z-[1]">
  <h2 class="text-2xl sm:text-3xl font-semibold mb-4">M…ôlumat</h2>

  <div class="space-y-3 text-base leading-7">
    <p>
      KSQ (Ki√ßik Summativ Qiym…ôtl…ôndirm…ô) v…ô BSQ (B√∂y√ºk Summativ Qiym…ôtl…ôndirm…ô) √ºmumi t…ôhsil sistemind…ô t…ôtbiq olunan
      qiym…ôtl…ôndirm…ô formalarƒ±dƒ±r. Qiym…ôtl…ôndirm…ôl…ôr d√∂vl…ôt standartlarƒ±na uyƒüun olaraq ≈üagirdl…ôrin bilik, bacarƒ±q v…ô
      kompetensiyalarƒ±nƒ± obyektiv √∂l√ßm…ôyi h…ôd…ôfl…ôyir.
    </p>
    <p>
      KSQ ad…ôt…ôn yarƒ±mild…ô bir ne√ß…ô d…ôf…ô ke√ßirilir v…ô konkret m√∂vzularƒ± …ôhat…ô edir. Test v…ô ya yazƒ±lƒ± i≈ü formatƒ±nda ola bil…ôr
      v…ô cari m√∂vzular √ºzr…ô anlayƒ±≈ü s…ôviyy…ôsini √∂l√ß√ºr.
    </p>
    <p>
      BSQ yarƒ±milin sonunda ke√ßiril…ôn yekun qiym…ôtl…ôndirm…ôdir. Geni≈ü m√∂vzu dair…ôsini …ôhat…ô edir v…ô yarƒ±mil boyu …ôld…ô edil…ôn
      bilik v…ô bacarƒ±qlarƒ± √ºmumi ≈ü…ôkild…ô yoxlayƒ±r.
    </p>
    <p>
      EduPlan.az fayllarƒ± sinif, f…ônn, n√∂v (KSQ/BSQ) v…ô n√∂mr…ô √ºzr…ô t…ôsnifl…ô≈üdirir. Se√ßim etdikd…ôn sonra materiallarƒ± birba≈üa
      y√ºkl…ôy…ô bil…ôrsiniz.
    </p>
    <p>
      Fayllar …ôsas…ôn PDF v…ô DOCX formatƒ±ndadƒ±r, qeydiyyat t…ôl…ôb etmir v…ô m√º…ôlliml…ôr, ≈üagirdl…ôr, t…ôhsil i≈ü√ßil…ôri √º√ß√ºn a√ßƒ±qdƒ±r.
    </p>
    <p>
      H…ôr hansƒ± uyƒüunsuzluq a≈ükar ets…ôniz, <a href="mailto:eduplan.az@gmail.com" class="underline">eduplan.az@gmail.com</a>
      √ºnvanƒ±na yazƒ±n. M√ºraci…ôtl…ôr n…ôz…ôrd…ôn ke√ßirilir v…ô fayllar yenil…ônir.
    </p>
    <p class="mb-0">
      Platforma pulsuzdur v…ô yalnƒ±z t…ôdris m…ôqs…ôdi da≈üƒ±yƒ±r. G…ôl…ôc…ôkd…ô funksiyalar geni≈ül…ôndiril…ô bil…ôr.
    </p>

  </div>
</section>

<footer class="mt-12 border-t border-slate-200/70 dark:border-slate-700/60">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-4 text-sm
              text-slate-600 dark:text-slate-400">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
<div class="footer-text text-center sm:text-left leading-6">
  <span class="chunk">¬© <span id="year"></span> <span class="font-medium text-slate-700 dark:text-slate-300">EduPlan AZ</span></span>
  <span class="chunk"> ¬∑ B√ºt√ºn h√ºquqlar qorunur</span>
</div>


      <!-- Linkl…ôr mobil-d…ô iki s…ôtir…ô rahatca ke√ß…ô bilsin -->
      <nav class="flex flex-wrap items-center justify-center gap-x-5 gap-y-2">
        <a href="/about.html"   class="hover:underline">Haqqƒ±mƒ±zda</a>
        <a href="/terms.html"   class="hover:underline">≈û…ôrtl…ôr</a>
        <a href="/privacy.html" class="hover:underline">M…ôxfilik</a>
      </nav>
    </div>
  </div>
</footer>




  </main>



<script>
/* ------------------ STATE & DATA ------------------ */
const FEED_URL = "https://script.google.com/macros/s/AKfycbxnt6tDu5YJ_P_FUgobNTu_Q-2dbyZjaXSWwyjIKysTJ3UwnWZKqm0ZxoNwoyT4M0w7/exec";
const translations = {
  subjects: {
    az:'Az…ôrbaycan dili', lit:'∆èd…ôbiyyat', science:'T…ôbi…ôt', eng:'ƒ∞ngilis dili', rus:'Rus dili', math:'Riyaziyyat',
    physics:'Fizika', chemistry:'Kimya', biology:'Biologiya',
    az_history:'Az…ôrbaycan tarixi', world_history:'√úmumi tarix', geography:'Coƒürafiya',
    it:'ƒ∞nformatika', life:'H…ôyat bilgisi', tech:'Texnologiya', art:'T…ôsviri inc…ôs…ôn…ôt', music:'Musiqi',
    pe:'Fiziki t…ôrbiy…ô', premilitary:'√áaƒüƒ±rƒ±≈üaq…ôd…ôrki hazƒ±rlƒ±q'
  }
};
const subjectKeysByGrade = {
  I:['az','life','math','eng','rus','art','music','pe','tech','it'],
  II:['az','life','math','eng','rus','art','music','pe','tech','it'],
  III:['az','life','math','eng','rus','art','music','pe','tech','it'],
  IV:['az','life','math','eng','rus','art','music','pe','tech','it'],
  V:['az','lit','eng','rus','math','science','it','az_history','geography','art','music','pe','tech'],
  VI:['az','lit','eng','rus','math','physics','science','it','az_history','geography','art','music','pe','tech'],
  VII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
  VIII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
  IX:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
  X:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
  XI:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
};
const state = {
  grade: null,
  subject: null,
  ksqType: null,
  examIndex: null,
  catalog: [],
  isCatalogLoaded: false   // <-- YENƒ∞
};

const $ = s => document.querySelector(s);

/* ------------------ THEME (settings) ------------------ */
const settingsBtn = $('#btn-settings'), panel = $('#settings-panel'), darkToggle = $('#dark-toggle');
const mq = window.matchMedia('(prefers-color-scheme: dark)');
const saved = localStorage.getItem('theme');
const initialTheme = saved ? saved : (mq.matches ? 'dark' : 'light');
document.documentElement.classList.toggle('dark', initialTheme === 'dark');
darkToggle.checked = (initialTheme === 'dark');
applyThemeAssets(initialTheme);
document.addEventListener('click', e=>{ if(!panel.contains(e.target) && !settingsBtn.contains(e.target)) panel.classList.add('hidden'); });
settingsBtn.addEventListener('click', (e) => {
  e.stopPropagation();
  panel.classList.toggle('hidden');
  if (!panel.classList.contains('hidden')) {
  }
});

darkToggle.addEventListener('change', e=>{
  const theme = e.target.checked ? 'dark' : 'light';
  document.documentElement.classList.toggle('dark', theme === 'dark');
  localStorage.setItem('theme', theme);
  applyThemeAssets(theme);
  refreshEmptyPlaceholders();
});
mq.addEventListener?.('change', e=>{
  if(!localStorage.getItem('theme')){
    const theme = e.matches ? 'dark' : 'light';
    document.documentElement.classList.toggle('dark', theme === 'dark');
    darkToggle.checked = (theme === 'dark');
    applyThemeAssets(theme); refreshEmptyPlaceholders();
  }
});
function applyThemeAssets(theme){
  $('#site-logo').src = theme === 'dark' ? 'assets/ep-favicon-dark.svg' : 'assets/ep-favicon-light.svg';
}


/* ------------------ HELPERS ------------------ */
function option(el,v,t){ const o=document.createElement('option'); o.value=v; o.textContent=t; el.appendChild(o); }
function addPlaceholder(selectEl, label){
  const o=document.createElement('option'); o.value=""; o.textContent=label; o.disabled=true; o.selected=true; o.hidden=true;
  selectEl.appendChild(o); selectEl.required = true;
}
function subjectsFor(grade){ const keys = subjectKeysByGrade[grade] || Object.keys(translations.subjects); return keys.map(k=>translations.subjects[k]).filter(Boolean); }
function allChosenKSQ(){ return !!(state.grade && state.subject && state.ksqType && state.examIndex); }
function renderLoadingBlock(title, subtitle) {
  return `
    <div class="w-full h-full grid place-items-center">
      <div class="flex flex-col items-center justify-center gap-2 text-slate-500 dark:text-slate-300 text-center">
        <div class="inline-flex h-11 w-11 items-center justify-center rounded-full
                    bg-gradient-to-tr from-sky-500/10 via-indigo-500/10 to-violet-500/10
                    border border-slate-200/70 dark:border-slate-600/70 shadow-sm">
          <div class="h-4 w-4 rounded-full border-2 border-sky-400 dark:border-sky-300
                      border-t-transparent animate-spin"></div>
        </div>
        <div class="text-sm font-semibold tracking-tight">
          ${title}
        </div>
        <p class="text-xs text-slate-400 dark:text-slate-500">
          ${subtitle}
        </p>
      </div>
    </div>
  `;
}


/* ------------------ RENDER SELECTS ------------------ */
function renderSelects(){
  const grades = ['I','II','III','IV','V','VI','VII','VIII','IX','X','XI'];
  const gradeEl = $('#grade'); gradeEl.innerHTML=''; addPlaceholder(gradeEl,'Sinfi se√ßin'); grades.forEach(g=>option(gradeEl,g,g)); gradeEl.value = state.grade ?? "";
  const subjEl = $('#subject'); subjEl.innerHTML=''; addPlaceholder(subjEl,'F…ônni se√ßin'); if(state.grade){ subjectsFor(state.grade).forEach(s=>option(subjEl,s,s)); } subjEl.value = state.subject ?? "";
  const typeEl = $('#ksqType'); typeEl.innerHTML=''; addPlaceholder(typeEl,'N√∂v√º se√ßin'); option(typeEl,'KSQ','KSQ'); option(typeEl,'BSQ','BSQ'); typeEl.value = state.ksqType ?? "";
  const idxEl = $('#examIndex'); idxEl.innerHTML=''; addPlaceholder(idxEl,'N√∂mr…ôni se√ßin');
  if(state.ksqType==='KSQ'){ for(let i=1;i<=10;i++) option(idxEl,String(i),String(i)); }
  else if(state.ksqType==='BSQ'){ ['1','2'].forEach(i=>option(idxEl,i,i)); }
  idxEl.value = state.examIndex ?? ""; idxEl.disabled = !state.ksqType;
  enhanceAllFancySelects();
}

/* ------------------ PLACEHOLDER ------------------ */
function showEmpty(cardId,{icon='üóÇÔ∏è',title='',desc=''}) {
  const card = document.getElementById(cardId);
  if (!card || card.querySelector('.empty-overlay') || card.querySelector('.empty-light')) return;

  const isDark = document.documentElement.classList.contains('dark');

  if (isDark) {
    const overlay = document.createElement('div');
    overlay.className = 'empty-overlay';
    overlay.innerHTML = `
      <div class="w-full h-full grid place-items-center px-6">
        <div class="inner">
          <div class="icon">${icon}</div>
          <div class="title">${title}</div>
          <div class="desc">${desc}</div>
        </div>
      </div>`;
    card.appendChild(overlay);
  } else {
    const box = document.createElement('div');
    box.className = 'empty-light';
    box.innerHTML = `
      <div class="card">
        <div class="icon">${icon}</div>
        <div class="title">${title}</div>
        <div class="desc">${desc}</div>
      </div>`;
    card.appendChild(box);
  }
}

function hideEmpty(cardId){
  const c = document.getElementById(cardId);
  if (!c) return;

  c.querySelector('.empty-overlay')?.remove();
  c.querySelector('.empty-light')?.remove();
  // min-h klasslarƒ±nƒ± artƒ±q silmirik, √ß√ºnki CSS il…ô sabitdir
}

function refreshEmptyPlaceholders(){
  if(!allChosenKSQ()){ hideEmpty('ksq-results-card'); showEmpty('ksq-results-card',{icon:'üóÇÔ∏è',title:'Z…ôhm…ôt olmasa se√ßim edin',desc:'Sinif, f…ônn, n√∂v v…ô n√∂mr…ôni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.'}); }
}
  
function showCenter(cardId, innerHtml){
  const card = document.getElementById(cardId);
  if (!card) return;
  hideCenter(cardId);
  const overlay = document.createElement('div');
  overlay.className = 'panel-center-overlay';
  overlay.innerHTML = innerHtml;
  card.appendChild(overlay);
}
function hideCenter(cardId){
  const card = document.getElementById(cardId);
  card?.querySelector('.panel-center-overlay')?.remove();
}


/* ------------------ RESULTS ------------------ */
function buildTitle(it){ const format=(it.ext||'FILE').toUpperCase(); return `${it.grade} ¬∑ ${it.subject} ¬∑ ${it.type}-${it.index} ¬∑ ${format}`; }
function renderKSQ(){
  const wrap = $('#ksq-results');
  wrap.innerHTML = '';
  hideCenter('ksq-results-card');   // …ôvv…ôlki overlay-i sil

  // Kataloq h…ôl…ô g…ôlm…ôyibs…ô ‚Äì loading tam m…ôrk…ôzd…ô
  if (!state.isCatalogLoaded) {
    showCenter(
      'ksq-results-card',
      renderLoadingBlock(
        'Fayllar hazƒ±rlanƒ±r‚Ä¶',
        'Z…ôhm…ôt olmasa bir ne√ß…ô saniy…ô g√∂zl…ôyin.'
      )
    );
    return;
  }

  const list = state.catalog.filter(it =>
    it.type === state.ksqType &&
    it.grade === state.grade &&
    it.subject === state.subject &&
    it.index === state.examIndex
  );

  $('#ksq-count').textContent = list.length;

  // He√ß bir fayl tapƒ±lmadƒ± ‚Äì "Fayl yoxdur" tam m…ôrk…ôzd…ô
  if (!list.length) {
    showCenter(
      'ksq-results-card',
      `
      <div class="rounded-lg border border-dashed border-slate-300 px-6 py-4
                  text-slate-500 text-center bg-white/80 dark:bg-slate-900/60">
        Fayl yoxdur
      </div>
      `
    );
    return;
  }

  // Fayllar var ‚Äì normal grid
  const gridEl = $('#ksq-results');
  const centerFew = (list.length > 0 && list.length <= 2);

  gridEl.className = 'grid sm:grid-cols-2 gap-3 p-4';
  gridEl.classList.toggle('min-h-[240px]', centerFew);
  gridEl.classList.toggle('place-content-center', centerFew);
  gridEl.classList.toggle('justify-items-center', centerFew);

  list.forEach(it=>{
    const card = document.createElement('div');
    card.className = 'group rounded-xl p-[1px] bg-gradient-to-br from-slate-200 to-slate-100';
    card.innerHTML = `
      <div class="rounded-[11px] p-4 bg-white shadow-sm group-hover:shadow-md transition">
        <div class="flex items-start gap-3">
          <div class="h-8 w-8 rounded-lg bg-slate-100 grid place-items-center">üìÑ</div>
          <div class="flex-1">
            <div class="text-sm font-medium break-words">${buildTitle(it)}</div>
            <div class="mt-1">
              <span class="rounded-full bg-slate-100 px-2 py-0.5 text-[10px] border"
                    data-ext="${(it.ext||'FILE').toUpperCase()}">
                ${(it.ext||'FILE').toUpperCase()}
              </span>
            </div>
            <div class="mt-3">
              <a href="${it.dl}" class="ep-dl-btn" download>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                  <polyline points="7 10 12 15 17 10"/>
                  <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Y√ºkl…ô
              </a>
            </div>
          </div>
        </div>
      </div>`;
    gridEl.appendChild(card);
  });
}

function toggleResults(){
  const gridKSQ = $('#ksq-results');
  const countRowK = $('#ksq-count-row');

  hideCenter('ksq-results-card');   // …ôvv…ôlki overlayi g√∂t√ºr

  if(allChosenKSQ()){
    hideEmpty('ksq-results-card');
    countRowK?.classList.remove('hidden');
    renderKSQ();
  }else{
    countRowK?.classList.add('hidden');
    gridKSQ.innerHTML='';
    showEmpty('ksq-results-card',{
      icon:'üóÇÔ∏è',
      title:'Z…ôhm…ôt olmasa se√ßim edin',
      desc:'Sinif, f…ônn, n√∂v v…ô n√∂mr…ôni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.'
    });
  }
}


/* ------------------ FEED ------------------ */
async function loadAllFromMaterials(){
  // yeni sorƒüu ba≈ülayanda "hazƒ±rlanƒ±r" statusuna qaytar
  state.isCatalogLoaded = false;

  try{
    const res = await fetch(FEED_URL,{cache:'no-store'});
    const catalog = await res.json();
    state.catalog = Array.isArray(catalog) ? catalog : [];
    state.isCatalogLoaded = true;
    toggleResults(); // se√ßim varsa n…ôtic…ôl…ôr yenil…ônsin
  }catch(e){
    state.isCatalogLoaded = true; // artƒ±q sorƒüu bitib
    if(allChosenKSQ()){
      $('#ksq-results').innerHTML =
        `<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">
          X…ôta: ${e.message}
        </div>`;
    }
  }
}


function enhanceFancySelect(select){
  // …ôvv…ôl qurulubsa t…ômizl…ô
  if (select.dataset.fancyMounted === '1') {
    const old = select.parentElement?.classList.contains('fs-wrap') ? select.parentElement : null;
    if (old) old.replaceWith(select);
    select.dataset.fancyMounted = '0';
  }

  const wrap = document.createElement('div');
  wrap.className = 'fs-wrap';
  wrap.setAttribute('aria-expanded','false');

  const btn = document.createElement('button');
  btn.type = 'button';
  btn.className = 'fs-btn';                // ‚úÖ index kimi
  btn.textContent = select.options[select.selectedIndex]?.text || select.getAttribute('placeholder') || 'Se√ßin';

  const menu = document.createElement('div');
  menu.className = 'fs-menu';

  Array.from(select.options).forEach((o)=>{
    const item = document.createElement('div');
    item.className = 'fs-opt' + (o.disabled && o.hidden ? ' is-placeholder' : '');
    item.setAttribute('role','option');
    item.textContent = o.text;
    item.addEventListener('click', ()=>{
      Array.from(select.options).forEach(op => op.selected = (op === o));
      select.value = o.value;
      select.dispatchEvent(new Event('change', {bubbles:true}));
      btn.textContent = o.text;
      wrap.setAttribute('aria-expanded','false');
    });
    menu.appendChild(item);
  });

  // native select formda qalsƒ±n, amma ƒ∞NTERAKTƒ∞V olmasƒ±n
  select.classList.add('fs-native');
  select.tabIndex = -1;
  select.setAttribute('aria-hidden','true');

  // DOM
  select.parentNode.insertBefore(wrap, select);
  wrap.appendChild(btn);
  wrap.appendChild(select);
  wrap.appendChild(menu);
  select.dataset.fancyMounted = '1';

  // a√ß/baƒüla (mousedown + click ‚Äî Safari/Win fix)
  const toggle = (open) => wrap.setAttribute('aria-expanded', open ? 'true' : 'false');
  btn.addEventListener('mousedown', (e)=>{ e.preventDefault(); }); // native fokusun qar≈üƒ±sƒ±nƒ± al
  btn.addEventListener('click', (e)=>{
    e.stopPropagation();
    const open = wrap.getAttribute('aria-expanded') === 'true';
    document.querySelectorAll('.fs-wrap[aria-expanded="true"]').forEach(w=>w.setAttribute('aria-expanded','false'));
    toggle(!open);
  });
  document.addEventListener('click', ()=> toggle(false));
  wrap.addEventListener('keydown', (e)=>{ if(e.key==='Escape') toggle(false); });
}

function enhanceAllFancySelects(){ document.querySelectorAll('select.select-premium').forEach(enhanceFancySelect); }



/* ------------------ Events & init ------------------ */
document.getElementById('year').textContent = new Date().getFullYear();
renderSelects(); refreshEmptyPlaceholders(); loadAllFromMaterials();

document.getElementById('grade').addEventListener('change', e=>{ state.grade=e.target.value||null; state.subject=null; renderSelects(); toggleResults(); });
document.getElementById('subject').addEventListener('change', e=>{ state.subject=e.target.value||null; toggleResults(); });
document.getElementById('ksqType').addEventListener('change', e=>{ state.ksqType=e.target.value||null; state.examIndex=null; renderSelects(); toggleResults(); });
document.getElementById('examIndex').addEventListener('change', e=>{ state.examIndex=e.target.value||null; toggleResults(); });
</script>
</body>
</html>
