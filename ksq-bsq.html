<!doctype html>
<html lang="az">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KSQ/BSQ ‚Äî EduPlan</title>
<link rel="canonical" href="https://www.eduplan.az/ksq-bsq.html" />
<meta name="description" content="Sinif, f…ônn, n√∂v v…ô n√∂mr…ô √ºzr…ô KSQ/BSQ fayllarƒ±nƒ± filtrl…ôyin v…ô y√ºkl…ôyin.">
<meta name="robots" content="index,follow">
<link rel="icon" href="/assets/ep-favicon-180.png" sizes="180x180" type="image/png" />
<script src="https://cdn.tailwindcss.com"></script>
<style>
  :root{ --bg:#f8fafc; --card:#fff; --text:#0f172a; --muted:#64748b; --border:#e2e8f0; }
  .dark{ --bg:#0b1220; --card:#0f172a; --text:#e2e8f0; --muted:#cbd5e1; --border:#334155; }
  html,body{ background:var(--bg); color:var(--text); }
  .card{ background:var(--card); border:1px solid var(--border); border-radius:16px; }
  .select{ appearance:none; background:var(--card); border:1px solid var(--border);
           border-radius:12px; padding:10px 12px; line-height:1.25; width:100%; }
  select:invalid{ color:#94a3b8; }
  .badge{ display:inline-flex; align-items:center; padding:.125rem .4rem; border:1px solid var(--border);
          border-radius:9999px; font-size:11px; color:var(--muted); background:rgba(148,163,184,.08); }
  #ksq-results{ min-height:180px; }
  /* bo≈ü hal */
  .empty{ display:grid; place-items:center; text-align:center; padding:24px; }
  .empty .box{ max-width:560px; margin:auto; border:1px solid var(--border); border-radius:12px;
               padding:22px 18px; background:var(--card); box-shadow:0 6px 16px rgba(0,0,0,.06); }
  .empty .icon{ width:44px; height:44px; display:grid; place-items:center; margin:0 auto 6px;
                border-radius:9999px; border:1px solid var(--border);
                background:radial-gradient(closest-side, rgba(147,51,234,.12), transparent 70%),
                           conic-gradient(from 180deg at 50% 50%, #22d3ee33, #a78bfa33, #22d3ee33); }
  .inner-card{ border-radius:12px; }
</style>
</head>
<body class="min-h-screen">
  <!-- Sad…ô header (tema d√ºym…ôsi yoxdur) -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/70 dark:bg-slate-900/70 border-b border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-7xl h-14 px-4 flex items-center">
      <img src="/assets/ep-favicon-light.svg" class="h-8 w-8 rounded-xl dark:hidden" alt="EduPlan">
      <img src="/assets/ep-favicon-dark.svg"  class="h-8 w-8 rounded-xl hidden dark:block" alt="EduPlan">
      <span class="ml-2 font-semibold tracking-tight">EduPlan AZ</span>
    </div>
  </header>

  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6">
    <!-- YALNIZ KSQ/BSQ -->
    <section class="card rounded-2xl shadow-sm">
      <div class="p-4 border-b border-slate-200 dark:border-slate-800">
        <h1 class="font-semibold text-lg">KSQ/BSQ</h1>
      </div>

      <div class="p-4 grid lg:grid-cols-3 gap-6 items-stretch">
        <!-- Sol: Filtrl…ôr -->
        <div class="space-y-4">
          <div>
            <label class="text-sm block mb-1">Sinif</label>
            <select id="grade" class="select"></select>
          </div>
          <div>
            <label class="text-sm block mb-1">F…ônn</label>
            <select id="subject" class="select"></select>
          </div>
          <div>
            <label class="text-sm block mb-1">N√∂v</label>
            <select id="ksqType" class="select"></select>
          </div>
          <div>
            <label class="text-sm block mb-1">N√∂mr…ô</label>
            <select id="examIndex" class="select"></select>
          </div>
        </div>

        <!-- Saƒü: N…ôtic…ôl…ôr -->
        <div class="lg:col-span-2 min-w-0">
          <div id="ksq-results-card" class="relative w-full rounded-xl card overflow-hidden">
            <div id="ksq-count-row" class="hidden px-4 pt-4 flex items-center justify-end">
              <span id="ksq-count" class="badge">0</span>
            </div>
            <div id="ksq-results" class="grid sm:grid-cols-2 gap-3 p-4"></div>

            <!-- Bo≈ü hal -->
            <div id="empty" class="empty">
              <div class="box text-center">
                <div class="icon">üìÅ</div>
                <div class="font-semibold">Z…ôhm…ôt olmasa se√ßim edin</div>
                <div class="text-sm text-slate-600 dark:text-slate-300 mt-1">
                  Sinif, f…ônn, n√∂v v…ô n√∂mr…ôni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div><!-- /grid -->
    </section>
  </main>

  <footer class="py-8 text-sm text-slate-600 dark:text-slate-300">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      ¬© <span id="year"></span> EduPlan AZ ¬∑ B√ºt√ºn h√ºquqlar qorunur
    </div>
  </footer>

<script>
/* ---- Tema: UI d√ºym…ôsi yoxdur, sistem…ô/yerli saxlamaya uyƒüun ---- */
const saved = localStorage.getItem('theme');
const initial = saved ? saved : (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
document.documentElement.classList.toggle('dark', initial === 'dark');

/* ---- Data & State ---- */
document.getElementById('year').textContent = new Date().getFullYear();

const FEED_URL = "https://script.google.com/macros/s/AKfycbxnt6tDu5YJ_P_FUgobNTu_Q-2dbyZjaXSWwyjIKysTJ3UwnWZKqm0ZxoNwoyT4M0w7/exec";

const translations = {
  az: {
    subjects: {
      az:'Az…ôrbaycan dili', lit:'∆èd…ôbiyyat', science:'T…ôbi…ôt', eng:'ƒ∞ngilis dili', rus:'Rus dili', math:'Riyaziyyat',
      physics:'Fizika', chemistry:'Kimya', biology:'Biologiya',
      az_history:'Az…ôrbaycan tarixi', world_history:'√úmumi tarix', geography:'Coƒürafiya',
      it:'ƒ∞nformatika', life:'H…ôyat bilgisi', tech:'Texnologiya', art:'T…ôsviri inc…ôs…ôn…ôt', music:'Musiqi',
      pe:'Fiziki t…ôrbiy…ô', premilitary:'√áaƒüƒ±rƒ±≈üaq…ôd…ôrki hazƒ±rlƒ±q'
    }
  }
};
const subjectKeysByGrade = {
  I:['az','life','math','eng','rus','art','music','pe','tech','it'],
  II:['az','life','math','eng','rus','art','music','pe','tech','it'],
  III:['az','life','math','eng','rus','art','music','pe','tech','it'],
  IV:['az','life','math','eng','rus','art','music','pe','tech','it'],
  V:['az','lit','eng','rus','math','science','it','az_history','geography','art','music','pe','tech'],
  VI:['az','lit','eng','rus','math','physics','science','it','az_history','geography','art','music','pe','tech'],
  VII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
  VIII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
  IX:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
  X:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
  XI:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
};

const state = { grade:null, subject:null, ksqType:null, examIndex:null, catalog:[] };

function option(el, v, t){ const o=document.createElement('option'); o.value=v; o.textContent=t; el.appendChild(o); }
function addPh(el, t){ const o=document.createElement('option'); o.value=""; o.textContent=t; o.disabled=true; o.selected=true; o.hidden=true; el.appendChild(o); }

/* ---- Selectl…ôrin qurulmasƒ± ---- */
function renderSelects(){
  const grades = ['I','II','III','IV','V','VI','VII','VIII','IX','X','XI'];

  const grade = document.getElementById('grade');
  grade.innerHTML=''; addPh(grade,'Sinfi se√ßin'); grades.forEach(g=>option(grade,g,g));
  grade.value = state.grade ?? "";

  const subj = document.getElementById('subject');
  subj.innerHTML=''; addPh(subj,'F…ônni se√ßin');
  if (state.grade){
    const keys = subjectKeysByGrade[state.grade] || Object.keys(translations.az.subjects);
    keys.map(k=>translations.az.subjects[k]).forEach(s=>option(subj,s,s));
  }
  subj.value = state.subject ?? "";

  const type = document.getElementById('ksqType');
  type.innerHTML=''; addPh(type,'N√∂v√º se√ßin'); option(type,'KSQ','KSQ'); option(type,'BSQ','BSQ');
  type.value = state.ksqType ?? "";

  const idx = document.getElementById('examIndex');
  idx.innerHTML=''; addPh(idx,'N√∂mr…ôni se√ßin');
  if (state.ksqType === 'KSQ'){ for(let i=1;i<=10;i++) option(idx,String(i),String(i)); }
  else if (state.ksqType === 'BSQ'){ ['1','2'].forEach(i=>option(idx,i,i)); }
  idx.disabled = !state.ksqType; idx.value = state.examIndex ?? "";
}

/* ---- N…ôtic…ôl…ôr / Bo≈ü hal ---- */
const wrap     = document.getElementById('ksq-results');
const emptyEl  = document.getElementById('empty');
const countRow = document.getElementById('ksq-count-row');
const countEl  = document.getElementById('ksq-count');

function allChosen(){ return !!(state.grade && state.subject && state.ksqType && state.examIndex); }
function buildTitle(it){ const fmt=(it.ext||'FILE').toUpperCase(); return `${it.grade} ¬∑ ${it.subject} ¬∑ ${it.type}-${it.index} ¬∑ ${fmt}`; }

function renderResults(){
  wrap.innerHTML = '';
  const list = state.catalog.filter(it =>
    it.type===state.ksqType && it.grade===state.grade &&
    it.subject===state.subject && it.index===state.examIndex
  );

  countEl.textContent = list.length;
  countRow.classList.toggle('hidden', list.length === 0);
  emptyEl.classList.toggle('hidden', list.length > 0);

  if (!list.length) return;

  list.forEach(it=>{
    const card = document.createElement('div');
    card.className = 'rounded-xl p-[1px] bg-gradient-to-br from-slate-200 to-slate-100 dark:from-slate-700/40 dark:to-slate-600/30';
    card.innerHTML = `
      <div class="inner-card p-4 card shadow-sm">
        <div class="flex items-start gap-3">
          <div class="h-8 w-8 rounded-lg bg-slate-100 dark:bg-slate-800 grid place-items-center">üìÑ</div>
          <div class="flex-1 min-w-0">
            <div class="text-sm font-medium break-words">${buildTitle(it)}</div>
            <div class="mt-2">
              <a href="${it.dl}" target="_self" rel="noopener"
                 class="inline-flex items-center justify-center px-3 py-1.5 rounded-lg text-white text-sm"
                 style="background:linear-gradient(90deg,#1e3a8a,#4f46e5,#9333ea)">
                 ‚¨áÔ∏è Y√ºkl…ô
              </a>
            </div>
          </div>
        </div>
      </div>`;
    wrap.appendChild(card);
  });
}

function toggleResults(){
  if (allChosen()) renderResults();
  else {
    wrap.innerHTML = '';
    countRow.classList.add('hidden');
    emptyEl.classList.remove('hidden');
  }
}

/* ---- Eventl…ôr ---- */
document.getElementById('grade').addEventListener('change', e=>{
  state.grade = e.target.value || null;
  state.subject = null;
  renderSelects(); toggleResults();
});
document.getElementById('subject').addEventListener('change', e=>{
  state.subject = e.target.value || null; toggleResults();
});
document.getElementById('ksqType').addEventListener('change', e=>{
  state.ksqType = e.target.value || null; state.examIndex = null;
  renderSelects(); toggleResults();
});
document.getElementById('examIndex').addEventListener('change', e=>{
  state.examIndex = e.target.value || null; toggleResults();
});

/* ---- Y√ºkl…ôm…ô ---- */
(async function init(){
  try{
    renderSelects(); toggleResults();
    const res = await fetch(FEED_URL, { cache:'no-store' });
    const data = await res.json();
    state.catalog = Array.isArray(data) ? data : [];
    toggleResults();
  }catch(err){
    console.error(err);
    if (allChosen()){
      wrap.innerHTML = `<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">X…ôta: ${err.message}</div>`;
      emptyEl.classList.add('hidden');
    }
  }
})();
</script>
</body>
</html>
