<!doctype html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="canonical" href="https://www.eduplan.az/" />
  <meta name="google-site-verification" content="arARShX5-FqxTThszjmchhNpO0WHdzJlhWi0E3-zuzQ" />
  <title>EduPlan</title>
  <meta name="description" content="M√º…ôlliml…ôr √º√ß√ºn r…ôq…ômsal resurs platformasƒ±">
  <script type="application/ld+json">
    {
     "@context":"https://schema.org",
     "@type":"WebSite",
     "name":"EduPlan",
     "url":"https://www.eduplan.az/",
     "potentialAction":{
       "@type":"SearchAction",
       "target":"https://www.eduplan.az/search?q={query}",
       "query-input":"required name=query"
      }
}
</script>

<!-- Favicons -->
<link rel="icon" type="image/png" sizes="48x48" href="assets/ep-favicon-48.png">
<link rel="icon" type="image/png" sizes="180x180" href="assets/ep-favicon-180.png">
<link rel="apple-touch-icon" sizes="180x180" href="assets/ep-favicon-180.png">

<!-- Schema.org -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "EducationalOrganization",
  "name": "EduPlan",
  "url": "https://www.eduplan.az/",
  "logo": "https://www.eduplan.az/assets/ep-favicon-180.png",
  "description": "M√º…ôlliml…ôr √º√ß√ºn r…ôq…ômsal resurs platformasƒ±"
}
</script>

<script>
  window.__catalogPromise = fetch("https://drive.usercontent.google.com/uc?export=download&id=YOUR_CATALOG_JSON_ID")
    .then(r => r.json())
    .catch(()=>[]);
</script>
  <!-- Tailwind (no install) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
    /* === DARK MODE === */
:root {
  --bg-from: #f8fafc;  
  --bg-to:   #ffffff;
  --text:    #0f172a;
  --card:    #ffffff;
  --muted:   #475569;
  --border:  #e2e8f0;
  --tab-track:#eef2f6;
  --pill:#e9edf3;
  --pill-text:#334155;
}
.dark {
  --bg-from: #0b1220;  
  --bg-to:   #0a0f1a;
  --text:    #e2e8f0;
  --card:    #0f172a;
  --muted:   #cbd5e1;
  --border:  #334155;
  --tab-track:#111827;
  --pill:#0f172a;
  --pill-text:#cbd5e1;
}
  /* √úmumi √ºf√ºqi axƒ±nƒ± K∆èS ‚Äì scrollbar yaranmasƒ±n */
:where(html, body, main, header, footer, section, .max-w-7xl, .tab-panel, .grid){
  overflow-x: clip;         /* modern browsers ‚Äì scroll yaratmƒ±r */
  min-width: 0;             /* min-content enliyini sƒ±r */
}

/* iOS/Android select v…ô inputlarƒ±n konteyneri it…ôl…ôm…ôm…ôsi √º√ß√ºn */
select, input, button { max-width: 100%; }

/* Tabs pseudo-elementi v…ô k√∂lg…ôl…ôri k…ônara √ßƒ±xsa bel…ô √ß…ôkm…ô */
#tabs{ overflow: clip; contain: paint; }  /* artƒ±q s…ônd…ô overflow-hidden var, bunu √ºst√ºn…ô veririk */

/* badge-l…ôr, tab-lar, button-lar √º√ß√ºn d√ºz…ôli≈ül…ôr */
.bg-slate-100\/80{ background-color:var(--tab-track)!important; }
.bg-slate-100{ background-color:var(--pill)!important; }
.badge, .pill, .inline-badge{
  background-color:var(--pill)!important;
  color:var(--pill-text)!important;
}
/* …ôsas fond v…ô m…ôtn */
body { color: var(--text); }
body.bg-gradient-to-b { 
  background-image: linear-gradient(to bottom, var(--bg-from), var(--bg-to)) !important;
}
/* kartlar v…ô panell…ôr */
.bg-white { background-color: var(--card) !important; }
.text-slate-900, .text-slate-800, .text-slate-700 { color: var(--text) !important; }
.text-slate-600, .text-slate-500 { color: var(--muted) !important; }
/* s…ôrh…ôdl…ôr */
.border-slate-200 { border-color: var(--border) !important; }
/* header blur fonu */
.backdrop-blur.bg-white\/70 { background-color: color-mix(in srgb, var(--card) 70%, transparent) !important; }
/* input/select fonu */
select, input { background-color: var(--card) !important; color: var(--text) !important; }
/* ‚ÄúA√ß / Y√ºkl…ô‚Äù d√ºym…ôsi dark √º√ß√ºn kontrastlƒ± qalsƒ±n */
.bg-slate-900 { background-color:#0b1220 !important; color:#fff !important; }
#dark-toggle:checked + span { background:#334155; }
#dark-toggle:checked + span .dot { transform: translateX(16px); }
/* --- Tab ke√ßid animasiyasƒ± --- */
.tab-panel {
  display: none;           /* ilkin v…ôziyy…ôt: gizli */
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 220ms ease, transform 220ms ease;
}

.tab-panel.is-active {
  display: block;          /* g√∂r√ºn…ôn panel */
  opacity: 1;
  transform: translateY(0);
}

/* grid panell…ôri √º√ß√ºn (s…ônd…ô b…ôzil…ôri grid-dir) */
.tab-panel.grid-on.is-active { display: grid; }

/* Tab d√ºym…ôsi √º√ß√ºn vizual aktivlik */
.tab-btn {
  transition: background-color 180ms ease, color 180ms ease, box-shadow 180ms ease, transform 120ms ease;
}
.tab-btn[aria-selected="true"] {
  background-color: var(--card);
  color: var(--text);
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
  transform: translateY(-1px);
}
/* DARK: tray v…ô aktiv d√ºym…ô √º√ß√ºn daha y√ºks…ôk kontrast */
.dark #tabs{
  background:#0f172a;              /* tray fonu */
  border-color:#253046;
}
.dark .tab-btn[aria-selected="true"]{
  background:#1e293b;              /* aktiv tab fonu ‚Äì traydan a√ßƒ±q */
  color:#e5e7eb;
  box-shadow:
    0 0 0 1px #304155,             /* nazik ring */
    0 8px 16px rgba(0,0,0,.35);
}
/* DARK: passiv tabƒ± bir az solƒüun g√∂st…ôr */
.dark .tab-btn[aria-selected="false"]{
  color:#94a3b8;
  opacity:.9;
}
/* H…ôr iki rejimd…ô aktiv tab altƒ±nda indikator x…ôtti */
.tab-btn[aria-selected="true"]{ position:relative; }
.tab-btn[aria-selected="true"]::after{
  content:"";
  position:absolute; left:12px; right:12px; bottom:-7px;
  height:3px; border-radius:9999px;
  background:linear-gradient(90deg,#22d3ee,#a78bfa);
  opacity:.95;
}
/* Kartlarƒ±n hover k√∂lg…ôsi */
.bg-white {
  transition: box-shadow 0.2s ease;
}

.bg-white:hover {
  box-shadow: 0 6px 16px rgba(0,0,0,0.12); /* Light mode k√∂lg…ô */
}

/* Dark mod √º√ß√ºn hover k√∂lg…ôsi */
.dark .bg-white:hover {
  box-shadow: 0 6px 16px rgba(255,255,255,0.15); /* A√ßƒ±q k√∂lg…ô */
}
select:invalid { color:#9aa4b2; }

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.shimmer {
  background: linear-gradient(90deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.25) 50%, rgba(255,255,255,0.06) 100%);
  background-size: 200% 100%;
  animation: shimmer 2.2s infinite;
}
.badge-blur {
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.ep-btn-primary {
  display: inline-block;
  width: 100%;
  padding: 0.65rem 1rem;
  border-radius: 0.75rem;
  font-weight: 600;
  font-size: 0.9rem;
  letter-spacing: 0.2px;
  color: #fff;
  background: linear-gradient(90deg, #1e3a8a 0%, #4f46e5 50%, #9333ea 100%);
  border: 0;
  box-shadow: 0 4px 12px rgba(79,70,229,.35);
  transition: transform .15s ease, box-shadow .25s ease, filter .25s ease;
}
.ep-btn-primary:hover {
  transform: translateY(-2px);
  filter: brightness(1.08);
  box-shadow: 0 6px 18px rgba(147,51,234,.45);
}
.ep-btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 3px 10px rgba(79,70,229,.3);
}

/* DARK REJƒ∞M √º√ß√ºn bir az daha d…ôrin ton */
.dark .ep-btn-primary {
  background: linear-gradient(90deg, #312e81 0%, #4338ca 50%, #7e22ce 100%);
  box-shadow: 0 4px 10px rgba(255,255,255,0.1);
}
.dark .ep-btn-primary:hover {
  filter: brightness(1.1);
  box-shadow: 0 6px 14px rgba(255,255,255,0.12);
}
.vcenter{
  min-height:320px;
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;   /* ≈üaquli tam m…ôrk…ôz */
  align-items:stretch;      /* √ºf√ºqi tam geni≈ülik */
  gap:16px;
  padding:0 !important;
}

html, body { max-width: 100%; overflow-x: hidden; }
*, *::before, *::after { box-sizing: border-box; }
img, svg, video { max-width: 100%; height: auto; }

html, body { max-width: 100%; overflow-x: hidden; }
*, *::before, *::after { box-sizing: border-box; }
img, svg, video { max-width: 100%; height: auto; }

/* Flex/Grid u≈üaq bloklar default geni≈ül…ônm…ôsin */
.min-w-0 { min-width: 0 !important; }
.min-h-0 { min-height: 0 !important; }

/* Kartlarƒ±n i√ßind…ô ‚Äú+1px‚Äù border/gradient tr√ºkl…ôrin…ô sip…ôr */
.overflow-clip { overflow: clip; } /* modern, scroll bar yaratmƒ±r */

#ksq-results .rounded-full,
#pp-results .rounded-full { max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
/* H…ôr ehtimala qar≈üƒ± panel/gridd…ôki u≈üaq bloklar */
#panel-tools *{ min-width: 0; }
/* Kalkulyator kartƒ±nda scroll anchoring-i s√∂nd√ºr: sƒ±√ßrayƒ±≈ü olmasƒ±n */
#panel-tools, #calc-card {
  overflow-anchor: none;
}
:root{
  --panel-min-h: 320px;
  --panel-max-h: 520px; 
}




/* √ú√ß kartƒ±n ortaq sinfi */
.panel-card{
  min-height: var(--panel-min-h);
  max-height: var(--panel-max-h);
  height: 100%;
  border-radius: 1rem;
}

/* Yalnƒ±z kalkulyator kartƒ±: √∂z√º b√∂y√ºm…ôsin, i√ßi scroll olsun */
.panel-scroll{ overflow: hidden; }
.panel-scroll > .scrollarea{
  height: 100%;
  min-height: 0;
  overflow-y: auto;
  padding-bottom: 24px; /* Hesabla/Sƒ±fƒ±rla rahat g√∂r√ºns√ºn */
}
/* === Premium scrollbar (global) === */
/* Firefox */
html, body, .scrollarea{
  scrollbar-width: thin;
  scrollbar-color: #7c88a2 transparent;
}
.dark html, .dark body, .dark .scrollarea{
  scrollbar-color: #8794aa #0b1220;
}

/* WebKit (Chrome/Edge/Safari) */
*::-webkit-scrollbar{
  width: 10px;
  height: 10px;
}
*::-webkit-scrollbar-track{
  background: transparent;
  border-radius: 9999px;
}
*::-webkit-scrollbar-thumb{
  border-radius: 9999px;
  background: linear-gradient(180deg,#22d3ee,#a78bfa);
  border: 2px solid transparent;         /* ‚Äúgap‚Äù effekti */
  background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover{ filter: brightness(1.08); }
*::-webkit-scrollbar-corner{ background: transparent; }

/* daxili scrolllarƒ±n layout-u t…ôrp…ônm…ôsin */
.scrollarea{ scrollbar-gutter: stable both-edges; }
.ep-btn-secondary{
  display:inline-block; width:100%;
  padding:0.65rem 1rem; border-radius:0.75rem;
  font-weight:600; font-size:0.9rem; letter-spacing:0.2px;
  background:transparent; border:1px solid var(--border);
  color:var(--text);
  transition:transform .15s ease, box-shadow .25s ease, filter .25s ease, background .25s ease;
}
.ep-btn-secondary:hover{ background:rgba(148,163,184,.12); transform:translateY(-1px); }
.dark .ep-btn-secondary:hover{ background:rgba(148,163,184,.15); }
/* Yalnƒ±z ‚ÄúAl…ôtl…ôr & Testl…ôr‚Äù grid-i √º√ß√ºn: s…ôtir h√ºnd√ºrl√ºy√ºn√º sabitl…ô */
@media (min-width: 768px){
  .tools-grid{
    /* b√ºt√ºn s…ôtirl…ôr eyni: min-height ‚Üí max-height arasƒ± */
    grid-auto-rows: minmax(var(--panel-min-h), var(--panel-max-h));
  }
}
/* LIGHT ‚Äî m…ôrk…ôzli mini-kart (520px) */
.empty-light{
  position:absolute; inset:0; display:grid; place-items:center;
  padding:0; pointer-events:none;
}
.empty-light .card{
  width:min(520px,100%);
  border-radius:16px; border:1px solid var(--border);
  background:var(--card);
  box-shadow:0 6px 16px rgba(0,0,0,.06);
  text-align:center; padding:22px 18px;
}
.empty-light .icon{
  width:44px; height:44px; border-radius:9999px;
  display:grid; place-items:center; margin:0 auto 8px;
  background:
    radial-gradient(closest-side, rgba(147,51,234,.12), transparent 70%),
    conic-gradient(from 180deg at 50% 50%, #22d3ee33, #a78bfa33, #22d3ee33);
  border:1px solid #e9eaf0; font-size:20px;
}
.empty-light .title{ font-weight:600; font-size:15px; }
.empty-light .desc { font-size:13px; color:var(--muted); margin-top:4px; }

/* DARK overlay ‚Äî ARXAFON YOXDUR, ≈ü…ôffaf qat */
.empty-overlay{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  pointer-events:none;
  background: transparent;     /* NEW */
}

/* M…ôrk…ôzd…ô 520px kart */
.empty-overlay .inner{
  width:min(520px,100%);
  border-radius:16px;
  text-align:center;
  padding:22px 18px;

  background: rgba(2, 6, 23, .55);     /* dark √º√ß√ºn kart √∂z√º */
  border: 1px solid rgba(255,255,255,.22);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 8px 22px rgba(0,0,0,.35);
}

/* icon/title/desc eyni qalƒ±r */


.empty-overlay .inner .icon{
  width:44px; height:44px; border-radius:9999px; display:grid; place-items:center;
  margin:0 auto 8px;
  background:
    radial-gradient(closest-side, rgba(255,255,255,.14), transparent 70%),
    conic-gradient(from 180deg at 50% 50%, #22d3ee33, #a78bfa33, #22d3ee33);
  border:1px solid rgba(255,255,255,.22);
  font-size:20px;
}
.empty-overlay .inner .title{ font-weight:600; font-size:15px; }
.empty-overlay .inner .desc { font-size:13px; color:var(--muted); margin-top:4px; }


/* Light g√∂r√ºn√º≈ü√º dark-da gizl…ô */
.dark .empty-light{ display:none; }

/* PREMIUM SELECT */
/* bazasƒ± */
.select-premium{
  -webkit-appearance:none; -moz-appearance:none; appearance:none;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 42px 10px 12px;     /* saƒüda ox √º√ß√ºn yer */
  line-height: 1.25;
  transition: border-color .18s ease, box-shadow .18s ease, transform .06s ease;
  box-shadow:
    inset 0 0 0 1px color-mix(in srgb, var(--border) 35%, transparent),
    0 1px 0 rgba(0,0,0,.05);
  cursor: pointer;
}

/* hover/focus */
.select-premium:hover{
  border-color: color-mix(in srgb, var(--border) 55%, transparent);
}
.select-premium:focus{
  outline: 0;
  border-color: transparent;
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--border) 45%, transparent),
    0 0 0 4px rgba(34,211,238,.25),                /* cyan halo */
    0 6px 16px rgba(0,0,0,.08);
  transform: translateY(-1px);
}

/* saƒüdakƒ± chevron (SVG) */
.select-premium{
  background-image:
    url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px;
}

/* options popup √º√ß√ºn r…ôngl…ôr (d…ôst…ôkl…ôy…ôn brauzerl…ôrd…ô) */
.select-premium option{
  background: var(--card);
  color: var(--text);
}

/* Dark rejimd…ô bir az daha d…ôrin g√∂r√ºn√º≈ü */
.dark .select-premium{
  background: #0f172a;
  box-shadow:
    inset 0 0 0 1px #223049,
    0 1px 0 rgba(255,255,255,.04);
}
.dark .select-premium:focus{
  box-shadow:
    0 0 0 1px #2f405c,
    0 0 0 4px rgba(167,139,250,.22),              /* violet halo */
    0 10px 22px rgba(0,0,0,.35);
}

/* Disabled vizualƒ± */
.select-premium:disabled{
  opacity:.6; cursor:not-allowed;
}
.route-btn { cursor: pointer; }  /* ‚ú® hover-da pointer */
/* klikl…ôn…ôn kart/√ßipl…ôr …ôl i≈üar…ôsi olsun */
.route-btn { cursor: pointer; }
/* ist…ôs…ôn fokus √º√ß√ºn */
.route-btn:focus { outline: 2px solid rgba(34,211,238,.35); outline-offset: 2px; }

  </style>
<link rel="dns-prefetch" href="https://drive.usercontent.google.com">
<link rel="preconnect" href="https://drive.usercontent.google.com" crossorigin>
<!-- Google AdSense (asenkron) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1241199346930032" crossorigin="anonymous"></script>

</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-900 relative">
  <div class="pointer-events-none absolute inset-0 -z-10 overflow-hidden">
    <div class="absolute -top-24 -right-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-indigo-200/50 to-emerald-200/50"></div>
    <div class="absolute -bottom-24 -left-24 h-72 w-72 rounded-full blur-3xl bg-gradient-to-tr from-amber-200/40 to-pink-200/40"></div>
  </div>

  <header class="sticky top-0 z-50 backdrop-blur bg-white/70 border-b border-slate-200">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">
<!-- Header loqo -->
<img id="site-logo" src="assets/ep-favicon-light.svg" alt="EduPlan loqo" class="h-9 w-9 rounded-2xl shadow-sm" loading="eager" decoding="async">
        <span class="font-semibold tracking-tight">EduPlan AZ</span>
      </div>
      <div class="relative flex items-center gap-3" id="header-controls">
        <button id="btn-settings" class="rounded-2xl border px-3 py-2 text-sm">‚öôÔ∏è <span data-i18n="nav.settings">T…ônziml…ôm…ôl…ôr</span></button>
        <!-- Settings popover -->
<div id="settings-panel"
       class="hidden absolute right-0 top-12 z-[60] w-64 rounded-2xl border border-slate-200 bg-white p-4 shadow-lg">
    <div class="flex items-center justify-between">
      <div class="text-sm">üåô Qaranlƒ±q rejim</div>
      <label class="inline-flex items-center cursor-pointer">
        <input id="dark-toggle" type="checkbox" class="sr-only">
        <span class="w-10 h-6 bg-slate-200 rounded-full relative transition">
          <span class="dot absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition"></span>
        </span>
      </label>
    </div>
  </div>
</div>

    </div>
  </header>

<section id="hero" class="relative">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12 lg:py-16
              grid lg:grid-cols-2 gap-8 items-center
              min-h-[calc(100svh-64px)]">  <!-- ‚ú® hero tam ekran - header -->
      <div>
        <h1 id="hero-title" class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight leading-snug whitespace-normal text-balance text-pretty max-w-[28ch] sm:max-w-[32ch] lg:max-w-[36ch]">M√º…ôlliml…ôr √º√ß√ºn r…ôq…ômsal resurs platformasƒ±</h1>
        <p class="mt-4 text-slate-600 text-lg" id="hero-subtitle">Az…ôrbaycan m…ôkt…ôbl…ôri √º√ß√ºn uyƒüunla≈üdƒ±rƒ±lƒ±b.</p>
<!-- Legend row -->
<ul class="mt-6 flex w-full items-center 
           justify-center md:justify-start 
           gap-x-4 text-[clamp(12px,3.5vw,16px)] overflow-x-hidden">
  
  <li class="flex items-center gap-2">
    <span class="h-2.5 w-2.5 rounded-full bg-emerald-400"></span>
    <span>KSQ/BSQ & PP</span>
  </li>

  <li class="flex items-center gap-2">
    <span class="h-2.5 w-2.5 rounded-full bg-indigo-400"></span>
    <span>Al…ôtl…ôr & Testl…ôr</span>
  </li>

  <li class="flex items-center gap-2">
    <span class="h-2.5 w-2.5 rounded-full bg-amber-400"></span>
    <span>PDF/<wbr>DOCX</span>
  </li>
</ul>





      </div>
      <div class="grid gap-4">
        <div class="grid sm:grid-cols-2 gap-4">
<a href="/ksq-bsq" class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white route-btn block" data-route="/ksq-bsq">
  <div class="p-4">
    <div class="text-base font-semibold">üìÑ <span id="feat-ksq-title">KSQ/BSQ</span></div>
    <div class="text-sm text-slate-600 mt-1" id="feat-ksq-desc">Sinif, f…ônn, n√∂v v…ô n√∂mr…ô √ºzr…ô summativ qiym…ôtl…ôndirm…ô fayllarƒ±.</div>
  </div>
</a>
<a href="/pp" class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white route-btn block" data-route="/pp">
  <div class="p-4">
    <div class="text-base font-semibold">üìÖ <span id="feat-pp-title">Perspektiv plan (PP)</span></div>
    <div class="text-sm text-slate-600 mt-1" id="feat-pp-desc">F…ônn √ºzr…ô illik plan fayllarƒ±.</div>
  </div>
</a>

        </div>
<div class="grid sm:grid-cols-3 gap-4">
  <a href="/calculator" class="rounded-2xl bg-white border p-4 shadow-sm hover:shadow-md transition flex items-center gap-2 route-btn block" data-route="/calculator">üßÆ <span id="mini-calc">Bal kalkulyatoru</span></a>

  <!-- ‚Äúƒ∞xrac‚Äù …ôv…ôzin…ô √áevirici v…ô orta yer…ô ke√ßir -->
  <a href="/converter" class="rounded-2xl bg-white border p-4 shadow-sm hover:shadow-md transition flex items-center gap-2 route-btn block" data-route="/converter">üìÑ <span id="mini-converter">√áevirici</span></a>

  <!-- ‚ÄúSual bankƒ±‚Äù saƒüa ke√ßir -->
  <a href="/question-bank" class="rounded-2xl bg-white border p-4 shadow-sm hover:shadow-md transition flex items-center gap-2 route-btn block" data-route="/question-bank">üìö <span id="mini-templates">Sual bankƒ±</span></a>
</div>

      </div>
    </div>
  </section>

  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-16">
    <div id="tabs" class="mt-2 grid grid-cols-3 rounded-2xl p-1 bg-slate-100/80 border border-slate-200 shadow-inner overflow-hidden">
      <button data-tab="ksq" class="tab-btn rounded-xl px-4 py-2 text-sm text-slate-600" id="tab-ksq">KSQ / BSQ</button>
      <button data-tab="pp"  class="tab-btn rounded-xl px-4 py-2 text-sm text-slate-600" id="tab-pp">Perspektiv plan</button>
      <button data-tab="tools" class="tab-btn rounded-xl px-4 py-2 text-sm text-slate-600" id="tab-tools">Al…ôtl…ôr & Testl…ôr</button>
    </div>

    <section id="panel-ksq" class="tab-panel is-active mt-6">
      <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
        <div class="p-4 border-b"><h3 class="font-semibold" id="ksq-title">KSQ/BSQ</h3></div>
        <div class="p-4 grid lg:grid-cols-3 gap-6 items-stretch">
          <div class="space-y-4">
            <div><label class="text-sm text-slate-700 block" id="lbl-grade">Sinif</label>
              <select id="grade"     class="select-premium w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select></div>
            <div><label class="text-sm text-slate-700 block" id="lbl-subject">F…ônn</label>
              <select id="subject"   class="select-premium w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select></div>
            <div><label class="text-sm text-slate-700 block" id="lbl-type">N√∂v</label>
              <select id="ksqType"   class="select-premium w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1">
                  <option>KSQ</option><option>BSQ</option>
              </select></div>
            <div><label class="text-sm text-slate-700 block" id="lbl-examNo">N√∂mr…ô</label>
              <select id="examIndex" class="select-premium w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select>
            </div>
          </div>
<div class="lg:col-span-2 min-w-0">
  <div id="ksq-results-card" class="relative w-full rounded-xl border border-slate-200 bg-white text-sm overflow-clip">
    <div id="ksq-count-row" class="hidden items-center justify-end mb-3 px-4 pt-4">
      <span id="ksq-count" class="inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600 border">0</span>
    </div>
    <div id="ksq-results" class="grid sm:grid-cols-2 gap-3 p-4"></div>
  </div>
</div>





        </div>
      </div>
    </section>

    <section id="panel-pp"  class="tab-panel mt-6">
      <div class="rounded-2xl shadow-sm hover:shadow-md transition border bg-white">
        <div class="p-4 border-b"><h3 class="font-semibold" id="pp-title">Perspektiv (illik) plan</h3></div>
          <div class="p-4 grid lg:grid-cols-3 gap-6 items-stretch">
            <div class="space-y-4 lg:min-h-[320px] lg:flex lg:flex-col lg:justify-center lg:-translate-y-4">
            <div><label class="text-sm text-slate-700 block" id="lbl-pp-subject">F…ônn</label>
              <select id="ppSubject" class="select-premium w-full rounded-xl border px-3 py-2 text-sm bg-white mt-1"></select></div>
          </div>
<div class="lg:col-span-2 min-w-0">
  <div id="pp-results-card"  class="relative w-full rounded-xl border border-slate-200 bg-white text-sm overflow-clip">
    <div id="pp-count-row" class="hidden items-center justify-end mb-3 px-4 pt-4">
      <span id="pp-count" class="inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600 border">0</span>
    </div>
    <div id="pp-results" class="grid sm:grid-cols-2 gap-3 p-4"></div>
  </div>
</div>




        </div>
      </div>
    </section>

    <section id="panel-tools" class="tab-panel grid-on mt-6">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-5 items-stretch tools-grid">
          <div class="panel-card panel-scroll rounded-2xl shadow-sm hover:shadow-md transition border bg-white grid grid-rows-[auto_minmax(0,1fr)]">
          <div class="p-4 border-b"><div class="text-base font-semibold">üßÆ <span id="tool-calc-title">Bal kalkulyatoru</span></div></div>
<div class="scrollarea p-4 pt-8 space-y-5" id="calc-card">
  <!-- ‚úîÔ∏è ƒ∞stifad…ô√ßi se√ßimi -->
<div class="rounded-xl border px-3 py-3 text-sm 
            flex flex-col sm:flex-row gap-3 sm:items-center">
  <span class="text-slate-600 dark:text-slate-300">Hesablama rejimi</span>

  <!-- Mobil: 3 b…ôrab…ôr s√ºtun; b√∂y√ºk ekranda da stabil qalƒ±r -->
  <div class="grid grid-cols-3 gap-2 w-full">
<button type="button"
  class="w-full min-w-0 px-3 py-1 h-9 rounded-lg border text-[11px] sm:text-xs whitespace-nowrap leading-none"
  data-mode="t1">I yarƒ±mil</button>

<button type="button"
  class="w-full min-w-0 px-3 py-1 h-9 rounded-lg border text-[11px] sm:text-xs whitespace-nowrap leading-none"
  data-mode="t2">II yarƒ±mil</button>

<button type="button"
  class="w-full min-w-0 px-3 py-1 h-9 rounded-lg border text-[11px] sm:text-xs whitespace-nowrap leading-none"
  data-mode="both">H…ôr ikisi</button>

  </div>
</div>


  <!-- I yarƒ±mil -->
  <fieldset id="fs-t1" class="rounded-xl border px-3 py-3">
    <legend class="px-2 text-sm font-medium">I yarƒ±mil</legend>
    <div class="grid grid-cols-2 gap-3 mt-2">
      <input id="t1-ksq1" type="number" min="0" max="100" placeholder="KSQ1" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t1-ksq2" type="number" min="0" max="100" placeholder="KSQ2" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t1-ksq3" type="number" min="0" max="100" placeholder="KSQ3" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t1-ksq4" type="number" min="0" max="100" placeholder="KSQ4" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t1-ksq5" type="number" min="0" max="100" placeholder="KSQ5" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t1-ksq6" type="number" min="0" max="100" placeholder="KSQ6" class="rounded-xl border px-3 py-2 text-sm" />
    </div>
    <input id="t1-bsq" type="number" min="0" max="100" placeholder="BSQ" class="rounded-xl border px-3 py-2 text-sm mt-3" />
  </fieldset>

  <!-- II yarƒ±mil -->
  <fieldset id="fs-t2" class="rounded-xl border px-3 py-3">
    <legend class="px-2 text-sm font-medium">II yarƒ±mil</legend>
    <div class="grid grid-cols-2 gap-3 mt-2">
      <input id="t2-ksq1" type="number" min="0" max="100" placeholder="KSQ1" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t2-ksq2" type="number" min="0" max="100" placeholder="KSQ2" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t2-ksq3" type="number" min="0" max="100" placeholder="KSQ3" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t2-ksq4" type="number" min="0" max="100" placeholder="KSQ4" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t2-ksq5" type="number" min="0" max="100" placeholder="KSQ5" class="rounded-xl border px-3 py-2 text-sm" />
      <input id="t2-ksq6" type="number" min="0" max="100" placeholder="KSQ6" class="rounded-xl border px-3 py-2 text-sm" />
    </div>
    <input id="t2-bsq" type="number" min="0" max="100" placeholder="BSQ" class="rounded-xl border px-3 py-2 text-sm mt-3" />
  </fieldset>
<!-- Hesabla + Sƒ±fƒ±rla -->
<div class="grid grid-cols-2 gap-2">
  <button class="ep-btn-primary w-full" id="btn-calc">Hesabla</button>
  <button class="ep-btn-secondary w-full" type="button" id="btn-reset">Sƒ±fƒ±rla</button>
</div>

  <!-- N…ôtic…ôl…ôr -->
  <div id="calc-output" class="hidden rounded-xl border px-4 py-4">
    <div class="text-sm text-slate-500 dark:text-slate-300">N…ôtic…ôl…ôr (√ß…ôki: KSQ 40% / BSQ 60%)</div>

    <div class="mt-3 grid sm:grid-cols-3 gap-3">
      <!-- I yarƒ±mil -->
      <div id="out-t1-card" class="rounded-lg border px-3 py-2">
        <div class="text-slate-500 dark:text-slate-400 text-sm mb-1">I yarƒ±mil</div>
        <div class="text-lg font-semibold" id="out-t1">‚Äî</div>
        <div class="text-xs mt-1">KSQ ort.: <span id="out-t1-ksq">‚Äî</span>, BSQ: <span id="out-t1-bsq">‚Äî</span></div>
        <div class="text-xs">Qiym…ôt: <span id="out-t1-grade">‚Äî</span></div>
      </div>

      <!-- II yarƒ±mil -->
      <div id="out-t2-card" class="rounded-lg border px-3 py-2">
        <div class="text-slate-500 dark:text-slate-400 text-sm mb-1">II yarƒ±mil</div>
        <div class="text-lg font-semibold" id="out-t2">‚Äî</div>
        <div class="text-xs mt-1">KSQ ort.: <span id="out-t2-ksq">‚Äî</span>, BSQ: <span id="out-t2-bsq">‚Äî</span></div>
        <div class="text-xs">Qiym…ôt: <span id="out-t2-grade">‚Äî</span></div>
      </div>

      <!-- ƒ∞llik -->
      <div id="out-year-card" class="rounded-lg border px-3 py-2">
        <div class="text-slate-500 dark:text-slate-400 text-sm mb-1">ƒ∞llik</div>
        <div class="text-lg font-semibold" id="out-year">‚Äî</div>
        <div class="text-xs mt-1">Hesab: (I + II) / 2</div>
        <div class="text-xs">Qiym…ôt: <span id="out-year-grade">‚Äî</span></div>
      </div>
    </div>

    <div id="calc-warn" class="hidden mt-2 text-xs text-amber-600">* Bo≈ü buraxƒ±lan KSQ-lar hesablanmaya qatƒ±lmadƒ±.</div>
  </div>

  <div id="calc-error" class="hidden text-[12px] text-rose-500"></div>
</div>



        </div>

<div class="panel-card rounded-2xl shadow-sm hover:shadow-md transition border bg-white grid grid-rows-[auto_minmax(0,1fr)]" id="convert-card">
  <div class="p-4 border-b">
    <div class="text-base font-semibold">üìÑ PDF / DOCX √ßevirici</div>
  </div>

  <div class="p-6 h-full">
    <div class="h-full grid place-content-center gap-4 max-w-md w-full mx-auto">
<!-- Fayl se√ßimi (YENƒ∞ ‚Äì lokaliz…ô olunmu≈ü v…ô s…ôliq…ôli) -->
<div>
  <label class="block text-sm text-slate-700 mb-1">Fayl</label>

  <div class="flex items-center gap-3">
    <!-- native input gizli qalƒ±r -->
    <input id="conv-file" type="file" class="sr-only"
      accept=".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document">

    <!-- g√∂z…ôl trigger d√ºym…ôsi -->
    <label for="conv-file" class="ep-btn-secondary w-auto px-4 cursor-pointer select-none">
      Fayl se√ß
    </label>

    <!-- se√ßilmi≈ü faylƒ±n adƒ± -->
    <span id="conv-file-name" class="text-sm text-slate-500">Fayl se√ßilm…ôyib</span>
  </div>

  <p class="mt-2 text-xs text-slate-500">PDF v…ô ya DOCX y√ºkl…ôyin.</p>
</div>

<div class="grid sm:grid-cols-2 gap-3">
  <div>
    <label class="block text-sm text-slate-700 mb-1">√áevirm…ô n√∂v√º</label>
<select id="conv-mode" class="select-premium w-full rounded-xl border px-3 py-2 text-sm">
  <option value="pdf2docx" selected>PDF ‚Üí DOCX</option>
  <option value="docx2pdf">DOCX ‚Üí PDF</option>
</select>
  </div>
  <!-- ‚ÄúFayl adƒ±‚Äù sah…ôsi tamamil…ô Sƒ∞Lƒ∞NDƒ∞ -->
</div>


      <!-- D√ºym…ôl…ôr -->
      <div class="grid grid-cols-2 gap-2">
        <button id="btn-convert" class="ep-btn-primary">√áevir</button>
        <button id="btn-convert-reset" type="button" class="ep-btn-secondary">Sƒ±fƒ±rla</button>
      </div>

      <!-- Proqres / n…ôtic…ô -->
      <div id="conv-msg" class="hidden text-[12px]"></div>
<div id="conv-result" class="hidden rounded-xl border p-3">
  <a id="conv-download" class="ep-btn-primary w-full text-center" download>Faylƒ± y√ºkl…ô</a>
</div>

    </div>
  </div>
</div>


<!-- SUAL BANKI ‚Äî C∆èLBEDƒ∞Cƒ∞ "TEZLƒ∞KL∆è" BLOKU -->
<div class="panel-card rounded-2xl shadow-sm hover:shadow-md transition border bg-white grid grid-rows-[auto_minmax(0,1fr)]" id="bank-card">
  <div class="p-4 border-b">
    <div class="text-base font-semibold">üìö <span id="tool-bank-title">Sual bankƒ±</span></div>
  </div>

<div class="p-6 grid place-items-center overflow-clip">
  <div class="w-full max-w-[560px] relative rounded-2xl p-[1px] bg-gradient-to-r from-cyan-400/35 via-fuchsia-400/35 to-violet-400/35">
    <div class="rounded-2xl border border-white/30 dark:border-white/10 bg-white/65 dark:bg-slate-900/40 backdrop-blur-md text-center px-8 py-10">
      <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-white/30 dark:border-white/10 bg-black/20 text-white/95 badge-blur">
        <span class="text-[12px] font-semibold tracking-wide">Tezlikl…ô</span>
      </div>
      <div class="mt-3 text-lg font-semibold">Pe≈ü…ôkar sual bankƒ±</div>
      <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">
        Multiple-choice, qƒ±sa cavab v…ô praktiki tap≈üƒ±rƒ±qlar ‚Äî hazƒ±rlanƒ±r.
      </p>
      <div class="mt-4 inline-flex items-center gap-2 text-sm text-slate-500 dark:text-slate-300">
        <span class="h-2 w-2 rounded-full shimmer"></span> Hazƒ±rlanƒ±r
      </div>
    </div>
    <div class="pointer-events-none absolute inset-0 rounded-2xl shimmer opacity-20"></div>
  </div>
</div>
</div>





        
      </div>
    </section>
    
  </main>
<!-- Zedge-t…ôrz Download Modal (15s, skip yoxdur, X var) -->
<div id="dlModal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/60">
  <div class="relative w-[92%] max-w-[440px] rounded-3xl bg-[#121212] text-white p-4 sm:p-5 shadow-2xl" id="dlCard">
    <!-- Close (√ßƒ±xƒ±≈ü) -->
    <button id="dlClose" class="absolute -right-3 -top-3 grid h-10 w-10 place-items-center rounded-full bg-white/90 text-gray-800 shadow">‚úï</button>

    <div class="mb-3 text-sm text-gray-300">Preparing your download</div>

    <!-- Reklam konteyneri -->
    <div class="relative overflow-hidden rounded-2xl bg-[#1b1b1b] border border-white/10">
      <div class="w-full grid place-items-center" style="min-height:250px">
<ins class="adsbygoogle"
     id="modal-ad"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-1241199346930032"
     data-ad-slot="4681795317"></ins>



      </div>
    </div>

    <!-- Sayƒüac + progress -->
    <div class="mt-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="relative h-10 w-10">
          <div id="ring" class="h-10 w-10 rounded-full" style="background:
            conic-gradient(#8b5cf6 0deg, #8b5cf6 0deg, #333 0deg, #333 360deg);"></div>
          <div class="absolute inset-0 grid place-items-center text-sm font-semibold" id="dlCount"></div>
        </div>
        <div class="text-sm text-gray-300" id="dlStatus">Please wait a few moments for the download to begin</div>
      </div>
    </div>

    <div class="mt-4 h-1 w-full overflow-hidden rounded-full bg-white/10">
      <div id="dlBar" class="h-1 bg-violet-500 w-0"></div>
    </div>
  </div>
</div>

  <footer class="border-t border-slate-200 py-10 text-sm">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-slate-600">¬© <span id="year"></span> EduPlan AZ ¬∑ <span id="ft-rights">B√ºt√ºn h√ºquqlar qorunur</span></p>
      <div class="flex items-center gap-4 text-slate-600">
        <a class="hover:underline" href="terms.html" id="ft-terms">≈û…ôrtl…ôr</a>
        <a class="hover:underline" href="privacy.html" id="ft-privacy">M…ôxfilik</a>
      </div>
    </div>
  </footer>
<!-- FOOTER-d…ôn sonra: T∆èK skript -->
<script>
/* ================== S…ônin b√ºt√ºn m√∂vcud JS-in ================== */
/* translations, state, setActiveTab, renderSelects, loadAllFromMaterials, 
   toggleResults, refreshEmptyPlaceholders, kalkulyator v…ô s. ‚Äî hamƒ±sƒ± buradadƒ±r. */
/* ... S…ônin h…ômin uzun JS kodun burada qalsƒ±n ... */

/* ============ Zedge-t…ôrz 15s interstitial modal ============ */
(() => {
  const MODAL = document.getElementById('dlModal');
  const CARD  = document.getElementById('dlCard');
  const BTN_CLOSE = document.getElementById('dlClose');
  const COUNT = document.getElementById('dlCount');
  const RING  = document.getElementById('ring');
  const BAR   = document.getElementById('dlBar');
  const STATUS= document.getElementById('dlStatus');

let t = 0;
let timer = null;
let finished = false;
let targetUrl = null;

const DURATION = 15;


  function updateRing(){
    const deg = ((DURATION - t) / DURATION) * 360;
    RING.style.background = `conic-gradient(#8b5cf6 ${deg}deg, #333 ${deg}deg 360deg)`;
  }

  function closeModal(){
    MODAL.classList.add('hidden');
    MODAL.classList.remove('flex');
    if (timer) clearInterval(timer);
    timer = null;
  }

function finish(){
  if (finished) return;
  finished = true;
  closeModal();
  if (targetUrl){
    const a = document.createElement('a');
    a.href = targetUrl; a.download = '';
    document.body.appendChild(a); a.click(); a.remove();
  }
}



// faylƒ±n yuxarƒ± hiss…ôsind…ô (scriptd…ô) flaq …ôlav…ô et:
let modalAdRendered = false;

function openModal(url){
  targetUrl = url;
  finished = false;

  MODAL.classList.remove('hidden');
  MODAL.classList.add('flex');

  t = DURATION;
  COUNT.textContent = t;
  STATUS.textContent = 'Please wait a few moments for the download to begin';
  BAR.style.width = '0%';
  updateRing();

  // üîπ Reklamƒ± yalnƒ±z Bƒ∞R D∆èF∆è, modal g√∂r√ºn…ônd…ôn sonra render et
  if (!modalAdRendered) {
    modalAdRendered = true;
    // modal g√∂r√ºn√º≈ü…ô d√º≈üs√ºn dey…ô bir frame g√∂zl…ô
    requestAnimationFrame(() => {
      try {
        (adsbygoogle = window.adsbygoogle || []).push({});
      } catch (e) {
        console.warn('AdSense push error:', e);
      }
    });
  }

  timer = setInterval(() => {
    t--;
    COUNT.textContent = t >= 0 ? t : 0;
    const p = ((DURATION - t) / DURATION) * 100;
    BAR.style.width = Math.min(100, Math.max(0, p)) + '%';
    updateRing();
    if (t <= 0) finish();
  }, 1000);
}




  // B√ºt√ºn ‚ÄúY√ºkl…ô‚Äù d√ºym…ôl…ôri √º√ß√ºn tutucu
document.addEventListener('click', (e) => {
  const a = e.target.closest('a.download-btn');
  if (!a) return;

  // Yalnƒ±z sol klik v…ô modifiersiz (Ctrl/‚åò/Shift/Alt yox)
  if (e.button !== 0 || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;

  const url = a.getAttribute('data-download') || a.getAttribute('href');
  if (!url) return;

  e.preventDefault();



  openModal(url); // H∆èR D∆èF∆è modal + 15s taymer
});


  // X, overlay v…ô ESC
  BTN_CLOSE.addEventListener('click', closeModal);
  MODAL.addEventListener('click', (e) => { if (!CARD.contains(e.target)) closeModal(); });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !MODAL.classList.contains('hidden')) closeModal();
  });
})();
</script>
<script>
/* ================= PDF / DOCX √áEVƒ∞Rƒ∞Cƒ∞ ================= */
(() => {
  const $ = s => document.querySelector(s);
const fileEl = $('#conv-file');
const modeEl = $('#conv-mode');
// const nameEl = $('#conv-name');  // ARTIQ YOXDUR
const nameLabel = $('#conv-file-name');
  const btn    = $('#btn-convert');
  const btnR   = $('#btn-convert-reset');
  const msg    = $('#conv-msg');
  const box    = $('#conv-result');
  const dlA    = $('#conv-download');

  if (!fileEl) return; // panel ba≈üqa s…ôhif…ôd…ô gizlidirs…ô

  function showMsg(text, type='info'){
    msg.textContent = text;
    msg.classList.remove('hidden','text-rose-500','text-emerald-600','text-slate-500');
    msg.classList.add(type==='error'?'text-rose-500':type==='ok'?'text-emerald-600':'text-slate-500');
  }
  function hideMsg(){ msg.classList.add('hidden'); }
  function resetUI(){
    hideMsg();
    box.classList.add('hidden');
    dlA.removeAttribute('href');
    dlA.removeAttribute('download');
  }
btnR?.addEventListener('click', () => {
  fileEl.value = '';
  if (nameLabel) nameLabel.textContent = 'Fayl se√ßilm…ôyib';
  resetUI();
});
fileEl?.addEventListener('change', () => {
  const f = fileEl.files?.[0];
  nameLabel.textContent = f ? `Se√ßil…ôn fayl: ${f.name}` : 'Fayl se√ßilm…ôyib';
});
function downloadName(suggest, ext){
  const base = (suggest || 'output').replace(/[\/\\:?*"<>|]+/g,'-');
  return base.endsWith('.'+ext) ? base : `${base}.${ext}`;
}

  // ---- DOCX ‚Üí PDF ----
  async function docxToPdf(file){
    showMsg('DOCX faylƒ± oxunur...', 'info');
    const arrayBuffer = await file.arrayBuffer();
    const result = await window.mammoth.convertToHtml({ arrayBuffer });
    const html = result.value || '<div></div>';

    // HTML-i g√∂r√ºnm…ôz konteynerd…ô PDF-…ô √ßevir…ôk
    const temp = document.createElement('div');
    temp.style.position='fixed'; temp.style.left='-99999px';
    temp.style.top='0'; temp.style.width='800px';
    temp.innerHTML = html;
    document.body.appendChild(temp);

    showMsg('PDF yaradƒ±lƒ±r...', 'info');
    const opt = { margin: 10, filename: 'out.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' } };
    const worker = window.html2pdf().from(temp).set(opt);
    const pdfBlob = await worker.outputPdf('blob');
    temp.remove();

    const url = URL.createObjectURL(pdfBlob);
    dlA.href = url;
    dlA.download = downloadName(file.name.replace(/\.docx$/i,''), 'pdf');
    box.classList.remove('hidden');
    showMsg('Hazƒ±rdƒ±r ‚úÖ', 'ok');
  }

  // ---- PDF ‚Üí DOCX (sad…ô m…ôtn, beta) ----
  async function pdfToDocx(file){
    showMsg('PDF oxunur...', 'info');
    const data = await file.arrayBuffer();
    const pdfjs = window.pdfjsLib;
    if (!pdfjs) throw new Error('PDF i≈ül…ôyicisi tapƒ±lmadƒ± (pdfjsLib).');
    if (!pdfjs.GlobalWorkerOptions.workerSrc) {
      pdfjs.GlobalWorkerOptions.workerSrc =
        'https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.worker.min.js';
    }
    const pdf = await pdfjs.getDocument({ data }).promise;


    const paras = [];
    for (let p=1; p<=pdf.numPages; p++){
      const page = await pdf.getPage(p);
      const text = await page.getTextContent();
      const line = text.items.map(it => it.str).join(' ').replace(/\s+/g,' ').trim();
      if (line) paras.push(line);
    }

    // DOCX qur
    const { Document, Packer, Paragraph, TextRun } = window.docx;
    const doc = new Document({
      sections: [{
        properties: {},
        children: paras.length ? paras.map(t => new Paragraph({ children:[ new TextRun({ text:t }) ] })) : [ new Paragraph(" ") ],
      }]
    });

    showMsg('DOCX yaradƒ±lƒ±r...', 'info');
    const blob = await Packer.toBlob(doc);
    const url = URL.createObjectURL(blob);
    dlA.href = url;
    dlA.download = downloadName(file.name.replace(/\.pdf$/i,''), 'docx');
    box.classList.remove('hidden');
    showMsg('Hazƒ±rdƒ±r ‚úÖ (m…ôtn …ôsaslƒ± konvert)', 'ok');
  }

  btn?.addEventListener('click', async () => {
    try{
      resetUI();
      const f = fileEl.files?.[0];
      if(!f){ showMsg('Z…ôhm…ôt olmasa fayl se√ßin.', 'error'); return; }

      const mode = modeEl.value;
      const isDocx = /\.docx$/i.test(f.name) || f.type.includes('officedocument');
      const isPdf  = /\.pdf$/i.test(f.name) || f.type === 'application/pdf';

      if (mode==='docx2pdf' && !isDocx){ showMsg('Bu rejim √º√ß√ºn DOCX faylƒ± se√ßin.', 'error'); return; }
      if (mode==='pdf2docx' && !isPdf){ showMsg('Bu rejim √º√ß√ºn PDF faylƒ± se√ßin.', 'error'); return; }

      btn.disabled = true; btn.classList.add('opacity-60','pointer-events-none');

      if (mode==='docx2pdf') await docxToPdf(f);
      else await pdfToDocx(f);

    } catch(err){
      console.error(err);
      showMsg('X…ôta ba≈ü verdi: ' + (err?.message || err), 'error');
    } finally {
      btn.disabled = false; btn.classList.remove('opacity-60','pointer-events-none');
    }
  });
})();
</script>

  <script>
    
  const translations = {
    az: {
      nav: { settings: 'T…ônziml…ôm…ôl…ôr', signIn: 'Daxil ol' },
      hero: {
        title: 'M√º…ôlliml…ôr √º√ß√ºn r…ôq…ômsal resurs platformasƒ±',
        subtitle: 'Az…ôrbaycan m…ôkt…ôbl…ôri √º√ß√ºn uyƒüunla≈üdƒ±rƒ±lƒ±b.',
        ctaPrimary: 'Yeni s…ôn…ôd', ctaSecondary: '≈ûablonlara bax',
        badges: { one: 'KSQ/BSQ & PP', two: 'Al…ôtl…ôr & Testl…ôr', three: 'PDF/DOCX' }
      },
      features: {
        ksqBsq: { title: 'KSQ/BSQ', desc: 'Sinif, f…ônn, n√∂v v…ô n√∂mr…ô √ºzr…ô summativ qiym…ôtl…ôndirm…ô fayllarƒ±.' },
        pp: { title: 'Perspektiv plan (PP)', desc: 'F…ônn √ºzr…ô illik plan fayllarƒ±.' },
        calc: 'Bal kalkulyatoru', templates: 'Sual bankƒ±', export: 'ƒ∞xrac'
      },
      tabs: { pp: 'Perspektiv plan', tools: 'Al…ôtl…ôr & Testl…ôr' },
      ksq: { title: 'KSQ/BSQ', type: 'N√∂v' },
      pp: { title: 'Perspektiv (illik) plan' },
      tools: { calcTitle: 'Bal kalkulyatoru', templatesTitle: '≈ûablon kitabxanasƒ±', bankTitle: 'Sual bankƒ±' },
      labels: { examNo: 'N√∂mr…ô' },
      common: { grade: 'Sinif', subject: 'F…ônn', calculate: 'Hesabla', browse: 'Bax', add: '∆èlav…ô et' },
      subjects: {
        az: 'Az…ôrbaycan dili', lit: '∆èd…ôbiyyat', science: 'T…ôbi…ôt', eng: 'ƒ∞ngilis dili', rus: 'Rus dili', math: 'Riyaziyyat',
        physics: 'Fizika', chemistry: 'Kimya', biology: 'Biologiya',
        az_history: 'Az…ôrbaycan tarixi', world_history: '√úmumi tarix', geography: 'Coƒürafiya',
        it: 'ƒ∞nformatika', life: 'H…ôyat bilgisi', tech: 'Texnologiya', art: 'T…ôsviri inc…ôs…ôn…ôt', music: 'Musiqi',
        pe: 'Fiziki t…ôrbiy…ô', premilitary: '√áaƒüƒ±rƒ±≈üaq…ôd…ôrki hazƒ±rlƒ±q',
      },
      footer: { rights: 'B√ºt√ºn h√ºquqlar qorunur', terms: '≈û…ôrtl…ôr', privacy: 'M…ôxfilik' },
    },
  };

  const subjectKeysByGrade = {
      I:  ['az','life','math','eng','rus','art','music','pe','tech','it'],
      II: ['az','life','math','eng','rus','art','music','pe','tech','it'],
      III:['az','life','math','eng','rus','art','music','pe','tech','it'],
      IV: ['az','life','math','eng','rus','art','music','pe','tech','it'],
      V:  ['az','lit','eng','rus','math','science','it','az_history','geography','art','music','pe','tech'],
      VI: ['az','lit','eng','rus','math','physics','science','it','az_history','geography','art','music','pe','tech'],
      VII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
      VIII:['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
      IX: ['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech'],
      X:  ['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
      XI: ['az','lit','eng','rus','math','physics','chemistry','biology','az_history','world_history','geography','it','pe','art','music','tech','premilitary'],
  };

  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

const state = {
  lang: 'az',
  grade: null,       // …ôvv…ôl 'V' idi ‚Üí bo≈ü
  subject: null,     // …ôvv…ôl null qalƒ±r
  ksqType: null,     // KSQ/BSQ se√ßilm…ôyib
  examIndex: null,
  ppSubject: null,   // PP f…ônni d…ô se√ßilm…ôyib
  catalog: [],
};

  window.state = state;
    
function setActiveTab(name, opts = { scroll: false }) {
  // Tab d√ºym…ôl…ôrinin aktivliyi
  $$('.tab-btn').forEach(btn => {
    const act = btn.dataset.tab === name;
    btn.classList.toggle('bg-white', act);
    btn.classList.toggle('shadow-sm', act);
    btn.classList.toggle('text-slate-900', act);
    btn.classList.toggle('text-slate-600', !act);
    btn.setAttribute('aria-selected', act ? 'true' : 'false');
  });

  // Panell…ôri g√∂st…ôr/gizl…ôt + animasiya
  ['ksq','pp','tools'].forEach(n => {
    const panel = document.getElementById('panel-' + n);
    if (!panel) return;
    if (n === name) {
      panel.classList.add('is-active');
      // d√ºzg√ºn display √º√ß√ºn (grid olan panel √º√ß√ºn)
      if (panel.classList.contains('grid-on')) {
        panel.style.display = 'grid';
      } else {
        panel.style.display = 'block';
      }
      // panelin ba≈üƒ±na yum≈üaq scroll (ist…ôyin…ô g√∂r…ô)
      if (opts.scroll) {
        const y = panel.getBoundingClientRect().top + window.scrollY - 90;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }
    } else {
      panel.classList.remove('is-active');
      panel.style.display = 'none';
    }
  });

  // i√ß scroll-u sƒ±fƒ±rla (vizuallƒ±q √º√ß√ºn)
  document.getElementById('ksq-results')?.scrollTo?.(0,0);
  document.getElementById('pp-results')?.scrollTo?.(0,0);
}

  function option(el, val, text){ const o=document.createElement('option'); o.value=val; o.textContent=text; el.appendChild(o);}  

  function subjectsFor(grade){
    const keys = subjectKeysByGrade[grade] || Object.keys(translations[state.lang].subjects);
    return keys.map(k => translations[state.lang].subjects[k]).filter(Boolean);
  }
  function setText(sel, text){
  const el = document.querySelector(sel);
  if (el) el.textContent = text;
}
    // --- GAS feed ---

function renderSelects(){
  const t = translations[state.lang];

  // === KSQ/BSQ select-l…ôri ===
  const grades = ['I','II','III','IV','V','VI','VII','VIII','IX','X','XI'];

  // Sinif
  const gradeEl = document.getElementById('grade');
  gradeEl.innerHTML = '';
  addPlaceholder(gradeEl, 'Sinfi se√ßin');
  grades.forEach(g => option(gradeEl, g, g));
  gradeEl.value = state.grade ?? "";

  // F…ônn (sinif se√ßilm…ôyibs…ô, yalnƒ±z placeholder)
  const subjEl = document.getElementById('subject');
  subjEl.innerHTML = '';
  addPlaceholder(subjEl, 'F…ônni se√ßin');
  if (state.grade){
    const S = subjectsFor(state.grade);
    S.forEach(s => option(subjEl, s, s));
  }
  subjEl.value = state.subject ?? "";

  // N√∂v (KSQ/BSQ)
  const typeEl = document.getElementById('ksqType');
  typeEl.innerHTML = '';
  addPlaceholder(typeEl, 'N√∂v√º se√ßin');
  option(typeEl, 'KSQ', 'KSQ');
  option(typeEl, 'BSQ', 'BSQ');
  typeEl.value = state.ksqType ?? "";

// N√∂mr…ô (KSQ v…ô ya BSQ se√ßimin…ô uyƒüun)
const idxEl = document.getElementById('examIndex');
idxEl.innerHTML = '';
addPlaceholder(idxEl, 'N√∂mr…ôni se√ßin');

if (state.ksqType === 'KSQ') {
  for (let i=1;i<=10;i++) option(idxEl, String(i), String(i));
} else if (state.ksqType === 'BSQ') {
  ['1','2'].forEach(i => option(idxEl, i, i));
}
idxEl.value = state.examIndex ?? "";
idxEl.disabled = !state.ksqType; // n√∂v se√ßilm…ôyibs…ô passiv


  // === PP f…ônn ===
  const ppEl = document.getElementById('ppSubject');
  ppEl.innerHTML = '';
  addPlaceholder(ppEl, 'F…ônni se√ßin');
  Object.values(t.subjects).forEach(s => option(ppEl, s, s));
  ppEl.value = state.ppSubject ?? "";

  // === M…ôtnl…ôr (d…ôyi≈üm…ôyib ‚Äî s…ônin kodundakƒ± kimi) ===
  setText('#hero-title', t.hero.title);
  setText('#lbl-grade',   t.common.grade);
  setText('#lbl-subject', t.common.subject);
  setText('#lbl-type',    t.ksq.type);
  setText('#lbl-examNo', t.labels.examNo);
  setText('#lbl-pp-subject', t.common.subject);

  setText('#ksq-title', t.ksq.title);
  setText('#pp-title',  t.pp.title);

  setText('#hero-subtitle', t.hero.subtitle);
  setText('#hero-b1', t.hero.badges.one);
  setText('#hero-b2', t.hero.badges.two);
  setText('#hero-b3', t.hero.badges.three);

  setText('#feat-ksq-title', t.features.ksqBsq.title);
  setText('#feat-ksq-desc',  t.features.ksqBsq.desc);
  setText('#feat-pp-title',  t.features.pp.title);
  setText('#feat-pp-desc',   t.features.pp.desc);

  setText('#tab-pp',    t.tabs.pp);
  setText('#tab-tools', t.tabs.tools);

  setText('#tool-calc-title',      t.tools.calcTitle);
  setText('#tool-templates-title', t.tools.templatesTitle);
  setText('#tool-bank-title',      t.tools.bankTitle);

  setText('#ft-rights',  t.footer.rights);
  setText('#ft-terms',   t.footer.terms);
  setText('#ft-privacy', t.footer.privacy);
  setText('[data-i18n="nav.settings"]', t.nav.settings);
}

document.getElementById('grade').addEventListener('change', e=>{
  state.grade = e.target.value || null;
  // sinif d…ôyi≈üdis…ô, f…ônni sƒ±fƒ±rla
  state.subject = null;
  renderSelects();
  toggleResults();
});

document.getElementById('subject').addEventListener('change', e=>{
  state.subject = e.target.value || null;
  toggleResults();
});

document.getElementById('ksqType').addEventListener('change', e=>{
  state.ksqType = e.target.value || null;
  state.examIndex = null;        // <-- bu b…ôs edir
  renderSelects();
  toggleResults();
});



document.getElementById('examIndex').addEventListener('change', e=>{
  state.examIndex = e.target.value || null;
  toggleResults();
});


document.getElementById('ppSubject').addEventListener('change', e=>{
  state.ppSubject = e.target.value || null;
  toggleResults();
});


const TAB_ROUTES = { ksq: "/ksq-bsq", pp: "/pp", tools: "/calculator" };
["tab-ksq","tab-pp","tab-tools"].forEach(id => {
  const el = document.getElementById(id);
  if (!el) return;
  el.addEventListener("click", (ev) => {
    ev.preventDefault();
    const route = TAB_ROUTES[el.dataset.tab] || "/";
    goTo(route);
  });
});

(function init(){
  document.getElementById('year').textContent = new Date().getFullYear();
  if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
  window.scrollTo(0, 0);
  setActiveTab('ksq', { scroll: false });

  // ARTƒ∞Q avtomatik se√ßim YOXDUR
  // state.subject = ...  ‚Üê sil
  // state.ppSubject = ... ‚Üê sil

  renderSelects();
  toggleResults();
})();

    
  const settingsBtn = document.getElementById('btn-settings');
  const panel = document.getElementById('settings-panel');
  const darkToggle = document.getElementById('dark-toggle');
// Sistem ayarƒ±nƒ± da n…ôz…ôr…ô al
const mq = window.matchMedia('(prefers-color-scheme: dark)');

// LocalStorage-da yoxdursa, sistemi g√∂t√ºr
const saved = localStorage.getItem('theme');
const initialTheme = saved ? saved : (mq.matches ? 'dark' : 'light');

// T…ôtbiq et
// T…ôtbiq et
document.documentElement.classList.toggle('dark', initialTheme === 'dark');
if (darkToggle) darkToggle.checked = (initialTheme === 'dark');
applyThemeAssets(initialTheme);

// NEW ‚Äî ilk y√ºkl…ônm…ôd…ô bo≈ü kartlarƒ±n (KSQ/PP) placeholder-larƒ±nƒ±
// m√∂vcud temaya (light/dark) uyƒüun yenil…ô
if (document.readyState !== 'loading') {
  refreshEmptyPlaceholders();
} else {
  document.addEventListener('DOMContentLoaded', refreshEmptyPlaceholders);
}

darkToggle?.addEventListener('change', (e) => {
  const theme = e.target.checked ? 'dark' : 'light';
  document.documentElement.classList.toggle('dark', theme === 'dark');
  localStorage.setItem('theme', theme);
  applyThemeAssets(theme);
  refreshEmptyPlaceholders(); // NEW
});


mq.addEventListener?.('change', (e) => {
  if (!localStorage.getItem('theme')) {
    const theme = e.matches ? 'dark' : 'light';
    document.documentElement.classList.toggle('dark', theme === 'dark');
    if (darkToggle) darkToggle.checked = (theme === 'dark');
    applyThemeAssets(theme);
    refreshEmptyPlaceholders(); // NEW
  }
});

  // paneli a√ß/baƒüla
  settingsBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    panel.classList.toggle('hidden');
  });

  // k…ônara klik = baƒüla
  document.addEventListener('click', (e) => {
    if (!panel.contains(e.target) && !settingsBtn.contains(e.target)) {
      panel.classList.add('hidden');
    }
  });
function applyThemeAssets(theme) {
  const isDark = theme === 'dark';

  // Header loqo ‚Äî favicon deyil, loqo fayllarƒ±
  const logoEl = document.getElementById('site-logo');
  if (logoEl) {
    logoEl.src = isDark ? 'assets/ep-favicon-dark.svg' : 'assets/ep-favicon-light.svg';
  }

  // Apple Touch Icon (mobil √º√ß√ºn)
  const apple = document.getElementById('apple-icon');
  if (apple) {
    apple.href = isDark ? 'assets/ep-favicon-dark.svg' : 'assets/ep-favicon-light.svg';
  }
}



const FEED_URL = "https://script.google.com/macros/s/AKfycbxnt6tDu5YJ_P_FUgobNTu_Q-2dbyZjaXSWwyjIKysTJ3UwnWZKqm0ZxoNwoyT4M0w7/exec";

// Kart ba≈ülƒ±ƒüƒ±
function buildTitle(it){
  const format = (it.ext || 'FILE').toUpperCase();
  return it.type==='PP'
    ? `${it.subject} ¬∑ PP ¬∑ ${format}`
    : `${it.grade} ¬∑ ${it.subject} ¬∑ ${it.type}-${it.index} ¬∑ ${format}`;
}

// G√∂st…ôril…ôc…ôk fayl adƒ± (ist…ôs…ôn saxla)
function downloadName(it){
  const ext = (it.ext || 'FILE').toLowerCase();
  return (it.type==='PP'
    ? `${it.subject} - PP.${ext}`
    : `${it.grade} - ${it.subject} - ${it.type}${it.index}.${ext}`
  ).replace(/[\/\\:?*"<>|]+/g,'-');
}

function renderKSQ(){
  const wrap = document.getElementById('ksq-results');
  wrap.innerHTML = '';

  // Filtrl…ôm…ô
const list = window.state.catalog.filter(it=>{
  if (it.type !== state.ksqType) return false;
  if (it.grade !== state.grade) return false;
  if (it.subject !== state.subject) return false;
  if (it.index !== state.examIndex) return false;
  return true;
});

  // Sayƒ± g√∂st…ôr
  document.getElementById('ksq-count').textContent = list.length;

// 1‚Äì2 n…ôtic…ô varsa yalnƒ±z grid-i m…ôrk…ôzl…ô≈üdir
const gridEl = document.getElementById('ksq-results');
const center = (list.length > 0 && list.length <= 2);
gridEl.classList.toggle('min-h-[240px]', center);
gridEl.classList.toggle('place-content-center', center);
gridEl.classList.toggle('justify-items-center', center);
if (!center) {
  gridEl.classList.remove('min-h-[240px]','place-content-center','justify-items-center');
}


  // N…ôtic…ô yoxdursa
  if (list.length === 0) {
    wrap.innerHTML = '<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">Fayl yoxdur</div>';
    return;
  }

  // Kartlarƒ± √ß…ôk
  list.forEach(it=>{
    const card = document.createElement('div');
    card.className = 'group rounded-xl p-[1px] bg-gradient-to-br from-slate-200 to-slate-100';
    card.innerHTML = `
      <div class="rounded-[11px] p-4 bg-white shadow-sm group-hover:shadow-md transition">
        <div class="flex items-start gap-3">
          <div class="h-8 w-8 rounded-lg bg-slate-100 grid place-items-center">üìÑ</div>
          <div class="flex-1">
            <div class="text-sm font-medium break-words">${buildTitle(it)}</div>
            <div class="mt-1"><span class="rounded-full bg-slate-100 px-2 py-0.5 text-[10px] border">${(it.ext || 'FILE').toUpperCase()}</span></div>
            <div class="mt-3">
              <a href="${it.dl}"
                target="_self" rel="noopener"
                data-download="${it.dl}"
                class="download-btn rounded-2xl bg-slate-900 text-white px-3 py-1.5 text-sm inline-flex items-center gap-2">‚¨áÔ∏è Y√ºkl…ô</a>

            </div>
          </div>
        </div>
      </div>`;
    wrap.appendChild(card);
  });
}


function renderPP(){
  const wrap = document.getElementById('pp-results');
  wrap.innerHTML = '';

  const list = window.state.catalog.filter(it => it.type==='PP' && it.subject===state.ppSubject);

  document.getElementById('pp-count').textContent = list.length;

const gridEl = document.getElementById('pp-results');
const center = (list.length > 0 && list.length <= 2);
gridEl.classList.toggle('min-h-[240px]', center);
gridEl.classList.toggle('place-content-center', center);
gridEl.classList.toggle('justify-items-center', center);
if (!center) {
  gridEl.classList.remove('min-h-[240px]','place-content-center','justify-items-center');
}



  if (list.length === 0) {
    wrap.innerHTML = '<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">Fayl yoxdur</div>';
    return;
  }

  list.forEach(it=>{
    const card = document.createElement('div');
    card.className = 'group rounded-xl p-[1px] bg-gradient-to-br from-slate-200 to-slate-100';
    card.innerHTML = `
      <div class="rounded-[11px] p-4 bg-white shadow-sm group-hover:shadow-md transition">
        <div class="flex items-start gap-3">
          <div class="h-8 w-8 rounded-lg bg-slate-100 grid place-items-center">üìÑ</div>
          <div class="flex-1">
            <div class="text-sm font-medium break-words">${buildTitle(it)}</div>
            <div class="mt-1"><span class="rounded-full bg-slate-100 px-2 py-0.5 text-[10px] border">${(it.ext || 'FILE').toUpperCase()}</span></div>
            <div class="mt-3">
              <a href="${it.dl}"
                 target="_self" rel="noopener"
                 data-download="${it.dl}"
                 class="download-btn rounded-2xl bg-slate-900 text-white px-3 py-1.5 text-sm inline-flex items-center gap-2">‚¨áÔ∏è Y√ºkl…ô</a>

            </div>
          </div>
        </div>
      </div>`;
    wrap.appendChild(card);
  });
}




async function loadAllFromMaterials() {
  try {
    const res = await fetch(FEED_URL, { cache: 'no-store' });
    const catalog = await res.json();
    state.catalog = Array.isArray(catalog) ? catalog : [];
    renderSelects();
    // He√ß n…ôyi √ºst…ôl…ôm…ô ‚Äî se√ßim yoxdursa "Z…ôhm…ôt olmasa se√ßim edin" qalsƒ±n
    toggleResults();
  } catch (e) {
    console.error(e);
    // Yalnƒ±z se√ßiml…ôr doludursa s…ôhv mesajƒ±nƒ± g√∂st…ôr
    if (allChosenKSQ()) {
      document.getElementById('ksq-results').innerHTML =
        `<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">X…ôta: ${e.message}</div>`;
    }
    if (allChosenPP()) {
      document.getElementById('pp-results').innerHTML =
        `<div class="rounded-lg border border-dashed border-slate-300 p-6 text-slate-500">X…ôta: ${e.message}</div>`;
    }
  }
}


document.addEventListener('DOMContentLoaded', () => {
  renderSelects();
  loadAllFromMaterials();
  refreshEmptyPlaceholders(); // NEW
});
function addPlaceholder(selectEl, label){
  const o = document.createElement('option');
  o.value = "";
  o.textContent = label;
  o.disabled = true;
  o.selected = true;
  o.hidden = true;
  selectEl.appendChild(o);
  selectEl.required = true; // :invalid i≈ül…ôsin
}

function allChosenKSQ(){
return !!(state.grade && state.subject && state.ksqType && state.examIndex);
}
function allChosenPP(){
  return !!state.ppSubject;
}

function placeholder(icon, title, subtitle){
  // Kartƒ±n daxili 16px paddingini -m-4 il…ô l…ôƒüv edirik ki,
  // placeholder b√ºt√ºn √ß…ôr√ßiv…ôni EYNƒ∞ tam …ôhat…ô etsin.
  // Min h√ºnd√ºrl√ºk YOXDUR ‚Äì kontent q…ôd…ôr olur (avtomatik uyƒüunla≈üƒ±r).
  return `
    <div class="-m-4 rounded-xl overflow-hidden">
      <div class="bg-gradient-to-br from-indigo-500/35 via-fuchsia-500/35 to-amber-500/35">
        <div class="px-6 py-10 sm:py-12 text-center backdrop-blur-sm bg-white/45 dark:bg-slate-900/30">
          <div class="mx-auto mb-2 h-12 w-12 grid place-items-center rounded-full bg-white/40 dark:bg-white/10">${icon}</div>
          <div class="text-base font-semibold">${title}</div>
          <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">${subtitle}</div>
        </div>
      </div>
    </div>`;
}

function showEmpty(cardId, { icon = 'üóÇÔ∏è', title = '', desc = '' }) {
  const card = document.getElementById(cardId);
  if (!card || card.querySelector('.empty-overlay') || card.querySelector('.empty-light')) return;

  const isDark = document.documentElement.classList.contains('dark');

  // H√ºnd√ºrl√ºy√º sabit saxla ki, layout t…ôrp…ônm…ôsin
  card.classList.add('min-h-[320px]', 'md:min-h-[340px]');

if (isDark) {
  const overlay = document.createElement('div');
  overlay.className = 'empty-overlay absolute inset-0 z-10';
  overlay.innerHTML = `
    <div class="w-full h-full grid place-items-center px-6">
      <div class="inner">
        <div class="icon text-xl">${icon}</div>
        <div class="title">${title}</div>
        <div class="desc">${desc}</div>
      </div>
    </div>`;
  card.appendChild(overlay);
}
 
else {
    // LIGHT: kompakt, premium mini-card (tam √ß…ôr√ßiv…ôni tutmur)
    const box = document.createElement('div');
    box.className = 'empty-light';
    box.innerHTML = `
      <div class="card">
        <div class="icon">${icon}</div>
        <div class="title">${title}</div>
        <div class="desc">${desc}</div>
      </div>`;
    card.appendChild(box);
  }
}

function hideEmpty(cardId) {
  const card = document.getElementById(cardId);
  card?.querySelector('.empty-overlay')?.remove();
  card?.querySelector('.empty-light')?.remove();
  card?.classList.remove('min-h-[320px]', 'md:min-h-[340px]');
}




function toggleResults(){
  // === KSQ/BSQ ===
  const gridKSQ   = document.getElementById('ksq-results');
  const countRowK = document.getElementById('ksq-count-row');

  if (gridKSQ){
    if (allChosenKSQ()){
      hideEmpty('ksq-results-card');            // bo≈ü overlayi gizl…ôt
      countRowK?.classList.remove('hidden');    // say s…ôtrini g√∂st…ôr
      renderKSQ();                               // real n…ôtic…ôl…ôri g√∂st…ôr
    } else {
      // n…ôtic…ô yoxdursa: say s…ôtri yox, grid bo≈ü, overlay tam ekranda
      countRowK?.classList.add('hidden');
      gridKSQ.innerHTML = '';
      showEmpty('ksq-results-card', {
        icon: 'üóÇÔ∏è',
        title: 'Z…ôhm…ôt olmasa se√ßim edin',
        desc: 'Sinif, f…ônn, n√∂v v…ô n√∂mr…ôni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.'
      });
    }
  }

  // === PP ===
  const gridPP   = document.getElementById('pp-results');
  const countRowP= document.getElementById('pp-count-row');

  if (gridPP){
    if (allChosenPP()){
      hideEmpty('pp-results-card');
      countRowP?.classList.remove('hidden');
      renderPP();
    } else {
      countRowP?.classList.add('hidden');
      gridPP.innerHTML = '';
      showEmpty('pp-results-card', {
        icon: 'üóÇÔ∏è',
        title: 'Z…ôhm…ôt olmasa f…ônni se√ßin',
        desc: 'F…ônni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.'
      });
    }
  }
}
function refreshEmptyPlaceholders() {
  // KSQ kartƒ±
  if (!allChosenKSQ()) {
    hideEmpty('ksq-results-card');
    showEmpty('ksq-results-card', {
      icon: 'üóÇÔ∏è',
      title: 'Z…ôhm…ôt olmasa se√ßim edin',
      desc: 'Sinif, f…ônn, n√∂v v…ô n√∂mr…ôni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.'
    });
  }
  // PP kartƒ±
  if (!allChosenPP()) {
    hideEmpty('pp-results-card');
    showEmpty('pp-results-card', {
      icon: 'üóÇÔ∏è',
      title: 'Z…ôhm…ôt olmasa f…ônni se√ßin',
      desc: 'F…ônni se√ßdikd…ôn sonra n…ôtic…ôl…ôr burada g√∂r√ºn…ôc…ôk.'
    });
  }
}

// ========== BAL KALKULYATORU ‚Äî REJƒ∞M SE√áƒ∞Mƒ∞ + 6 KSQ + DOƒûRU Qƒ∞YM∆èT ==========
(function initCalculator(){
  const W_KSQ = 0.40, W_BSQ = 0.60; // 40/60

  const $id=(x)=>document.getElementById(x);
  const $qsa=(s)=>Array.from(document.querySelectorAll(s));

  let mode = null;   // se√ßim edilm…ôyib

  // --- UI rejim g√∂r√ºn√º≈ü√º (mode-a g√∂r…ô hiss…ôl…ôri a√ß/qapat) ---
  function updateModeUI(){
    const card = document.getElementById('calc-card');

    document.querySelectorAll('[data-mode]').forEach(b=>{
      const act = (b.dataset.mode === mode);
      b.classList.toggle('bg-white/10', act);
      b.classList.toggle('border-slate-300', act);
      b.setAttribute('aria-pressed', act ? 'true' : 'false');
    });

    if (!mode) {
      card?.classList.add('vcenter','max-w-xl','mx-auto','h-full','w-full');
      card?.classList.remove('space-y-5','p-4','pt-8');
      document.getElementById('fs-t1').classList.add('hidden');
      document.getElementById('fs-t2').classList.add('hidden');
      document.getElementById('out-t1-card')?.classList.add('hidden');
      document.getElementById('out-t2-card')?.classList.add('hidden');
      document.getElementById('out-year-card')?.classList.add('hidden');
      document.getElementById('calc-output')?.classList.add('hidden');
      return;
    }

    card?.classList.remove('vcenter','max-w-xl','mx-auto','h-full','w-full');
    card?.classList.add('space-y-5','p-4','pt-8');

    document.getElementById('fs-t1').classList.toggle('hidden', mode === 't2');
    document.getElementById('fs-t2').classList.toggle('hidden', mode === 't1');
    document.getElementById('out-t1-card')?.classList.toggle('hidden', mode === 't2');
    document.getElementById('out-t2-card')?.classList.toggle('hidden', mode === 't1');
    document.getElementById('out-year-card')?.classList.toggle('hidden', mode !== 'both');
  }

  // Rejim d√ºym…ôl…ôri
  $qsa('[data-mode]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const keepY = window.scrollY;
      mode = btn.dataset.mode;         // 't1' | 't2' | 'both'
      updateModeUI();
      btn.blur();
      requestAnimationFrame(()=>{ window.scrollTo(0, keepY); });
    });
  });

  updateModeUI(); // ilkin g√∂r√ºn√º≈ü (m…ôrk…ôz ‚Äúrejim se√ßimi‚Äù)

  // --- Elementl…ôr ---
  const btn      = $id('btn-calc');
  const out      = $id('calc-output');
  const err      = $id('calc-error');
  const warn     = $id('calc-warn');
  const resetBtn = $id('btn-reset');

  // --- Yardƒ±m√ßƒ± funksiyalar ---
  function clearOutputs(){
    // I yarƒ±mil
    $id('out-t1').textContent = '‚Äî';
    $id('out-t1-ksq').textContent = '‚Äî';
    $id('out-t1-bsq').textContent = '‚Äî';
    $id('out-t1-grade').textContent = '‚Äî';
    // II yarƒ±mil
    $id('out-t2').textContent = '‚Äî';
    $id('out-t2-ksq').textContent = '‚Äî';
    $id('out-t2-bsq').textContent = '‚Äî';
    $id('out-t2-grade').textContent = '‚Äî';
    // ƒ∞llik
    $id('out-year').textContent = '‚Äî';
    $id('out-year-grade').textContent = '‚Äî';
  }

  function resetCalc(){
    ['t1','t2'].forEach(p=>{
      ['1','2','3','4','5','6'].forEach(n=>{
        const el = $id(`${p}-ksq${n}`); if (el) el.value = '';
      });
      const bsq = $id(`${p}-bsq`); if (bsq) bsq.value = '';
    });

    err.classList.add('hidden'); err.textContent='';
    warn.classList.add('hidden');
    clearOutputs();
    out.classList.add('hidden');

    $id('calc-card')?.scrollTo({ top: 0, behavior: 'smooth' });
  }
  resetBtn?.addEventListener('click', resetCalc);

  const numOrNull = v => (v===''||v==null)?null:(isFinite(+v)?+v:null);
  const to5 = x => (x>=81)?5 : (x>=61)?4 : (x>=41)?3 : 2;
  const idsFor = prefix => ['1','2','3','4','5','6'].map(n=>`${prefix}-ksq${n}`);
  const avg = arr => arr.length? arr.reduce((a,b)=>a+b,0)/arr.length : 0;

  function readTerm(prefix){
    const ksq = idsFor(prefix).map(id=>numOrNull($id(id).value)).filter(v=>v!==null);
    const bsq = numOrNull($id(`${prefix}-bsq`).value);
    return {ksq, bsq};
  }

  function computeTerm(prefix, outIds){
    const {ksq, bsq} = readTerm(prefix);
    if(ksq.length===0 && bsq===null) return null; // tam bo≈ü

    if(bsq===null || bsq<0 || bsq>100){
      err.textContent = (prefix==='t1'?'I':'II') + ' yarƒ±mil √º√ß√ºn BSQ d…ôy…ôrini 0‚Äì100 arasƒ±nda daxil edin.';
      err.classList.remove('hidden');
      return {error:true};
    }

    const kAvg = ksq.length? avg(ksq) : 0;
    // b…ôzi KSQ-l…ôr bo≈üdursa x…ôb…ôrdarlƒ±q g√∂st…ôr
    warn.classList.toggle('hidden', ksq.length===6 || ksq.length===0);

    const total = +(kAvg*W_KSQ + bsq*W_BSQ).toFixed(2);

    // UI
    $id(outIds.total).textContent = total.toFixed(2);
    $id(outIds.ksq).textContent   = kAvg.toFixed(2);
    $id(outIds.bsq).textContent   = bsq.toFixed(2);
    $id(outIds.grade).textContent = to5(total);

    return total;
  }

  // Enter qƒ±sayolu
  [...idsFor('t1'), 't1-bsq', ...idsFor('t2'), 't2-bsq'].forEach(id=>{
    const el=$id(id);
    el?.addEventListener('keydown',e=>{ if(e.key==='Enter'){ e.preventDefault(); btn.click(); } });
  });

  // Hesabla
  btn?.addEventListener('click', ()=>{
    err.classList.add('hidden'); 
    err.textContent = '';
    updateModeUI();

    if(!mode){
      err.textContent = 'Z…ôhm…ôt olmasa hesablamadan √∂nc…ô rejimi se√ßin (I, II v…ô ya H…ôr ikisi).';
      err.classList.remove('hidden');
      return;
    }

    let t1 = null, t2 = null;

    if(mode !== 't2'){
      const r1 = computeTerm('t1', { total:'out-t1', ksq:'out-t1-ksq', bsq:'out-t1-bsq', grade:'out-t1-grade' });
      if(r1 && r1.error) return;
      t1 = typeof r1 === 'number' ? r1 : null;
    } else {
      $id('out-t1').textContent='‚Äî'; $id('out-t1-ksq').textContent='‚Äî'; $id('out-t1-bsq').textContent='‚Äî'; $id('out-t1-grade').textContent='‚Äî';
    }

    if(mode !== 't1'){
      const r2 = computeTerm('t2', { total:'out-t2', ksq:'out-t2-ksq', bsq:'out-t2-bsq', grade:'out-t2-grade' });
      if(r2 && r2.error) return;
      t2 = typeof r2 === 'number' ? r2 : null;
    } else {
      $id('out-t2').textContent='‚Äî'; $id('out-t2-ksq').textContent='‚Äî'; $id('out-t2-bsq').textContent='‚Äî'; $id('out-t2-grade').textContent='‚Äî';
    }

    out.classList.remove('hidden');
    out.scrollIntoView({ behavior: 'smooth', block: 'start' });

    if(mode === 'both' && typeof t1 === 'number' && typeof t2 === 'number'){
      const yearVal = +(((t1 + t2) / 2).toFixed(2));
      $id('out-year').textContent = yearVal.toFixed(2);
      $id('out-year-grade').textContent = to5(yearVal);
      $id('out-year-card').classList.remove('hidden');
    } else {
      $id('out-year').textContent = '‚Äî';
      $id('out-year-grade').textContent = '‚Äî';
      $id('out-year-card').classList.add('hidden');
    }
  });
})();


  </script>
  <script>
/* ‚Äî Route ‚Üí SEO x…ôrit…ôsi ‚Äî */
const META = {
  "/":              { title: "EduPlan ‚Äì M√º…ôlliml…ôr √º√ß√ºn r…ôq…ômsal resurslar",
                      desc:  "KSQ/BSQ, PP v…ô al…ôtl…ôr ‚Äì Az…ôrbaycan m…ôkt…ôbl…ôri √º√ß√ºn." },
  "/ksq-bsq":       { title: "KSQ/BSQ ‚Äì Summativ fayllar | EduPlan",
                      desc:  "Sinif, f…ônn, n√∂v v…ô n√∂mr…ô √ºzr…ô KSQ/BSQ fayllarƒ±." },
  "/pp":            { title: "Perspektiv plan (PP) ‚Äì ƒ∞llik planlar | EduPlan",
                      desc:  "F…ônn √ºzr…ô illik perspektiv plan fayllarƒ±." },
  "/calculator":    { title: "Bal kalkulyatoru (KSQ 40% ¬∑ BSQ 60%) | EduPlan",
                      desc:  "I/II yarƒ±mil v…ô illik n…ôtic…ôni hesabla." },
  "/question-bank": { title: "Sual bankƒ± ‚Äì Tezlikl…ô | EduPlan",
                      desc:  "Multiple-choice v…ô qƒ±sa cavab suallarƒ± hazƒ±rlanƒ±r." },
  "/converter":     { title: "PDF/DOCX √ßevirici | EduPlan",
                      desc:  "PDF ‚Üî DOCX √ßevirm…ô (s√ºr…ôtli v…ô sad…ô)." }
};

function setMeta(route){
  const m = META[route] || META["/"];
  // title + description
  document.title = m.title;
  let d = document.querySelector('meta[name="description"]');
  if (!d) { d = document.createElement('meta'); d.name = "description"; document.head.appendChild(d); }
  d.content = m.desc;

  // canonical
  let c = document.querySelector('link[rel="canonical"]');
  if (!c) { c = document.createElement('link'); c.rel = "canonical"; document.head.appendChild(c); }
  c.href = location.origin + route;

const bcMap = {
  "/":              [{name:"Ana s…ôhif…ô", url:"/"}],
  "/ksq-bsq":       [{name:"Ana s…ôhif…ô", url:"/"},{name:"KSQ/BSQ", url:"/ksq-bsq"}],
  "/pp":            [{name:"Ana s…ôhif…ô", url:"/"},{name:"Perspektiv plan", url:"/pp"}],
  "/calculator":    [{name:"Ana s…ôhif…ô", url:"/"},{name:"Bal kalkulyatoru", url:"/calculator"}],
  "/question-bank": [{name:"Ana s…ôhif…ô", url:"/"},{name:"Sual bankƒ±", url:"/question-bank"}],
  "/converter": [{name:"Ana s…ôhif…ô", url:"/"},{name:"√áevirici", url:"/converter"}]
};
const bc = bcMap[route] || bcMap["/"];


  // …ôvv…ôlkini sil
  document.querySelector('script[type="application/ld+json"][data-bc]')?.remove();
  // yenisini yaz
  const s = document.createElement('script');
  s.type = 'application/ld+json';
  s.setAttribute('data-bc','');
  s.textContent = JSON.stringify({
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement": bc.map((it,i)=>({
      "@type":"ListItem",
      "position": i+1,
      "name": it.name,
      "item": location.origin + it.url
    }))
  });
  document.head.appendChild(s);
}
</script>

<script>
(() => {
const ROUTES = {
  "/":              { tab: "ksq",   target: "#hero" },     // ‚ú®
  "/ksq-bsq":       { tab: "ksq",   target: "#panel-ksq" },
  "/pp":            { tab: "pp",    target: "#panel-pp" },
  "/calculator":    { tab: "tools", target: "#calc-card" },
  "/question-bank": { tab: "tools", target: "#bank-card" },
  "/converter":     { tab: "tools", target: "#convert-card" } // yeni h…ôd…ôf: √ßevirici kartƒ±
};


  // Ki√ßik helper: smooth scroll (+ sticky header offset ~90px)
  function smoothTo(sel) {
    const el = document.querySelector(sel);
    if (!el) return;
    const y = el.getBoundingClientRect().top + window.pageYOffset - 90;
    window.scrollTo({ top: y, behavior: "smooth" });
  }

  // M…ôrk…ôzi naviqasiya funksiyasƒ±
function goTo(route, { replace = false } = {}) {
  const r = ROUTES[route] || ROUTES["/"];
  if (typeof setActiveTab === "function" && r.tab) setActiveTab(r.tab, { scroll: false });

  if (replace) history.replaceState({ route }, "", route);
  else if (location.pathname !== route) history.pushState({ route }, "", route);

  // ‚á© SEO meta + canonical + breadcrumbs
  setMeta(route);

  requestAnimationFrame(() => smoothTo(r.target));
}
window.goTo = goTo; // ‚úÖ qlobal et


  // Hero & dig…ôr klikl…ôr: [data-route]
  document.addEventListener("click", (e) => {
    const btn = e.target.closest(".route-btn[data-route]");
    if (!btn) return;
    const route = btn.getAttribute("data-route");
    e.preventDefault();
    goTo(route);
  });

  // Geri/ir…ôli d√ºym…ôl…ôri
  window.addEventListener("popstate", (e) => {
    const route = (e.state && e.state.route) || location.pathname;
    const r = ROUTES[route] ? route : "/";
    // replace = true, √ß√ºnki tarix…ô …ôlav…ô etm…ôy…ôk
    goTo(r, { replace: true });
  });

  // GitHub Pages SPA fallback-dan g…ôl…ôn path-ƒ± b…ôrpa et
  const fallbackPath = sessionStorage.getItem("eduplan_spa_path");
  if (fallbackPath) {
    sessionStorage.removeItem("eduplan_spa_path");
    history.replaceState({ route: fallbackPath }, "", fallbackPath);
  }

document.addEventListener("DOMContentLoaded", () => {
  const p = location.pathname;
  if (p !== "/" && (p in ROUTES)) {
    goTo(p, { replace: true });   // ‚ú® /pp, /ksq-bsq v…ô s. olduqda
  } else {
    window.scrollTo(0, 0);        // ‚ú® / olduqda he√ß yer…ô getm…ô
  }
});


  // M√∂vcud TAB d√ºym…ôl…ôrin…ô route qo≈ü (s…ônin kodunda var idi ‚Äî bunu …ôv…ôz et)
  const TAB_ROUTES = { ksq: "/ksq-bsq", pp: "/pp", tools: "/calculator" }; // tools √º√ß√ºn …ôsas fokus: kalkulyator
  ["tab-ksq", "tab-pp", "tab-tools"].forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener("click", (ev) => {
      ev.preventDefault();
      const name = el.dataset.tab;
      const route = TAB_ROUTES[name] || "/";
      goTo(route);
    });
  });
})();
</script>
<!-- DOCX ‚Üí HTML √º√ß√ºn -->
<script src="https://unpkg.com/mammoth@1.6.0/mammoth.browser.min.js"></script>
<!-- HTML ‚Üí PDF √º√ß√ºn -->
<script src="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
<!-- PDF oxumaq √º√ß√ºn -->
<script src="https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.min.js"></script>
<!-- DOCX yaratmaq √º√ß√ºn -->
<script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>

</body>
</html>
